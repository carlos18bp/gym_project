import{e as l,f as c,g as e,s as N,u as V,x as F,c as _,y as Z,r as f,z as O,B as I,t as i,j as d,l as h,w as H,v as q,F as g,A as B,i as A,C as G,n as J}from"./index.js";import{_ as K,a as Q,b as W}from"./TextStages.js";import{u as X}from"./process.js";import{r as Y}from"./MagnifyingGlassIcon.js";import{r as ee}from"./EyeIcon.js";import{r as te}from"./ChevronRightIcon.js";function se(x,p){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),e("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})])}function oe(x,p){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}const ae={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},ie={class:"py-10 px-4 sm:px-6 lg:px-8"},ne={key:0,class:"p-5 rounded-lg border-2 border-stroke bg-terciary"},re={class:"col-span-2"},le={class:"flex items-center justify-between gap-3"},ce={class:"flex items-center gap-3"},de=e("img",{src:W,class:"h-6 w-6"},null,-1),ue={class:"grid"},_e={class:"text-base text-primary font-medium"},he={class:"text-sm text-gray-500 font-regular"},pe={class:"grid xl:grid-cols-2"},ve={class:"font-medium mt-4 space-y-1"},me={class:"flex gap-2"},fe=e("h3",{class:"text-base text-primary"},"Usuario:",-1),ge={class:"text-gray-500"},xe={class:"flex gap-2"},ye=e("h3",{class:"text-base text-primary"},"Autoridad:",-1),we={class:"text-gray-500"},be={class:"flex gap-2"},ke=e("h3",{class:"text-base text-primary"},"Dte./Accionante:",-1),Ce={class:"text-gray-500"},Pe={class:"flex gap-2"},Be=e("h3",{class:"text-base text-primary"},"Dte./Accionado:",-1),Ae={class:"text-gray-500"},$e={class:"flex gap-2"},je=e("h3",{class:"text-base text-primary"},"Radicado:",-1),Le={class:"text-gray-500"},De={class:"flex gap-2"},Se=e("h3",{class:"text-base text-primary"},"Etapa Procesal:",-1),Ue={class:"text-gray-500"},Ee={class:"hidden md:block relative mt-16"},Re={class:"relative"},Te=G('<div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div><div class="border-2 border-gray-500"></div><div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div>',3),ze={class:"mt-14"},Me={class:"flex flex-col gap-3 justify-between font-medium md:flex-row"},Ne=e("h3",{class:"text-base text-primary"},"Expendiente:",-1),Ve={class:"max-w-lg lg:max-w-xs"},Fe=e("label",{for:"search",class:"sr-only"},"Buscar",-1),Ze={class:"relative"},Oe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Ie={class:"flow-root overflow-y-auto max-h-[400px] whitespace-nowrap"},He={class:"-my-2 sm:-mx-6 lg:-mx-8"},qe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Ge={class:"min-w-full divide-y divide-gray-300"},Je=e("thead",null,[e("tr",{class:"text-left text-base font-regular text-primary"},[e("th",{scope:"col",class:"py-3.5 pr-3 w-2/5"},"Documento"),e("th",{scope:"col",class:"px-3 py-3.5 w-2/5"},"Fecha"),e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"AcciÃ³n")])],-1),Ke={class:"divide-y divide-gray-200"},Qe={class:"w-2/5 py-4 pr-3 text-sm font-medium text-stone-700 sm:pl-0 break-words"},We={class:"whitespace-nowrap w-2/5 px-3 py-4 text-sm text-stone-700"},Xe={class:"whitespace-nowrap w-1/5 px-3 py-4 text-sm text-primary flex space-x-2"},Ye=["onClick"],et=["onClick"],tt={class:"w-full flex justify-between mt-4"},st={class:"flex items-center justify-between"},ot={class:"sm:flex sm:flex-1 sm:items-center sm:justify-between"},at={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},it=["disabled"],nt=e("span",{class:"sr-only"},"Anterior",-1),rt=["onClick"],lt=["disabled"],ct=e("span",{class:"sr-only"},"Siguiente",-1),dt={key:0},ut=e("span",{class:"lg:block"},"Editar",-1),_t=[ut],xt={__name:"ProcessDetail",setup(x){const p=N(),$=V(),y=X(),w=F(),b=_(()=>w.currentUser),k=p.params.process_id,o=_(()=>y.processById(k));Z(async()=>{await y.init(),await w.init()});const u=f(""),n=f(1),v=f(10);O(u,()=>{n.value=1});function j(){return b.value.id==o.value.lawyer.id}function L(){$.push({name:"process_form",params:{action:"edit",process_id:k}})}const C=_(()=>u.value?o.value.case_files.filter(t=>P(t.file).toLowerCase().includes(u.value.toLowerCase())):o.value.case_files),D=_(()=>{const t=(n.value-1)*v.value,a=t+v.value;return C.value.slice(t,a)}),m=_(()=>Math.ceil(C.value.length/v.value));function S(){n.value>1&&n.value--}function U(){n.value<m.value&&n.value++}function E(t){n.value=t}function P(t){return t.split("/").pop()}function R(t){window.open(t,"_blank")}const T=async t=>{try{const a=await fetch(t);if(!a.ok)throw new Error(`Failed to fetch the file: ${a.statusText}`);const s=await a.blob(),r=document.createElement("a");r.href=window.URL.createObjectURL(s);const M=t.split("/").pop();r.download=M,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href)}catch(a){console.error("An error occurred while downloading the file:",a)}},z=t=>{const a=new Date(t),s={timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return a.toLocaleString("en-CA",s)};return(t,a)=>(l(),c(g,null,[e("div",ae,[I(t.$slots,"default")]),e("div",ie,[o.value?(l(),c("div",ne,[e("div",re,[e("div",le,[e("div",ce,[de,e("div",ue,[e("h1",_e,i(o.value.case.type),1),e("h2",he,i(o.value.subcase),1)])])])]),e("div",pe,[e("div",ve,[e("div",me,[fe,e("p",ge,i(o.value.client.last_name)+" "+i(o.value.client.first_name),1)]),e("div",xe,[ye,e("p",we,i(o.value.authority),1)]),e("div",be,[ke,e("p",Ce,i(o.value.plaintiff),1)]),e("div",Pe,[Be,e("p",Ae,i(o.value.defendant),1)]),e("div",$e,[je,e("p",Le,i(o.value.ref),1)]),e("div",De,[Se,e("p",Ue,i(o.value.stages[o.value.stages.length-1].status),1)])]),e("div",Ee,[e("div",Re,[Te,d(K,{length:o.value.stages.length,displayParam:"history"},null,8,["length"])]),e("div",null,[d(Q,{stages:o.value.stages},null,8,["stages"])])])]),e("div",ze,[e("div",Me,[Ne,e("div",Ve,[Fe,e("div",Ze,[e("div",Oe,[d(h(Y),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),H(e("input",{id:"search",name:"search","onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),class:"block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"Buscar",type:"search"},null,512),[[q,u.value]])])])]),e("div",Ie,[e("div",He,[e("div",qe,[e("table",Ge,[Je,e("tbody",Ke,[(l(!0),c(g,null,B(D.value,s=>(l(),c("tr",{key:s.id},[e("td",Qe,i(P(s.file)),1),e("td",We,i(z(s.created_at)),1),e("td",Xe,[e("button",{onClick:r=>T(s.file)},[d(h(se),{class:"h-5 w-5","aria-hidden":"true"})],8,Ye),e("button",{onClick:r=>R(s.file)},[d(h(ee),{class:"h-5 w-5","aria-hidden":"true"})],8,et)])]))),128))])])])])])]),e("div",tt,[e("div",st,[e("div",ot,[e("div",null,[e("nav",at,[e("button",{onClick:S,disabled:n.value===1,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[nt,d(h(oe),{class:"h-5 w-5","aria-hidden":"true"})],8,it),(l(!0),c(g,null,B(m.value,s=>(l(),c("span",{key:s,onClick:r=>E(s),class:J(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus:outline-offset-0",{"bg-secondary text-white":n.value===s},{"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer":n.value!==s}])},i(s),11,rt))),128)),e("button",{onClick:U,disabled:n.value===m.value,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[ct,d(h(te),{class:"h-5 w-5","aria-hidden":"true"})],8,lt)])])])]),b.value.role!=="client"&&j()?(l(),c("div",dt,[e("button",{onClick:L,type:"button",class:"p-2.5 text-sm text-white font-medium bg-secondary rounded-md flex gap-2"},_t)])):A("",!0)])])):A("",!0)])],64))}};export{xt as default};
