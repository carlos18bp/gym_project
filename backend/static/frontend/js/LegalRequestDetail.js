import{e as o,f as i,g as e,c as p,k as L,a8 as Y,n as F,t as d,r as k,m as N,w as ie,v as de,a as X,p as z,l as D,h as f,j as A,F as U,J as V,B as P,H as ce,u as K,I as ue,b as me,o as ge,aj as pe,ac as he}from"./index.js";import{u as O,_ as G,a as ve,b as xe}from"./DeleteConfirmModal.js";import{r as fe}from"./ExclamationTriangleIcon.js";import{r as J}from"./DocumentIcon.js";import{r as ye}from"./ArrowLeftIcon.js";function _e(a,g){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}function be(a,g){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Q(a,g){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v.756a49.106 49.106 0 0 1 9.152 1 .75.75 0 0 1-.152 1.485h-1.918l2.474 10.124a.75.75 0 0 1-.375.84A6.723 6.723 0 0 1 18.75 18a6.723 6.723 0 0 1-3.181-.795.75.75 0 0 1-.375-.84l2.474-10.124H12.75v13.28c1.293.076 2.534.343 3.697.776a.75.75 0 0 1-.262 1.453h-8.37a.75.75 0 0 1-.262-1.453c1.162-.433 2.404-.7 3.697-.775V6.24H6.332l2.474 10.124a.75.75 0 0 1-.375.84A6.723 6.723 0 0 1 5.25 18a6.723 6.723 0 0 1-3.181-.795.75.75 0 0 1-.375-.84L4.168 6.241H2.25a.75.75 0 0 1-.152-1.485 49.105 49.105 0 0 1 9.152-1V3a.75.75 0 0 1 .75-.75Zm4.878 13.543 1.872-7.662 1.872 7.662h-3.744Zm-9.756 0L5.25 8.131l-1.872 7.662h3.744Z","clip-rule":"evenodd"})])}function W(a,g){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z","clip-rule":"evenodd"})])}const we={class:"flex-1 min-w-0"},$e={class:"flex items-center space-x-2 mb-1"},ke={class:"text-sm font-medium text-gray-900"},Re={class:"text-xs text-gray-500"},Ce={class:"text-sm whitespace-pre-wrap"},qe={__name:"ResponseMessage",props:{response:{type:Object,required:!0},isCurrentUser:{type:Boolean,default:!1}},setup(a){const g=a,h=p(()=>g.response.user_type==="lawyer"),v=p(()=>g.isCurrentUser?"flex-row-reverse":""),y=p(()=>h.value?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"),r=p(()=>h.value?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),u=p(()=>g.isCurrentUser?h.value?"bg-indigo-600 text-white":"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),t=p(()=>h.value?Q:W),S=w=>{const m=new Date(w),_=new Date,R=new Date(m.getFullYear(),m.getMonth(),m.getDate()),n=new Date(_.getFullYear(),_.getMonth(),_.getDate()),l=Math.floor((n-R)/(1e3*60*60*24));return l===0?m.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):l===1?"Ayer "+m.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):l<7?m.toLocaleDateString("es-ES",{weekday:"short",hour:"2-digit",minute:"2-digit"}):m.toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(w,m)=>(o(),i("div",{class:F([v.value,"flex space-x-3 response-message"])},[e("div",{class:F([y.value,"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center"])},[(o(),L(Y(t.value),{class:"w-4 h-4"}))],2),e("div",we,[e("div",$e,[e("span",ke,d(a.response.user_name),1),e("span",{class:F([r.value,"px-2 py-0.5 text-xs font-medium rounded-full"])},d(a.response.user_type==="lawyer"?"Abogado":"Cliente"),3),e("span",Re,d(S(a.response.created_at)),1)]),e("div",{class:F([u.value,"p-3 rounded-lg"])},[e("p",Ce,d(a.response.response_text),1)],2)])],2))}},Se={class:"response-form"},De={class:"flex items-start space-x-3"},Ae={class:"flex-1"},Ee=["placeholder","disabled"],je={class:"flex items-center justify-between"},Me={class:"text-xs text-gray-500"},Fe={class:"flex items-center space-x-2"},Le={class:"text-xs text-gray-500"},Ie=["disabled"],Te={__name:"ResponseForm",props:{requestId:{type:[String,Number],required:!0},userRole:{type:String,default:"client"}},emits:["response-added"],setup(a,{emit:g}){const h=a,v=g,y=O(),r=k(""),u=k(!1),t=p(()=>h.userRole==="lawyer"),S=p(()=>t.value?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"),w=p(()=>t.value?Q:W),m=p(()=>t.value?"Escribe tu respuesta profesional al cliente...":"Escribe tu respuesta o pregunta adicional..."),_=p(()=>r.value.trim().length>0&&r.value.length<=1e3&&!u.value),R=async()=>{if(_.value){u.value=!0;try{const n=await y.createResponse(h.requestId,r.value.trim());r.value="",v("response-added",n)}catch(n){console.error("Error creating response:",n)}finally{u.value=!1}}};return(n,l)=>(o(),i("div",Se,[e("div",De,[e("div",{class:F([S.value,"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center"])},[(o(),L(Y(w.value),{class:"w-4 h-4"}))],2),e("div",Ae,[e("form",{onSubmit:N(R,["prevent"]),class:"space-y-3"},[e("div",null,[ie(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=$=>r.value=$),placeholder:m.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none",disabled:u.value},null,8,Ee),[[de,r.value]])]),e("div",je,[e("div",Me,d(a.userRole==="lawyer"?"Respondiendo como abogado":"Respondiendo como cliente"),1),e("div",Fe,[e("span",Le,d(r.value.length)+"/1000 ",1),e("button",{type:"submit",disabled:!_.value,class:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},d(u.value?"Enviando...":"Responder"),9,Ie)])])],32)])])]))}},Ne={class:"bg-white rounded-lg shadow p-6 response-thread"},Ue={class:"text-lg font-semibold text-gray-900 mb-6"},Be={key:0,class:"text-sm font-normal text-gray-500"},ze={key:0,class:"text-center py-8"},Ve=e("h3",{class:"mt-4 text-sm font-medium text-gray-900"},"No hay respuestas aún",-1),Oe={class:"mt-2 text-sm text-gray-600"},He={key:1,class:"space-y-4 mb-6"},Ze={class:"border-t border-gray-200 pt-6"},Pe={__name:"ResponseThread",props:{requestId:{type:[String,Number],required:!0},responses:{type:Array,default:()=>[]},userRole:{type:String,default:"client"}},emits:["response-added"],setup(a,{emit:g}){const h=X(),v=p(()=>{var r;return(r=h.user)==null?void 0:r.id}),y=r=>r.user===v.value;return(r,u)=>(o(),i("div",Ne,[e("h2",Ue,[z(" Conversación "),a.responses.length>0?(o(),i("span",Be," ("+d(a.responses.length)+" "+d(a.responses.length===1?"respuesta":"respuestas")+") ",1)):D("",!0)]),a.responses.length===0?(o(),i("div",ze,[f(A(_e),{class:"mx-auto h-12 w-12 text-gray-400"}),Ve,e("p",Oe,d(a.userRole==="lawyer"?"Sé el primero en responder a esta solicitud":"El abogado aún no ha respondido a tu solicitud"),1)])):(o(),i("div",He,[(o(!0),i(U,null,V(a.responses,t=>(o(),L(qe,{key:t.id,response:t,"is-current-user":y(t)},null,8,["response","is-current-user"]))),128))])),e("div",Ze,[f(Te,{"request-id":a.requestId,"user-role":a.userRole,onResponseAdded:u[0]||(u[0]=t=>r.$emit("response-added",t))},null,8,["request-id","user-role"])])]))}},Ge={class:"flex items-center justify-between mb-4"},Je=e("h3",{class:"text-lg font-medium text-gray-900"}," Agregar Archivos ",-1),Ye={class:"space-y-4"},Xe={class:"text-sm text-gray-600"},Ke={class:"mt-4"},Qe={for:"file-upload",class:"cursor-pointer"},We=e("span",{class:"mt-2 block text-sm font-medium text-gray-900"},[z(" Arrastra archivos aquí o "),e("span",{class:"text-indigo-600 hover:text-indigo-500"},"selecciona archivos")],-1),et=e("p",{class:"mt-1 text-xs text-gray-500"}," PDF, DOC, DOCX, JPG, PNG hasta 10MB cada uno ",-1),tt={key:0,class:"space-y-2"},st=e("h4",{class:"text-sm font-medium text-gray-900"},"Archivos seleccionados:",-1),ot={class:"max-h-32 overflow-y-auto space-y-1"},rt={class:"truncate flex-1"},at=["onClick"],nt={class:"flex justify-end space-x-3 mt-6"},lt=["disabled"],it=["disabled"],dt={__name:"AddFilesModal",props:{request:{type:Object,required:!0}},emits:["close","files-added"],setup(a,{emit:g}){const h=a,v=g,y=O(),r=k([]),u=k(!1),t=k(!1),S=n=>{const l=Array.from(n.target.files);m(l)},w=n=>{n.preventDefault(),t.value=!1;const l=Array.from(n.dataTransfer.files);m(l)},m=n=>{const l=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"];n.forEach(b=>{if(!l.includes(b.type)){alert(`El archivo "${b.name}" no es un tipo permitido.`);return}if(b.size>10485760){alert(`El archivo "${b.name}" es demasiado grande. Máximo 10MB.`);return}r.value.some(j=>j.name===b.name&&j.size===b.size)||r.value.push(b)})},_=n=>{r.value.splice(n,1)},R=async()=>{if(r.value.length!==0){u.value=!0;try{(await y.addFilesToRequest(h.request.id,r.value)).success&&(r.value=[],v("files-added"))}catch(n){console.error("Error uploading files:",n),alert("Error al subir archivos. Por favor, inténtalo de nuevo.")}finally{u.value=!1}}};return(n,l)=>(o(),i("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:l[5]||(l[5]=$=>n.$emit("close"))},[e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:l[4]||(l[4]=N(()=>{},["stop"]))},[e("div",Ge,[Je,e("button",{onClick:l[0]||(l[0]=$=>n.$emit("close")),class:"text-gray-400 hover:text-gray-500"},[f(A(P),{class:"h-6 w-6"})])]),e("div",Ye,[e("p",Xe," Selecciona archivos adicionales para agregar a tu solicitud "+d(a.request.request_number)+". ",1),e("div",{onDrop:w,onDragover:l[1]||(l[1]=N(()=>{},["prevent"])),onDragenter:l[2]||(l[2]=N(()=>{},["prevent"])),class:F(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",{"border-indigo-400 bg-indigo-50":t.value}])},[f(A(be),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",Ke,[e("label",Qe,[We,e("input",{id:"file-upload",name:"file-upload",type:"file",multiple:"",class:"sr-only",onChange:S,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"},null,32)]),et])],34),r.value.length>0?(o(),i("div",tt,[st,e("div",ot,[(o(!0),i(U,null,V(r.value,($,b)=>(o(),i("div",{key:b,class:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm"},[e("span",rt,d($.name),1),e("button",{onClick:j=>_(b),class:"ml-2 text-red-500 hover:text-red-700"},[f(A(P),{class:"h-4 w-4"})],8,at)]))),128))])])):D("",!0)]),e("div",nt,[e("button",{onClick:l[3]||(l[3]=$=>n.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:u.value}," Cancelar ",8,lt),e("button",{onClick:R,disabled:r.value.length===0||u.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},d(u.value?"Subiendo...":`Subir ${r.value.length} archivo${r.value.length!==1?"s":""}`),9,it)])])]))}},ct={class:"legal-request-detail max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ut={key:0,class:"flex justify-center py-12"},mt=e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1),gt=[mt],pt={key:1,class:"text-center py-12"},ht=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Error al cargar la solicitud",-1),vt={class:"mt-2 text-gray-600"},xt={key:2,class:"space-y-6"},ft={class:"bg-white rounded-lg shadow p-6"},yt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},_t={class:"flex items-center space-x-3 mb-2"},bt={class:"text-2xl font-bold text-gray-900"},wt={class:"text-gray-600"},$t={key:0,class:"flex space-x-3 mt-4 lg:mt-0"},kt={class:"bg-white rounded-lg shadow p-6"},Rt=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información de la Solicitud",-1),Ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qt=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Datos del Cliente",-1),St={class:"space-y-2"},Dt=e("span",{class:"text-sm font-medium text-gray-600"},"Nombre:",-1),At={class:"ml-2 text-sm text-gray-900"},Et=e("span",{class:"text-sm font-medium text-gray-600"},"Email:",-1),jt={class:"ml-2 text-sm text-gray-900"},Mt=e("span",{class:"text-sm font-medium text-gray-600"},"Fecha:",-1),Ft={class:"ml-2 text-sm text-gray-900"},Lt=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Detalles de la Solicitud",-1),It={class:"space-y-2"},Tt=e("span",{class:"text-sm font-medium text-gray-600"},"Tipo:",-1),Nt={class:"ml-2 text-sm text-gray-900"},Ut=e("span",{class:"text-sm font-medium text-gray-600"},"Disciplina:",-1),Bt={class:"ml-2 text-sm text-gray-900"},zt=e("span",{class:"text-sm font-medium text-gray-600"},"Estado:",-1),Vt={class:"ml-2"},Ot={class:"mt-6"},Ht=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Descripción",-1),Zt={class:"text-sm text-gray-900 whitespace-pre-wrap"},Pt={class:"bg-white rounded-lg shadow p-6"},Gt={class:"flex items-center justify-between mb-4"},Jt=e("h2",{class:"text-lg font-semibold text-gray-900"},"Archivos Adjuntos",-1),Yt={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Xt={class:"flex-1 min-w-0"},Kt={class:"text-sm font-medium text-gray-900 truncate"},Qt={class:"text-xs text-gray-500"},Wt=["onClick"],es={key:1,class:"text-center py-8 text-gray-500"},ts=e("p",{class:"mt-2"},"No hay archivos adjuntos",-1),ss={key:0,class:"text-sm mt-1"},os={__name:"LegalRequestDetail",props:{requestId:{type:[String,Number],default:null},userRole:{type:String,default:null}},setup(a){const g=ce(),h=K(),v=O(),y=X(),r=ue(),u=a,t=k(null),S=k(!1),w=k(null),m=k(!1),_=k(!1),R=k(!1),n=me({}),l=p(()=>u.userRole||n.role||"client"),$=p(()=>u.requestId||g.params.id),b=p(()=>{var s;return(n.role||((s=y.user)==null?void 0:s.role))==="lawyer"}),j=p(()=>{var M,I,q,T;const c=n.role||((M=y.user)==null?void 0:M.role),s=n.id||((I=y.user)==null?void 0:I.id),C=c==="client"||c==="basic",E=((q=t.value)==null?void 0:q.status)!=="CLOSED",x=((T=t.value)==null?void 0:T.user)===s;return C&&E&&x}),B=async()=>{if($.value){S.value=!0,w.value=null;try{const c=await v.fetchRequestDetail($.value);t.value=c}catch(c){w.value=c.message}finally{S.value=!1}}},H=c=>new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=c=>c.split("/").pop()||"Archivo",te=c=>{t.value=c,m.value=!1},se=async()=>{_.value=!1;try{await h.replace({name:"legal_requests_list"})}catch(c){console.error("Navigation error after delete:",c),window.location.href="/#/legal_requests"}},oe=()=>{const c=document.querySelectorAll(".response-message");if(c.length>0)c[c.length-1].scrollIntoView({behavior:"smooth",block:"nearest"});else{const s=document.querySelector(".response-thread");s&&s.scrollIntoView({behavior:"smooth",block:"end"})}},re=async c=>{v.currentRequest&&v.currentRequest.id===t.value.id&&(t.value.responses=v.currentRequest.responses),setTimeout(()=>{oe()},150)},ae=async()=>{await B(),R.value=!1},ne=async c=>{try{const s=await v.downloadFile($.value,c);if(!s.data)throw new Error("No data received from server");const C=s.headers["content-type"]||s.headers["Content-Type"]||"application/octet-stream",E=new Blob([s.data],{type:C});let x="archivo_descargado";const M=s.headers["content-disposition"]||s.headers["Content-Disposition"];if(M){const T=[/filename\*=UTF-8''([^;]+)/,/filename="([^"]+)"/,/filename=([^;]+)/];for(const le of T){const Z=M.match(le);if(Z){x=decodeURIComponent(Z[1].trim());break}}}if(E.size===0)throw new Error("Received empty file");const I=window.URL.createObjectURL(E),q=document.createElement("a");q.href=I,q.download=x,q.style.display="none",document.body.appendChild(q),q.click(),setTimeout(()=>{window.URL.revokeObjectURL(I),document.body.contains(q)&&document.body.removeChild(q)},100)}catch(s){console.error("Error downloading file:",s);let C="Error al descargar el archivo.";s.message.includes("No data received")?C="El archivo no se pudo descargar. Puede estar corrupto o no existir.":s.message.includes("empty file")&&(C="El archivo está vacío o corrupto."),alert(C+" Inténtalo de nuevo.")}};return ge(async()=>{try{await r.init(),Object.assign(n,r.userById(y.userAuth.id)),await B()}catch(c){console.error("❌ Error initializing LegalRequestDetail:",c)}}),(c,s)=>{var C,E;return o(),i("div",ct,[S.value?(o(),i("div",ut,gt)):w.value?(o(),i("div",pt,[f(A(fe),{class:"mx-auto h-16 w-16 text-red-400"}),ht,e("p",vt,d(w.value),1),e("button",{onClick:B,class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," Reintentar ")])):t.value?(o(),i("div",xt,[e("div",ft,[e("div",yt,[e("div",null,[e("div",_t,[e("h1",bt,d(t.value.request_number),1),f(G,{status:t.value.status},null,8,["status"])]),e("p",wt," Solicitud de "+d(t.value.first_name)+" "+d(t.value.last_name),1)]),b.value?(o(),i("div",$t,[e("button",{onClick:s[0]||(s[0]=x=>m.value=!0),class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," Cambiar Estado "),e("button",{onClick:s[1]||(s[1]=x=>_.value=!0),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Eliminar ")])):D("",!0)])]),e("div",kt,[Rt,e("div",Ct,[e("div",null,[qt,e("div",St,[e("div",null,[Dt,e("span",At,d(t.value.first_name)+" "+d(t.value.last_name),1)]),e("div",null,[Et,e("span",jt,d(t.value.email),1)]),e("div",null,[Mt,e("span",Ft,d(H(t.value.created_at)),1)])])]),e("div",null,[Lt,e("div",It,[e("div",null,[Tt,e("span",Nt,d((C=t.value.request_type)==null?void 0:C.name),1)]),e("div",null,[Ut,e("span",Bt,d((E=t.value.discipline)==null?void 0:E.name),1)]),e("div",null,[zt,e("span",Vt,[f(G,{status:t.value.status},null,8,["status"])])])])])]),e("div",Ot,[Ht,e("p",Zt,d(t.value.description),1)])]),e("div",Pt,[e("div",Gt,[Jt,j.value?(o(),i("button",{key:0,onClick:s[2]||(s[2]=x=>R.value=!0),class:"px-3 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," + Agregar archivos ")):D("",!0)]),t.value.files&&t.value.files.length>0?(o(),i("div",Yt,[(o(!0),i(U,null,V(t.value.files,x=>(o(),i("div",{key:x.id,class:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50"},[f(A(J),{class:"h-8 w-8 text-gray-400 mr-3"}),e("div",Xt,[e("p",Kt,d(ee(x.file)),1),e("p",Qt,d(H(x.created_at)),1)]),e("button",{onClick:M=>ne(x.id),class:"ml-3 text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50 transition-colors",title:"Descargar archivo"},[f(A(pe),{class:"h-5 w-5"})],8,Wt)]))),128))])):(o(),i("div",es,[f(A(J),{class:"mx-auto h-12 w-12 text-gray-300"}),ts,j.value?(o(),i("p",ss,' Haz clic en "Agregar archivos" para subir documentos ')):D("",!0)]))]),f(Pe,{"request-id":t.value.id,responses:t.value.responses||[],"user-role":l.value,onResponseAdded:re},null,8,["request-id","responses","user-role"])])):D("",!0),m.value?(o(),L(ve,{key:3,request:t.value,onClose:s[3]||(s[3]=x=>m.value=!1),onUpdated:te},null,8,["request"])):D("",!0),_.value?(o(),L(xe,{key:4,request:t.value,onClose:s[4]||(s[4]=x=>_.value=!1),onDeleted:se},null,8,["request"])):D("",!0),R.value?(o(),L(dt,{key:5,request:t.value,onClose:s[5]||(s[5]=x=>R.value=!1),onFilesAdded:ae},null,8,["request"])):D("",!0)])}}},rs={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},as=e("h1",{class:"text-lg font-semibold leading-6 text-gray-900"},"Detalle de Solicitud",-1),us={__name:"LegalRequestDetail",props:{userRole:{type:String,default:"client"}},setup(a){const g=K(),h=()=>{g.go(-1)};return(v,y)=>(o(),i(U,null,[e("div",rs,[he(v.$slots,"default"),e("button",{onClick:h,class:"lg:hidden inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[f(A(ye),{class:"h-4 w-4 mr-2"}),z(" Regresar ")]),as]),f(os,{"user-role":a.userRole},null,8,["user-role"])],64))}};export{us as default};
