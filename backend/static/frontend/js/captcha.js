import{B as m,r as w,o as v,e as _,f as k,C as x,D as b,E as T}from"./index.js";const C="/static/frontend/img/logo2.png",S="/static/frontend/img/signIn.jpg",E=m({__name:"vueRecaptcha",props:{sitekey:{type:String,required:!0},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"light"},hl:{type:String,required:!1},loadingTimeout:{type:Number,required:!1,default:0}},emits:{verify:e=>e!=null&&e!="",error:e=>e,expire:null,fail:null},setup(e,{expose:a,emit:n}){const t=e,u=w(null);let o=null;a({execute:function(){window.grecaptcha.execute(o)},reset:function(){window.grecaptcha.reset(o)}});function d(){o=window.grecaptcha.render(u.value,{sitekey:t.sitekey,theme:t.theme,size:t.size,callback:r=>n("verify",r),"expired-callback":()=>n("expire"),"error-callback":()=>n("fail")})}return v(()=>{window.grecaptcha==null?new Promise((r,p)=>{let c,s=!1;window.recaptchaReady=function(){s||(s=!0,clearTimeout(c),r())};const f="recaptcha-script",l=y=>()=>{var g;s||(s=!0,clearTimeout(c),(g=document.getElementById(f))==null||g.remove(),p(y))};t.loadingTimeout>0&&(c=setTimeout(l("timeout"),t.loadingTimeout));const h=window.document,i=h.createElement("script");i.id=f,i.onerror=l("error"),i.onabort=l("aborted"),i.setAttribute("src",`https://www.google.com/recaptcha/api.js?onload=recaptchaReady&render=explicit&hl=${t.hl}&_=${+new Date}`),h.head.appendChild(i)}).then(()=>{d()}).catch(r=>{n("error",r)}):d()}),(r,p)=>(_(),k("div",{ref_key:"recaptchaDiv",ref:u},null,512))}}),K=x("captcha",{state:()=>({siteKey:null,verified:!1}),actions:{async fetchSiteKey(){if(this.siteKey)return this.siteKey;try{const e=await b("google-captcha/site-key/");return this.siteKey=e.data.site_key,this.siteKey}catch(e){throw console.error("Error fetching site key:",e),e}},async verify(e){if(!e)return!1;try{const a=await T("google-captcha/verify/",{token:e});return this.verified=a.data.success===!0,this.verified}catch(a){return console.error("Error verifying reCAPTCHA:",a),this.verified=!1,!1}},reset(){this.verified=!1}}});export{C as _,S as a,E as b,K as u};
