import{H as He,u as Ne,I as Oe,L as We,c as C,r as w,o as Ze,W as ye,d as Je,e as g,f as v,g as e,ac as Qe,n as m,l as M,h as l,i,j as a,p as z,w as Ge,v as Ke,t as f,k as V,ae as Xe,F as H,J as K,af as I,ag as U,ah as b,ai as D,B as Ye,aj as et,m as le,ak as tt}from"./index.js";import{_ as st}from"./ProcessUsersModal.js";import{r as X}from"./ChevronDownIcon.js";import{r as he}from"./PlusIcon.js";import{r as ot}from"./MagnifyingGlassIcon.js";import{r as ne,a as rt}from"./FunnelIcon.js";import{r as ve}from"./EllipsisVerticalIcon.js";import{r as at}from"./ChevronRightIcon.js";import{r as lt}from"./CubeTransparentIcon.js";const nt={class:"min-h-screen bg-gray-50"},it={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},ct={class:"py-6 px-4 sm:px-6 lg:px-8"},dt={class:"border-b border-gray-200 mb-6"},ut={class:"flex items-center justify-between"},pt={class:"-mb-px hidden sm:flex space-x-8"},gt={class:"sm:hidden flex-1"},mt={class:"py-1"},ft={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 mb-6"},yt={class:"mb-4"},ht={class:"relative w-full"},vt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4"},xt={class:"flex items-center gap-2 min-w-0"},_t={class:"truncate"},bt={class:"py-1"},wt=["onClick"],kt={class:"flex items-center gap-2 min-w-0"},Ct={class:"truncate"},$t={class:"py-1"},At=["onClick"],Pt={class:"flex items-center gap-2 min-w-0"},Lt={class:"truncate"},Tt={class:"py-1"},St=["onClick"],jt={class:"flex items-center justify-stretch"},Bt=e("span",null,"Limpiar",-1),Mt={class:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between pt-4 border-t border-gray-200"},zt={class:"flex items-center gap-3"},Et={class:"text-sm text-gray-500"},It={class:"font-medium"},Ut=e("span",{class:"hidden sm:inline"},"Nuevo",-1),Dt=e("span",{class:"hidden sm:inline"},"Exportar",-1),Rt={class:"py-1"},Ft={class:"hidden sm:inline"},qt={class:"py-1"},Vt={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ht={class:"min-w-full divide-y divide-gray-200"},Nt={class:"bg-gray-50"},Ot={scope:"col",class:"w-12 px-6 py-3"},Wt=["checked"],Zt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre ",-1),Jt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," E-mail ",-1),Qt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo Proceso ",-1),Gt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dte./Accionante ",-1),Kt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ddo./Accionado ",-1),Xt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Etapa ",-1),Yt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avance ",-1),es=e("th",{scope:"col",class:"w-16 px-6 py-3"},null,-1),ts={class:"bg-white divide-y divide-gray-200"},ss=["onClick"],os=["checked","onChange"],rs={class:"px-6 py-4 whitespace-nowrap"},as={class:"flex items-center"},ls={class:"h-10 w-10 flex-shrink-0"},ns=["src","alt"],is={key:1,class:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm"},cs={class:"ml-4"},ds={class:"text-sm font-medium text-gray-900"},us=["onClick"],ps={class:"px-6 py-4 whitespace-nowrap"},gs={class:"text-sm text-gray-900"},ms={class:"px-6 py-4 whitespace-nowrap"},fs={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},hs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vs={class:"px-6 py-4 whitespace-nowrap"},xs={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},_s={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bs={class:"py-1"},ws={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},ks={class:"flex flex-1 justify-between sm:hidden"},Cs=["disabled"],$s=["disabled"],As={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},Ps={class:"text-sm text-gray-700"},Ls={class:"font-medium"},Ts={class:"font-medium"},Ss={class:"font-medium"},js={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},Bs=["disabled"],Ms=e("span",{class:"sr-only"},"Anterior",-1),zs=["onClick"],Es={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700"},Is=["disabled"],Us=e("span",{class:"sr-only"},"Siguiente",-1),Ds={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"},Rs=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No hay procesos disponibles",-1),Fs={class:"mt-2 text-sm text-gray-500"},Ks={__name:"ProcessList",setup(qs){const R=He(),te=Ne(),ie=Oe(),F=We(),k=C(()=>ie.getCurrentUser),_=w("my_processes"),N=w(""),L=w(null),T=w(null),S=w(null),O=w("recent"),P=w([]),h=w(1),W=w(10),xe=w({}),ce=w({}),de=w(!1),se=w(!1),oe=w(null);Ze(async()=>{try{await Promise.all([F.init(),ie.init()])}catch(t){console.error("Error initializing process list:",t)}R.params.display==="history"?_.value="archived_processes":R.query.group==="general"?_.value="all_processes":_.value="my_processes"}),ye(()=>({display:R.params.display,group:R.query.group}),t=>{t.display==="history"?_.value="archived_processes":t.group==="general"?_.value="all_processes":(t.group,_.value="my_processes")},{deep:!0});const _e=C(()=>{const t=new Set;return F.processes.forEach(s=>{var r;(r=s.case)!=null&&r.type&&t.add(s.case.type)}),Array.from(t).sort()}),be=C(()=>{const t=new Set;return F.processes.forEach(s=>{s.authority&&t.add(s.authority)}),Array.from(t).sort()}),we=C(()=>{const t=new Set;return F.processes.forEach(s=>{s.stages&&s.stages.length>0&&s.stages.forEach(r=>{r.status&&t.add(r.status)})}),Array.from(t).sort()}),q=t=>{var y;const s=((y=k.value)==null?void 0:y.id)||"",n=R.params.user_id||s;let u="/process_list";n&&(u+=`/${n}`),t==="archived_processes"&&(u+="/history");const d={...R.query};t==="all_processes"?d.group="general":t==="my_processes"?d.group="default":delete d.group,te.push({path:u,query:d})},ke=C(()=>{const t=oe.value;return!t||!Array.isArray(t.clients)?[]:t.clients}),$=t=>!t||!Array.isArray(t.clients)?null:t.clients.length?t.clients[0]:null,Ce=C(()=>{var n,u,d,y,o,c;let t=[];const s=((n=k.value)==null?void 0:n.role)==="client"||((u=k.value)==null?void 0:u.role)==="basic"||((d=k.value)==null?void 0:d.role)==="corporate_client",r=(y=k.value)==null?void 0:y.id;return _.value==="archived_processes"?(t=F.processesWithClosedStatus,s?t=t.filter(p=>Array.isArray(p.clients)&&p.clients.some(x=>x.id===r)):((o=k.value)==null?void 0:o.role)==="lawyer"&&(t=t.filter(p=>{var x;return((x=p.lawyer)==null?void 0:x.id)===r}))):(t=F.processesWithoutClosedStatus,_.value==="my_processes"&&(s?t=t.filter(p=>Array.isArray(p.clients)&&p.clients.some(x=>x.id===r)):((c=k.value)==null?void 0:c.role)==="lawyer"&&(t=t.filter(p=>{var x;return((x=p.lawyer)==null?void 0:x.id)===r})))),t}),A=C(()=>{let t=[...Ce.value];if(N.value){const s=N.value.toLowerCase();t=t.filter(r=>{var u,d,y,o,c,p,x,B,Z,J,Q;const n=$(r)||{};return((u=n.first_name)==null?void 0:u.toLowerCase().includes(s))||((d=n.last_name)==null?void 0:d.toLowerCase().includes(s))||((y=n.email)==null?void 0:y.toLowerCase().includes(s))||((c=(o=r.case)==null?void 0:o.type)==null?void 0:c.toLowerCase().includes(s))||((p=r.subcase)==null?void 0:p.toLowerCase().includes(s))||((x=r.ref)==null?void 0:x.toLowerCase().includes(s))||((B=r.plaintiff)==null?void 0:B.toLowerCase().includes(s))||((Z=r.defendant)==null?void 0:Z.toLowerCase().includes(s))||((J=r.authority)==null?void 0:J.toLowerCase().includes(s))||((Q=r.stages)==null?void 0:Q.some(Y=>{var G;return(G=Y.status)==null?void 0:G.toLowerCase().includes(s)}))})}return L.value&&(t=t.filter(s=>{var r;return((r=s.case)==null?void 0:r.type)===L.value})),T.value&&(t=t.filter(s=>s.authority===T.value)),S.value&&(t=t.filter(s=>{var n;const r=(n=s.stages)==null?void 0:n[s.stages.length-1];return(r==null?void 0:r.status)===S.value})),O.value==="name"?t.sort((s,r)=>{const n=$(s)||{},u=$(r)||{},d=`${n.first_name||""} ${n.last_name||""}`.toLowerCase(),y=`${u.first_name||""} ${u.last_name||""}`.toLowerCase();return d.localeCompare(y)}):O.value==="recent"&&t.sort((s,r)=>{const n=s.created_at?new Date(s.created_at).getTime():0;return(r.created_at?new Date(r.created_at).getTime():0)-n}),t}),ue=C(()=>{const t=(h.value-1)*W.value,s=t+W.value;return A.value.slice(t,s)}),j=C(()=>Math.ceil(A.value.length/W.value)),re=C(()=>{const t=(h.value-1)*W.value+1,s=Math.min(h.value*W.value,A.value.length);return{start:t,end:s,total:A.value.length}});ye([N,L,T,S,_],()=>{h.value=1});const $e=C(()=>{switch(O.value){case"name":return"Nombre (A-Z)";case"recent":default:return"Más recientes"}}),Ae=()=>{L.value=null,T.value=null,S.value=null},pe=C(()=>A.value.length>0&&P.value.length===A.value.length),Pe=()=>{pe.value?P.value=[]:P.value=A.value.map(t=>t.id)},Le=t=>{const s=P.value.indexOf(t);s>-1?P.value.splice(s,1):P.value.push(t)},Te=()=>{P.value=A.value.map(t=>t.id)},Se=()=>{P.value=[]},je=()=>{switch(_.value){case"my_processes":return"Mis Procesos";case"all_processes":return"Todos los Procesos";case"archived_processes":return"Procesos Archivados";default:return"Mis Procesos"}},Be=t=>{te.push({name:"process_detail",params:{process_id:t}})},Me=(t,s)=>{var u,d;const r=((u=t==null?void 0:t.charAt(0))==null?void 0:u.toUpperCase())||"",n=((d=s==null?void 0:s.charAt(0))==null?void 0:d.toUpperCase())||"";return`${r}${n}`||"?"},ze=t=>{oe.value=t,se.value=!0},Ee=()=>{se.value=!1,oe.value=null},Ie=()=>{te.push("/legal_request_create")},ge=()=>{h.value>1&&h.value--},me=()=>{h.value<j.value&&h.value++},Ue=t=>{t>=1&&t<=j.value&&(h.value=t)},De=C(()=>{const t=j.value,s=h.value,r=[];if(t<=7)for(let n=1;n<=t;n++)r.push(n);else if(s<=4){for(let n=1;n<=5;n++)r.push(n);r.push("..."),r.push(t)}else if(s>=t-3){r.push(1),r.push("...");for(let n=t-4;n<=t;n++)r.push(n)}else r.push(1),r.push("..."),r.push(s-1),r.push(s),r.push(s+1),r.push("..."),r.push(t);return r}),Re=(t,s)=>{t&&(xe.value[s]=t)},Fe=(t,s)=>{t&&(ce.value[s]=t)},qe=(t,s)=>{de.value=!s,s||setTimeout(()=>{const r=ce.value[t];if(r){const n=r.$el||r;if(n&&n.getBoundingClientRect){const u=n.getBoundingClientRect(),d=window.innerHeight;if(t===0){if(u.bottom>d-20){const y=u.bottom-d+40;window.scrollBy({top:y,behavior:"smooth"})}}else if(u.bottom>d-10){const y=u.bottom-d+30;window.scrollBy({top:y,behavior:"smooth"})}else if(u.top<80){const y=u.top-100;window.scrollBy({top:y,behavior:"smooth"})}}}},100)},Ve=()=>{const t=P.value.length>0?A.value.filter(o=>P.value.includes(o.id)):A.value,s=["Nombre","Email","Tipo Proceso","Dte./Accionante","Ddo./Accionado","Etapa"],r=t.map(o=>{var x,B;const c=$(o)||{},p=((x=o.stages)==null?void 0:x[o.stages.length-1])||null;return[`${c.first_name||""} ${c.last_name||""}`,c.email||"",((B=o.case)==null?void 0:B.type)||"",o.plaintiff||"-",o.defendant||"-",(p==null?void 0:p.status)||""]}),n=[s.join(","),...r.map(o=>o.map(c=>`"${c}"`).join(","))].join(`
`),u=new Blob([n],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),y=URL.createObjectURL(u);d.setAttribute("href",y),d.setAttribute("download",`procesos_${new Date().toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)};return(t,s)=>{var n,u,d,y;const r=Je("router-link");return g(),v("div",nt,[e("div",it,[Qe(t.$slots,"default")]),e("div",ct,[e("div",dt,[e("div",ut,[e("nav",pt,[e("button",{onClick:s[0]||(s[0]=o=>q("my_processes")),class:m([_.value==="my_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Mis Procesos ",2),((n=k.value)==null?void 0:n.role)==="lawyer"?(g(),v("button",{key:0,onClick:s[1]||(s[1]=o=>q("all_processes")),class:m([_.value==="all_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Todos los Procesos ",2)):M("",!0),e("button",{onClick:s[2]||(s[2]=o=>q("archived_processes")),class:m([_.value==="archived_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Procesos Archivados ",2)]),e("div",gt,[l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"w-full inline-flex items-center justify-between px-4 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:i(()=>[e("span",null,f(je()),1),l(a(X),{class:"h-5 w-5 ml-2"})]),_:1}),l(a(U),{class:"absolute left-0 z-10 mt-2 w-full origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:i(()=>{var o;return[e("div",mt,[l(a(b),null,{default:i(({active:c})=>[e("button",{onClick:s[3]||(s[3]=p=>q("my_processes")),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Mis Procesos ",2)]),_:1}),((o=k.value)==null?void 0:o.role)==="lawyer"?(g(),V(a(b),{key:0},{default:i(({active:c})=>[e("button",{onClick:s[4]||(s[4]=p=>q("all_processes")),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Todos los Procesos ",2)]),_:1})):M("",!0),l(a(b),null,{default:i(({active:c})=>[e("button",{onClick:s[5]||(s[5]=p=>q("archived_processes")),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Procesos Archivados ",2)]),_:1})])]}),_:1})]),_:1})]),((u=k.value)==null?void 0:u.role)==="client"||((d=k.value)==null?void 0:d.role)==="corporate_client"?(g(),v("button",{key:0,onClick:Ie,class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-secondary bg-secondary text-sm font-medium text-white hover:bg-blue-700 transition-all duration-200 ml-3 sm:ml-4"},[l(a(he),{class:"h-5 w-5"}),z(" Solicitar Información ")])):M("",!0)])]),e("div",ft,[e("div",yt,[e("div",ht,[l(a(ot),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Ge(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>N.value=o),type:"text",placeholder:"Buscar procesos...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent text-sm"},null,512),[[Ke,N.value]])])]),e("div",vt,[l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:i(()=>[e("div",xt,[l(a(ne),{class:"h-4 w-4 flex-shrink-0"}),e("span",_t,f(L.value||"Tipo"),1)]),l(a(X),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(U),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:i(()=>[e("div",bt,[l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:s[7]||(s[7]=c=>L.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(g(!0),v(H,null,K(_e.value,o=>(g(),V(a(b),{key:o},{default:i(({active:c})=>[e("a",{onClick:p=>L.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,wt)]),_:2},1024))),128))])]),_:1})]),_:1}),l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:i(()=>[e("div",kt,[l(a(ne),{class:"h-4 w-4 flex-shrink-0"}),e("span",Ct,f(T.value||"Autoridad"),1)]),l(a(X),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(U),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-60 overflow-y-auto"},{default:i(()=>[e("div",$t,[l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:s[8]||(s[8]=c=>T.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(g(!0),v(H,null,K(be.value,o=>(g(),V(a(b),{key:o},{default:i(({active:c})=>[e("a",{onClick:p=>T.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,At)]),_:2},1024))),128))])]),_:1})]),_:1}),l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:i(()=>[e("div",Pt,[l(a(ne),{class:"h-4 w-4 flex-shrink-0"}),e("span",Lt,f(S.value||"Etapa"),1)]),l(a(X),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(U),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-60 overflow-y-auto"},{default:i(()=>[e("div",Tt,[l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:s[9]||(s[9]=c=>S.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(g(!0),v(H,null,K(we.value,o=>(g(),V(a(b),{key:o},{default:i(({active:c})=>[e("a",{onClick:p=>S.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,St)]),_:2},1024))),128))])]),_:1})]),_:1}),e("div",jt,[L.value||T.value||S.value?(g(),v("button",{key:0,onClick:Ae,class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",title:"Limpiar filtros"},[l(a(Ye),{class:"h-4 w-4 flex-shrink-0"}),Bt])):M("",!0)])]),e("div",Mt,[e("div",zt,[e("div",Et,[e("span",It,f(A.value.length),1),z(" resultados ")]),((y=k.value)==null?void 0:y.role)==="lawyer"?(g(),V(r,{key:0,to:{name:"process_form",params:{action:"create"}},class:"inline-flex items-center gap-2 px-3 py-2 bg-secondary text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium whitespace-nowrap"},{default:i(()=>[l(a(he),{class:"h-4 w-4"}),Ut]),_:1})):M("",!0),e("button",{onClick:Ve,class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},[l(a(et),{class:"h-4 w-4"}),Dt]),l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"inline-flex items-center justify-center w-10 h-10 rounded-md hover:bg-gray-100"},{default:i(()=>[l(a(ve),{class:"h-5 w-5 text-gray-500"})]),_:1}),l(a(U),{class:"absolute left-0 z-10 mt-2 w-48 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:i(()=>[e("div",Rt,[l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:Te,class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Seleccionar todo ",2)]),_:1}),l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:Se,class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Deseleccionar todo ",2)]),_:1})])]),_:1})]),_:1})]),l(a(D),{as:"div",class:"relative"},{default:i(()=>[l(a(I),{class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:i(()=>[l(a(rt),{class:"h-4 w-4"}),e("span",Ft,f($e.value),1),l(a(X),{class:"h-4 w-4"})]),_:1}),l(a(U),{class:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:i(()=>[e("div",qt,[l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:s[10]||(s[10]=c=>O.value="recent"),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Más recientes ",2)]),_:1}),l(a(b),null,{default:i(({active:o})=>[e("a",{onClick:s[11]||(s[11]=c=>O.value="name"),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Nombre (A-Z) ",2)]),_:1})])]),_:1})]),_:1})])]),A.value.length?(g(),v("div",Vt,[e("div",{class:"overflow-x-auto",style:Xe({minHeight:de.value?"200px":"auto"})},[e("table",Ht,[e("thead",Nt,[e("tr",null,[e("th",Ot,[e("input",{type:"checkbox",checked:pe.value,onChange:Pe,class:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"},null,40,Wt)]),Zt,Jt,Qt,Gt,Kt,Xt,Yt,es])]),e("tbody",ts,[(g(!0),v(H,null,K(ue.value,(o,c)=>{var p,x,B,Z,J,Q,Y,G,fe;return g(),v("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:ee=>Be(o.id)},[e("td",{class:"px-6 py-4 whitespace-nowrap",onClick:s[12]||(s[12]=le(()=>{},["stop"]))},[e("input",{type:"checkbox",checked:P.value.includes(o.id),onChange:ee=>Le(o.id),class:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"},null,40,os)]),e("td",rs,[e("div",as,[e("div",ls,[(p=$(o))!=null&&p.photo_profile?(g(),v("img",{key:0,class:"h-10 w-10 rounded-full object-cover",src:(x=$(o))==null?void 0:x.photo_profile,alt:(B=$(o))==null?void 0:B.first_name},null,8,ns)):(g(),v("div",is,f(Me((Z=$(o))==null?void 0:Z.first_name,(J=$(o))==null?void 0:J.last_name)),1))]),e("div",cs,[e("div",ds,f((Q=$(o))==null?void 0:Q.first_name)+" "+f((Y=$(o))==null?void 0:Y.last_name),1),o.clients&&o.clients.length?(g(),v("button",{key:0,type:"button",class:"mt-1 text-xs text-blue-600 hover:text-blue-800 hover:underline",onClick:le(ee=>ze(o),["stop"])}," Ver usuarios ",8,us)):M("",!0)])])]),e("td",ps,[e("div",gs,f((G=$(o))==null?void 0:G.email),1)]),e("td",ms,[e("span",fs,f(o.case.type),1)]),e("td",ys,f(o.plaintiff||"-"),1),e("td",hs,f(o.defendant||"-"),1),e("td",vs,[e("span",xs,f(((fe=o.stages[o.stages.length-1])==null?void 0:fe.status)||"Sin estado"),1)]),e("td",_s,f(typeof o.progress=="number"?o.progress+"%":"-"),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:s[13]||(s[13]=le(()=>{},["stop"]))},[l(a(D),{as:"div",class:"relative inline-block text-left"},{default:i(({open:ee})=>[l(a(I),{ref_for:!0,ref:E=>Re(E,c),onClick:E=>qe(c,ee),class:"inline-flex items-center justify-center w-8 h-8 rounded-md hover:bg-gray-100"},{default:i(()=>[l(a(ve),{class:"h-5 w-5 text-gray-500"})]),_:2},1032,["onClick"]),l(a(U),{ref_for:!0,ref:E=>Fe(E,c),class:m([c>0&&c>=ue.value.length-3?"absolute right-0 z-50 bottom-full mb-2 w-48 origin-bottom-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none":"absolute right-0 z-50 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"])},{default:i(()=>{var E;return[e("div",bs,[l(a(b),null,{default:i(({active:ae})=>[l(r,{to:{name:"process_detail",params:{process_id:o.id}},class:m([ae?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},{default:i(()=>[z(" Ver detalles ")]),_:2},1032,["to","class"])]),_:2},1024),((E=k.value)==null?void 0:E.role)==="lawyer"?(g(),V(a(b),{key:0},{default:i(({active:ae})=>[l(r,{to:{name:"process_form",params:{action:"edit",process_id:o.id}},class:m([ae?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},{default:i(()=>[z(" Editar ")]),_:2},1032,["to","class"])]),_:2},1024)):M("",!0)])]}),_:2},1032,["class"])]),_:2},1024)])],8,ss)}),128))])])],4),j.value>1?(g(),v("div",ws,[e("div",ks,[e("button",{onClick:ge,disabled:h.value===1,class:m(["relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",h.value===1?"opacity-50 cursor-not-allowed":""])}," Anterior ",10,Cs),e("button",{onClick:me,disabled:h.value===j.value,class:m(["relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",h.value===j.value?"opacity-50 cursor-not-allowed":""])}," Siguiente ",10,$s)]),e("div",As,[e("div",null,[e("p",Ps,[z(" Mostrando "),e("span",Ls,f(re.value.start),1),z(" a "),e("span",Ts,f(re.value.end),1),z(" de "),e("span",Ss,f(re.value.total),1),z(" resultados ")])]),e("div",null,[e("nav",js,[e("button",{onClick:ge,disabled:h.value===1,class:m(["relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",h.value===1?"opacity-50 cursor-not-allowed":""])},[Ms,l(a(tt),{class:"h-5 w-5","aria-hidden":"true"})],10,Bs),(g(!0),v(H,null,K(De.value,o=>(g(),v(H,{key:o},[o!=="..."?(g(),v("button",{key:0,onClick:c=>Ue(o),class:m(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus:outline-offset-0",h.value===o?"z-10 bg-secondary text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-secondary":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"])},f(o),11,zs)):(g(),v("span",Es," ... "))],64))),128)),e("button",{onClick:me,disabled:h.value===j.value,class:m(["relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",h.value===j.value?"opacity-50 cursor-not-allowed":""])},[Us,l(a(at),{class:"h-5 w-5","aria-hidden":"true"})],10,Is)])])])])):M("",!0)])):(g(),v("div",Ds,[l(a(lt),{class:"mx-auto h-24 w-24 text-gray-400"}),Rs,e("p",Fs,f(_.value==="archived_processes"?"No hay procesos archivados para mostrar.":"Contacta a tu abogado para gestionar tus procesos."),1)])),l(st,{"is-open":se.value,users:ke.value,onClose:Ee},null,8,["is-open","users"])])])}}};export{Ks as default};
