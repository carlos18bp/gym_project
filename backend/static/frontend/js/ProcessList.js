import{H as qe,u as He,I as Ne,L as Oe,c as k,r as w,o as We,W as re,d as Ze,e as p,f as v,g as e,ac as Je,n as m,l as M,h as l,i as n,j as a,p as z,w as Qe,v as Ke,t as f,k as V,ae as Xe,F,J as Q,af as U,ag as D,ah as b,ai as R,B as Ye,aj as Ge,m as ae,ak as et}from"./index.js";import{_ as tt}from"./ProcessUsersModal.js";import{r as K}from"./ChevronDownIcon.js";import{r as ye}from"./PlusIcon.js";import{r as st}from"./MagnifyingGlassIcon.js";import{r as le,a as ot}from"./FunnelIcon.js";import{r as he}from"./EllipsisVerticalIcon.js";import{r as rt}from"./ChevronRightIcon.js";import{r as at}from"./CubeTransparentIcon.js";const lt={class:"min-h-screen bg-gray-50"},nt={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},it={class:"py-6 px-4 sm:px-6 lg:px-8"},ct={class:"border-b border-gray-200 mb-6"},dt={class:"flex items-center justify-between"},ut={class:"-mb-px hidden sm:flex space-x-8"},pt={class:"sm:hidden flex-1"},gt={class:"py-1"},mt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 mb-6"},ft={class:"mb-4"},yt={class:"relative w-full"},ht={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4"},vt={class:"flex items-center gap-2 min-w-0"},xt={class:"truncate"},_t={class:"py-1"},bt=["onClick"],wt={class:"flex items-center gap-2 min-w-0"},kt={class:"truncate"},Ct={class:"py-1"},$t=["onClick"],At={class:"flex items-center gap-2 min-w-0"},Pt={class:"truncate"},Lt={class:"py-1"},St=["onClick"],Tt={class:"flex items-center justify-stretch"},jt=e("span",null,"Limpiar",-1),Bt={class:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between pt-4 border-t border-gray-200"},Mt={class:"flex items-center gap-3"},zt={class:"text-sm text-gray-500"},Et={class:"font-medium"},Ut=e("span",{class:"hidden sm:inline"},"Nuevo",-1),Dt=e("span",{class:"hidden sm:inline"},"Exportar",-1),Rt={class:"py-1"},It={class:"hidden sm:inline"},Vt={class:"py-1"},Ft={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200"},qt={class:"min-w-full divide-y divide-gray-200"},Ht={class:"bg-gray-50"},Nt={scope:"col",class:"w-12 px-6 py-3"},Ot=["checked"],Wt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre ",-1),Zt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," E-mail ",-1),Jt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo Proceso ",-1),Qt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dte./Accionante ",-1),Kt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ddo./Accionado ",-1),Xt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Etapa ",-1),Yt=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avance ",-1),Gt=e("th",{scope:"col",class:"w-16 px-6 py-3"},null,-1),es={class:"bg-white divide-y divide-gray-200"},ts=["onClick"],ss=["checked","onChange"],os={class:"px-6 py-4 whitespace-nowrap"},rs={class:"flex items-center"},as={class:"h-10 w-10 flex-shrink-0"},ls=["src","alt"],ns={key:1,class:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm"},is={class:"ml-4"},cs={class:"text-sm font-medium text-gray-900"},ds=["onClick"],us={class:"px-6 py-4 whitespace-nowrap"},ps={class:"text-sm text-gray-900"},gs={class:"px-6 py-4 whitespace-nowrap"},ms={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},fs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},hs={class:"px-6 py-4 whitespace-nowrap"},vs={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},xs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_s={class:"py-1"},bs={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},ws={class:"flex flex-1 justify-between sm:hidden"},ks=["disabled"],Cs=["disabled"],$s={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},As={class:"text-sm text-gray-700"},Ps={class:"font-medium"},Ls={class:"font-medium"},Ss={class:"font-medium"},Ts={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},js=["disabled"],Bs=e("span",{class:"sr-only"},"Anterior",-1),Ms=["onClick"],zs={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700"},Es=["disabled"],Us=e("span",{class:"sr-only"},"Siguiente",-1),Ds={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"},Rs=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No hay procesos disponibles",-1),Is={class:"mt-2 text-sm text-gray-500"},Ks={__name:"ProcessList",setup(Vs){const X=qe(),ne=He(),ie=Ne(),I=Oe(),C=k(()=>ie.getCurrentUser),y=w("my_processes"),q=w(""),L=w(null),S=w(null),T=w(null),H=w("recent"),P=w([]),h=w(1),N=w(10),ve=w({}),ce=w({}),de=w(!1),ee=w(!1),te=w(null);We(async()=>{try{await Promise.all([I.init(),ie.init()])}catch(t){console.error("Error initializing process list:",t)}X.params.display==="history"?y.value="archived_processes":X.query.group==="general"?y.value="all_processes":y.value="my_processes"}),re(()=>X.params.display,t=>{t==="history"&&(y.value="archived_processes")}),re(()=>X.query.group,t=>{t==="general"?y.value="all_processes":t==="default"&&(y.value="my_processes")});const xe=k(()=>{const t=new Set;return I.processes.forEach(s=>{var r;(r=s.case)!=null&&r.type&&t.add(s.case.type)}),Array.from(t).sort()}),_e=k(()=>{const t=new Set;return I.processes.forEach(s=>{s.authority&&t.add(s.authority)}),Array.from(t).sort()}),be=k(()=>{const t=new Set;return I.processes.forEach(s=>{s.stages&&s.stages.length>0&&s.stages.forEach(r=>{r.status&&t.add(r.status)})}),Array.from(t).sort()}),we=k(()=>{const t=te.value;return!t||!Array.isArray(t.clients)?[]:t.clients}),$=t=>!t||!Array.isArray(t.clients)?null:t.clients.length?t.clients[0]:null,ke=k(()=>{var i,g,d,x,o,c;let t=[];const s=((i=C.value)==null?void 0:i.role)==="client"||((g=C.value)==null?void 0:g.role)==="basic"||((d=C.value)==null?void 0:d.role)==="corporate_client",r=(x=C.value)==null?void 0:x.id;return y.value==="archived_processes"?(t=I.processesWithClosedStatus,s?t=t.filter(u=>Array.isArray(u.clients)&&u.clients.some(_=>_.id===r)):((o=C.value)==null?void 0:o.role)==="lawyer"&&(t=t.filter(u=>{var _;return((_=u.lawyer)==null?void 0:_.id)===r}))):(t=I.processesWithoutClosedStatus,y.value==="my_processes"&&(s?t=t.filter(u=>Array.isArray(u.clients)&&u.clients.some(_=>_.id===r)):((c=C.value)==null?void 0:c.role)==="lawyer"&&(t=t.filter(u=>{var _;return((_=u.lawyer)==null?void 0:_.id)===r})))),t}),A=k(()=>{let t=[...ke.value];if(q.value){const s=q.value.toLowerCase();t=t.filter(r=>{var g,d,x,o,c,u,_,B,O,W,Z;const i=$(r)||{};return((g=i.first_name)==null?void 0:g.toLowerCase().includes(s))||((d=i.last_name)==null?void 0:d.toLowerCase().includes(s))||((x=i.email)==null?void 0:x.toLowerCase().includes(s))||((c=(o=r.case)==null?void 0:o.type)==null?void 0:c.toLowerCase().includes(s))||((u=r.subcase)==null?void 0:u.toLowerCase().includes(s))||((_=r.ref)==null?void 0:_.toLowerCase().includes(s))||((B=r.plaintiff)==null?void 0:B.toLowerCase().includes(s))||((O=r.defendant)==null?void 0:O.toLowerCase().includes(s))||((W=r.authority)==null?void 0:W.toLowerCase().includes(s))||((Z=r.stages)==null?void 0:Z.some(Y=>{var J;return(J=Y.status)==null?void 0:J.toLowerCase().includes(s)}))})}return L.value&&(t=t.filter(s=>{var r;return((r=s.case)==null?void 0:r.type)===L.value})),S.value&&(t=t.filter(s=>s.authority===S.value)),T.value&&(t=t.filter(s=>{var i;const r=(i=s.stages)==null?void 0:i[s.stages.length-1];return(r==null?void 0:r.status)===T.value})),H.value==="name"?t.sort((s,r)=>{const i=$(s)||{},g=$(r)||{},d=`${i.first_name||""} ${i.last_name||""}`.toLowerCase(),x=`${g.first_name||""} ${g.last_name||""}`.toLowerCase();return d.localeCompare(x)}):H.value==="recent"&&t.sort((s,r)=>{const i=s.created_at?new Date(s.created_at).getTime():0;return(r.created_at?new Date(r.created_at).getTime():0)-i}),t}),ue=k(()=>{const t=(h.value-1)*N.value,s=t+N.value;return A.value.slice(t,s)}),j=k(()=>Math.ceil(A.value.length/N.value)),se=k(()=>{const t=(h.value-1)*N.value+1,s=Math.min(h.value*N.value,A.value.length);return{start:t,end:s,total:A.value.length}});re([q,L,S,T,y],()=>{h.value=1});const Ce=k(()=>{switch(H.value){case"name":return"Nombre (A-Z)";case"recent":default:return"Más recientes"}}),$e=()=>{L.value=null,S.value=null,T.value=null},pe=k(()=>A.value.length>0&&P.value.length===A.value.length),Ae=()=>{pe.value?P.value=[]:P.value=A.value.map(t=>t.id)},Pe=t=>{const s=P.value.indexOf(t);s>-1?P.value.splice(s,1):P.value.push(t)},Le=()=>{P.value=A.value.map(t=>t.id)},Se=()=>{P.value=[]},Te=()=>{switch(y.value){case"my_processes":return"Mis Procesos";case"all_processes":return"Todos los Procesos";case"archived_processes":return"Procesos Archivados";default:return"Mis Procesos"}},je=t=>{ne.push({name:"process_detail",params:{process_id:t}})},Be=(t,s)=>{var g,d;const r=((g=t==null?void 0:t.charAt(0))==null?void 0:g.toUpperCase())||"",i=((d=s==null?void 0:s.charAt(0))==null?void 0:d.toUpperCase())||"";return`${r}${i}`||"?"},Me=t=>{te.value=t,ee.value=!0},ze=()=>{ee.value=!1,te.value=null},Ee=()=>{ne.push("/legal_request_create")},ge=()=>{h.value>1&&h.value--},me=()=>{h.value<j.value&&h.value++},Ue=t=>{t>=1&&t<=j.value&&(h.value=t)},De=k(()=>{const t=j.value,s=h.value,r=[];if(t<=7)for(let i=1;i<=t;i++)r.push(i);else if(s<=4){for(let i=1;i<=5;i++)r.push(i);r.push("..."),r.push(t)}else if(s>=t-3){r.push(1),r.push("...");for(let i=t-4;i<=t;i++)r.push(i)}else r.push(1),r.push("..."),r.push(s-1),r.push(s),r.push(s+1),r.push("..."),r.push(t);return r}),Re=(t,s)=>{t&&(ve.value[s]=t)},Ie=(t,s)=>{t&&(ce.value[s]=t)},Ve=(t,s)=>{de.value=!s,s||setTimeout(()=>{const r=ce.value[t];if(r){const i=r.$el||r;if(i&&i.getBoundingClientRect){const g=i.getBoundingClientRect(),d=window.innerHeight;if(t===0){if(g.bottom>d-20){const x=g.bottom-d+40;window.scrollBy({top:x,behavior:"smooth"})}}else if(g.bottom>d-10){const x=g.bottom-d+30;window.scrollBy({top:x,behavior:"smooth"})}else if(g.top<80){const x=g.top-100;window.scrollBy({top:x,behavior:"smooth"})}}}},100)},Fe=()=>{const t=P.value.length>0?A.value.filter(o=>P.value.includes(o.id)):A.value,s=["Nombre","Email","Tipo Proceso","Dte./Accionante","Ddo./Accionado","Etapa"],r=t.map(o=>{var _,B;const c=$(o)||{},u=((_=o.stages)==null?void 0:_[o.stages.length-1])||null;return[`${c.first_name||""} ${c.last_name||""}`,c.email||"",((B=o.case)==null?void 0:B.type)||"",o.plaintiff||"-",o.defendant||"-",(u==null?void 0:u.status)||""]}),i=[s.join(","),...r.map(o=>o.map(c=>`"${c}"`).join(","))].join(`
`),g=new Blob([i],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),x=URL.createObjectURL(g);d.setAttribute("href",x),d.setAttribute("download",`procesos_${new Date().toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)};return(t,s)=>{var i,g,d,x;const r=Ze("router-link");return p(),v("div",lt,[e("div",nt,[Je(t.$slots,"default")]),e("div",it,[e("div",ct,[e("div",dt,[e("nav",ut,[e("button",{onClick:s[0]||(s[0]=o=>y.value="my_processes"),class:m([y.value==="my_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Mis Procesos ",2),((i=C.value)==null?void 0:i.role)==="lawyer"?(p(),v("button",{key:0,onClick:s[1]||(s[1]=o=>y.value="all_processes"),class:m([y.value==="all_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Todos los Procesos ",2)):M("",!0),e("button",{onClick:s[2]||(s[2]=o=>y.value="archived_processes"),class:m([y.value==="archived_processes"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Procesos Archivados ",2)]),e("div",pt,[l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"w-full inline-flex items-center justify-between px-4 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:n(()=>[e("span",null,f(Te()),1),l(a(K),{class:"h-5 w-5 ml-2"})]),_:1}),l(a(D),{class:"absolute left-0 z-10 mt-2 w-full origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:n(()=>{var o;return[e("div",gt,[l(a(b),null,{default:n(({active:c})=>[e("button",{onClick:s[3]||(s[3]=u=>y.value="my_processes"),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Mis Procesos ",2)]),_:1}),((o=C.value)==null?void 0:o.role)==="lawyer"?(p(),V(a(b),{key:0},{default:n(({active:c})=>[e("button",{onClick:s[4]||(s[4]=u=>y.value="all_processes"),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Todos los Procesos ",2)]),_:1})):M("",!0),l(a(b),null,{default:n(({active:c})=>[e("button",{onClick:s[5]||(s[5]=u=>y.value="archived_processes"),class:m([c?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"])}," Procesos Archivados ",2)]),_:1})])]}),_:1})]),_:1})]),((g=C.value)==null?void 0:g.role)==="client"||((d=C.value)==null?void 0:d.role)==="corporate_client"?(p(),v("button",{key:0,onClick:Ee,class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-secondary bg-secondary text-sm font-medium text-white hover:bg-blue-700 transition-all duration-200 ml-3 sm:ml-4"},[l(a(ye),{class:"h-5 w-5"}),z(" Solicitar Información ")])):M("",!0)])]),e("div",mt,[e("div",ft,[e("div",yt,[l(a(st),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Qe(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>q.value=o),type:"text",placeholder:"Buscar procesos...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent text-sm"},null,512),[[Ke,q.value]])])]),e("div",ht,[l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:n(()=>[e("div",vt,[l(a(le),{class:"h-4 w-4 flex-shrink-0"}),e("span",xt,f(L.value||"Tipo"),1)]),l(a(K),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(D),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:n(()=>[e("div",_t,[l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:s[7]||(s[7]=c=>L.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(p(!0),v(F,null,Q(xe.value,o=>(p(),V(a(b),{key:o},{default:n(({active:c})=>[e("a",{onClick:u=>L.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,bt)]),_:2},1024))),128))])]),_:1})]),_:1}),l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:n(()=>[e("div",wt,[l(a(le),{class:"h-4 w-4 flex-shrink-0"}),e("span",kt,f(S.value||"Autoridad"),1)]),l(a(K),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(D),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-60 overflow-y-auto"},{default:n(()=>[e("div",Ct,[l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:s[8]||(s[8]=c=>S.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(p(!0),v(F,null,Q(_e.value,o=>(p(),V(a(b),{key:o},{default:n(({active:c})=>[e("a",{onClick:u=>S.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,$t)]),_:2},1024))),128))])]),_:1})]),_:1}),l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:n(()=>[e("div",At,[l(a(le),{class:"h-4 w-4 flex-shrink-0"}),e("span",Pt,f(T.value||"Etapa"),1)]),l(a(K),{class:"h-4 w-4 flex-shrink-0"})]),_:1}),l(a(D),{class:"absolute left-0 z-10 mt-2 w-56 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-60 overflow-y-auto"},{default:n(()=>[e("div",Lt,[l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:s[9]||(s[9]=c=>T.value=null),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Todos ",2)]),_:1}),(p(!0),v(F,null,Q(be.value,o=>(p(),V(a(b),{key:o},{default:n(({active:c})=>[e("a",{onClick:u=>T.value=o,class:m([c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])},f(o),11,St)]),_:2},1024))),128))])]),_:1})]),_:1}),e("div",Tt,[L.value||S.value||T.value?(p(),v("button",{key:0,onClick:$e,class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",title:"Limpiar filtros"},[l(a(Ye),{class:"h-4 w-4 flex-shrink-0"}),jt])):M("",!0)])]),e("div",Bt,[e("div",Mt,[e("div",zt,[e("span",Et,f(A.value.length),1),z(" resultados ")]),((x=C.value)==null?void 0:x.role)==="lawyer"?(p(),V(r,{key:0,to:{name:"process_form",params:{action:"create"}},class:"inline-flex items-center gap-2 px-3 py-2 bg-secondary text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium whitespace-nowrap"},{default:n(()=>[l(a(ye),{class:"h-4 w-4"}),Ut]),_:1})):M("",!0),e("button",{onClick:Fe,class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},[l(a(Ge),{class:"h-4 w-4"}),Dt]),l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"inline-flex items-center justify-center w-10 h-10 rounded-md hover:bg-gray-100"},{default:n(()=>[l(a(he),{class:"h-5 w-5 text-gray-500"})]),_:1}),l(a(D),{class:"absolute left-0 z-10 mt-2 w-48 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:n(()=>[e("div",Rt,[l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:Le,class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Seleccionar todo ",2)]),_:1}),l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:Se,class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Deseleccionar todo ",2)]),_:1})])]),_:1})]),_:1})]),l(a(R),{as:"div",class:"relative"},{default:n(()=>[l(a(U),{class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:n(()=>[l(a(ot),{class:"h-4 w-4"}),e("span",It,f(Ce.value),1),l(a(K),{class:"h-4 w-4"})]),_:1}),l(a(D),{class:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:n(()=>[e("div",Vt,[l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:s[10]||(s[10]=c=>H.value="recent"),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Más recientes ",2)]),_:1}),l(a(b),null,{default:n(({active:o})=>[e("a",{onClick:s[11]||(s[11]=c=>H.value="name"),class:m([o?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"])}," Nombre (A-Z) ",2)]),_:1})])]),_:1})]),_:1})])]),A.value.length?(p(),v("div",Ft,[e("div",{class:"overflow-x-auto",style:Xe({minHeight:de.value?"200px":"auto"})},[e("table",qt,[e("thead",Ht,[e("tr",null,[e("th",Nt,[e("input",{type:"checkbox",checked:pe.value,onChange:Ae,class:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"},null,40,Ot)]),Wt,Zt,Jt,Qt,Kt,Xt,Yt,Gt])]),e("tbody",es,[(p(!0),v(F,null,Q(ue.value,(o,c)=>{var u,_,B,O,W,Z,Y,J,fe;return p(),v("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:G=>je(o.id)},[e("td",{class:"px-6 py-4 whitespace-nowrap",onClick:s[12]||(s[12]=ae(()=>{},["stop"]))},[e("input",{type:"checkbox",checked:P.value.includes(o.id),onChange:G=>Pe(o.id),class:"h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded"},null,40,ss)]),e("td",os,[e("div",rs,[e("div",as,[(u=$(o))!=null&&u.photo_profile?(p(),v("img",{key:0,class:"h-10 w-10 rounded-full object-cover",src:(_=$(o))==null?void 0:_.photo_profile,alt:(B=$(o))==null?void 0:B.first_name},null,8,ls)):(p(),v("div",ns,f(Be((O=$(o))==null?void 0:O.first_name,(W=$(o))==null?void 0:W.last_name)),1))]),e("div",is,[e("div",cs,f((Z=$(o))==null?void 0:Z.first_name)+" "+f((Y=$(o))==null?void 0:Y.last_name),1),o.clients&&o.clients.length?(p(),v("button",{key:0,type:"button",class:"mt-1 text-xs text-blue-600 hover:text-blue-800 hover:underline",onClick:ae(G=>Me(o),["stop"])}," Ver usuarios ",8,ds)):M("",!0)])])]),e("td",us,[e("div",ps,f((J=$(o))==null?void 0:J.email),1)]),e("td",gs,[e("span",ms,f(o.case.type),1)]),e("td",fs,f(o.plaintiff||"-"),1),e("td",ys,f(o.defendant||"-"),1),e("td",hs,[e("span",vs,f(((fe=o.stages[o.stages.length-1])==null?void 0:fe.status)||"Sin estado"),1)]),e("td",xs,f(typeof o.progress=="number"?o.progress+"%":"-"),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:s[13]||(s[13]=ae(()=>{},["stop"]))},[l(a(R),{as:"div",class:"relative inline-block text-left"},{default:n(({open:G})=>[l(a(U),{ref_for:!0,ref:E=>Re(E,c),onClick:E=>Ve(c,G),class:"inline-flex items-center justify-center w-8 h-8 rounded-md hover:bg-gray-100"},{default:n(()=>[l(a(he),{class:"h-5 w-5 text-gray-500"})]),_:2},1032,["onClick"]),l(a(D),{ref_for:!0,ref:E=>Ie(E,c),class:m([c>0&&c>=ue.value.length-3?"absolute right-0 z-50 bottom-full mb-2 w-48 origin-bottom-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none":"absolute right-0 z-50 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"])},{default:n(()=>{var E;return[e("div",_s,[l(a(b),null,{default:n(({active:oe})=>[l(r,{to:{name:"process_detail",params:{process_id:o.id}},class:m([oe?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},{default:n(()=>[z(" Ver detalles ")]),_:2},1032,["to","class"])]),_:2},1024),((E=C.value)==null?void 0:E.role)==="lawyer"?(p(),V(a(b),{key:0},{default:n(({active:oe})=>[l(r,{to:{name:"process_form",params:{action:"edit",process_id:o.id}},class:m([oe?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},{default:n(()=>[z(" Editar ")]),_:2},1032,["to","class"])]),_:2},1024)):M("",!0)])]}),_:2},1032,["class"])]),_:2},1024)])],8,ts)}),128))])])],4),j.value>1?(p(),v("div",bs,[e("div",ws,[e("button",{onClick:ge,disabled:h.value===1,class:m(["relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",h.value===1?"opacity-50 cursor-not-allowed":""])}," Anterior ",10,ks),e("button",{onClick:me,disabled:h.value===j.value,class:m(["relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",h.value===j.value?"opacity-50 cursor-not-allowed":""])}," Siguiente ",10,Cs)]),e("div",$s,[e("div",null,[e("p",As,[z(" Mostrando "),e("span",Ps,f(se.value.start),1),z(" a "),e("span",Ls,f(se.value.end),1),z(" de "),e("span",Ss,f(se.value.total),1),z(" resultados ")])]),e("div",null,[e("nav",Ts,[e("button",{onClick:ge,disabled:h.value===1,class:m(["relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",h.value===1?"opacity-50 cursor-not-allowed":""])},[Bs,l(a(et),{class:"h-5 w-5","aria-hidden":"true"})],10,js),(p(!0),v(F,null,Q(De.value,o=>(p(),v(F,{key:o},[o!=="..."?(p(),v("button",{key:0,onClick:c=>Ue(o),class:m(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus:outline-offset-0",h.value===o?"z-10 bg-secondary text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-secondary":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"])},f(o),11,Ms)):(p(),v("span",zs," ... "))],64))),128)),e("button",{onClick:me,disabled:h.value===j.value,class:m(["relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",h.value===j.value?"opacity-50 cursor-not-allowed":""])},[Us,l(a(rt),{class:"h-5 w-5","aria-hidden":"true"})],10,Es)])])])])):M("",!0)])):(p(),v("div",Ds,[l(a(at),{class:"mx-auto h-24 w-24 text-gray-400"}),Rs,e("p",Is,f(y.value==="archived_processes"?"No hay procesos archivados para mostrar.":"Contacta a tu abogado para gestionar tus procesos."),1)])),l(tt,{"is-open":ee.value,users:we.value,onClose:ze},null,8,["is-open","users"])])])}}};export{Ks as default};
