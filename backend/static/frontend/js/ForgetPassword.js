import{u as q,r as n,o as N,d as y,e as g,f as _,g as e,h,w as m,v as f,n as j,t as k,i as P,j as v,k as x,m as p,F as E,_ as U,s,p as R}from"./index.js";import{_ as B,a as D}from"./signIn2.js";const F=e("div",{class:"relative xl:absolute"},[e("div",{class:"flex justify-start p-4"},[e("img",{class:"w-40 hidden xl:block",src:B}),e("img",{class:"w-20 block xl:hidden",src:U})])],-1),M={class:"flex mt-6 justify-center xl:mt-0 xl:h-screen xl:items-center"},T=e("h1",{class:"font-bold text-center text-2xl xl:text-3xl 2xl:text-4xl"}," No te preocupes, vamos ayudarte ",-1),L={class:"grid"},z=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900"}," Correo electronico ",-1),A=e("label",{for:"passcode",class:"block mb-2 text-sm font-medium text-gray-900"}," Código de verificación ",-1),$=["disabled"],G={key:0,class:"text-start text-sm mt-2 text-gray-600"},H=e("span",{class:"font-regular"},"Enviar nuevo código en ",-1),J={class:"font-bold"},K=e("span",{class:"font-regular"}," segundos.",-1),O=e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900"}," Contraseña ",-1),Q=e("label",{for:"confirm_password",class:"block mb-2 text-sm font-medium text-gray-900"}," Confirmar contraseña ",-1),W={class:"grid"},X=e("button",{type:"submit",class:"w-full text-white bg-secondary hover:bg-blue-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Iniciar sesión ",-1),Y={class:"w-full font-medium rounded-lg text-sm py-2.5 text-start"},Z=e("span",null,"¿Recordaste tu contraseña? ",-1),ee=e("span",{class:"text-secondary"},"Iniciar sesión",-1),se={key:0,class:"text-center mt-2 text-gray-600"},te={class:"font-bold"},oe={class:"w-full py-12 flex justify-around items-center text-center text-secondary font font-regular text-sm"},re=e("div",{class:"h-screen hidden overflow-hidden order-1 xl:w-1/2 2xl:w-1/3 xl:block"},[e("img",{src:D,alt:"illustration",class:"w-full h-full object-cover"})],-1),ie={__name:"ForgetPassword",setup(ae){const S=q(),d=n(""),c=n(""),l=n(""),u=n(""),t=n(0),i=n(!1);N(()=>{parseInt(localStorage.getItem("forgetPasswordSecondsRemaining"),10)&&b()});const I=async()=>{if(!d.value){s("Email is required!","warning");return}try{await R.post("/api/send_passcode/",{email:d.value,subject_email:"Password Reset Code"}),s("Password reset code sent to your email","info"),b()}catch(a){console.error("Error when password reset is requested:",a),s("User not found","warning")}},b=()=>{parseInt(localStorage.getItem("forgetPasswordSecondsRemaining"),10)||localStorage.setItem("forgetPasswordSecondsRemaining",180),i.value=!0,t.value=parseInt(localStorage.getItem("forgetPasswordSecondsRemaining"),10);const a=setInterval(()=>{t.value--,localStorage.setItem("forgetPasswordSecondsRemaining",t.value),t.value<=0&&(clearInterval(a),i.value=!1,localStorage.removeItem("forgetPasswordSecondsRemaining"))},1e3)},C=async()=>{if(!c.value){s("Passcode is required!","warning");return}if(!l.value){s("New Password is required!","warning");return}if(!u.value){s("Confirm Password is required!","warning");return}if(l.value!==u.value){s("Passwords do not match!","warning");return}try{await R.post("/api/verify_passcode_and_reset_password/",{passcode:c.value,new_password:l.value}),s("Password reset successful!","success"),S.push({name:"sign_in"})}catch(a){s(a.response.data.error,"error")}};return(a,o)=>{const V=y("RouterLink"),w=y("router-link");return g(),_(E,null,[F,e("section",M,[e("form",{class:"space-y-5 px-8 w-full md:px-32 2xl:px-72 xl:w-1/2 2xl:w-2/3 order-2",onSubmit:h(C,["prevent"])},[T,e("div",L,[e("div",null,[z,m(e("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>d.value=r),type:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[f,d.value]])])]),e("div",null,[A,m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>c.value=r),type:"number",id:"passcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[f,c.value]]),e("button",{class:j({"text-sm font-medium text-secondary cursor-pointer":!i.value,hidden:i.value}),onClick:h(I,["prevent"]),disabled:i.value}," Enviar código ",10,$),t.value>0?(g(),_("div",G,[H,e("span",J,k(t.value),1),K])):P("",!0)]),e("div",null,[O,m(e("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>l.value=r),type:"password",id:"password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[f,l.value]])]),e("div",null,[Q,m(e("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>u.value=r),type:"password",id:"confirm_password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[f,u.value]])]),e("div",W,[X,e("p",Y,[Z,v(V,{to:{name:"sign_in"}},{default:x(()=>[ee]),_:1})])]),t.value>0?(g(),_("div",se,[p(" Por favor espere "),e("span",te,k(t.value),1),p(" antes de enviar un nuevo código. ")])):P("",!0),e("div",oe,[v(w,{to:{name:"terms_of_use"},class:"cursor-pointer"},{default:x(()=>[p("Condiciones de uso")]),_:1}),v(w,{to:{name:"privacy_policy"},class:"cursor-pointer"},{default:x(()=>[p("Aviso de privacidad")]),_:1})])],32),re])],64)}}};export{ie as default};
