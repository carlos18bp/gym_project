import{e as i,f as d,g as e,H as re,al as v,C as be,D as _e,ab as ve,r as k,c as A,I as we,a as ke,b as Ce,o as Se,T as R,a9 as Ie,w as g,v as y,h as c,i as x,j as l,F as C,N as P,n as p,l as S,p as b,y as B,a4 as X,k as U,t as w,s as Z}from"./index.js";import{a as K,i as W,n as Y,r as Q,b as ee,u as te,l as se}from"./combobox.js";import{r as $}from"./TrashIcon.js";import{r as Ee}from"./EyeIcon.js";function ae(_,u){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}async function oe(_,u,f){const m=re();v.fire({title:"Procesando...",text:"Por favor espere, estamos procesando la solicitud.",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{v.showLoading()}});const I=await(f?m.updateProcess(_):m.createProcess(_));if(v.close(),I==201||f&&I==200)v.fire({icon:"success",title:"Exitoso",text:u,confirmButtonText:"OK!"}).then(T=>{if(T.isConfirmed)return!0});else return v.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"<a>Try again or later.</a>"}),!1}const Ve=be("case_type",{state:()=>({caseTypes:[],dataLoaded:!1}),getters:{caseTypeById:_=>u=>_.caseTypes.find(f=>f.id==u)},actions:{async init(){this.dataLoaded||await this.fetchCaseTypesData()},async fetchCaseTypesData(){try{let u=(await _e("case_types/")).data;if(u&&typeof u=="string")try{u=JSON.parse(u)}catch(f){console.error("JSON parse error:",f.message),u=[]}this.caseTypes=u??[],this.dataLoaded=!0}catch(_){console.error("Error fetching caseTypes data:",_.message),this.caseTypes=[],this.dataLoaded=!1}}}}),Ae={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8 lg:hidden"},Pe={class:"pb-10 px-4 sm:px-6 lg:px-8 lg:pt-10"},Te={class:"w-full p-5 rounded-lg border-2 border-stroke bg-terciary"},Be=e("div",null,[e("h1",{class:"text-primary text-xl font-semibold"}," Información del proceso ")],-1),Ue={class:"mt-4 space-y-3"},Fe={class:"grid md:grid-cols-2 xl:grid-cols-4 gap-3"},$e=e("label",{for:"plaintiff",class:"block text-base font-medium leading-6 text-primary"},[b(" Dte./Accionante "),e("span",{class:"text-red-500"},"*")],-1),De={class:"mt-2"},qe=e("label",{for:"defendant",class:"block text-base font-medium leading-6 text-primary"},[b(" Ddo./Accionado "),e("span",{class:"text-red-500"},"*")],-1),Le={class:"mt-2"},je=e("span",{class:"text-red-500"},"*",-1),Oe={class:"relative mt-2"},Me=e("label",{for:"defendant",class:"block text-base font-medium leading-6 text-primary"},[b(" Subclase "),e("span",{class:"text-red-500"},"*")],-1),Ne={class:"mt-2"},Je={class:"grid md:grid-cols-4 gap-3"},ze=e("label",{for:"plaintiff",class:"block text-base font-medium leading-6 text-primary"},[b(" Radicado "),e("span",{class:"text-red-500"},"*")],-1),Ge={class:"mt-2"},He=e("label",{for:"authority",class:"block text-base font-medium leading-6 text-primary"},[b(" Autoridad "),e("span",{class:"text-red-500"},"*")],-1),Re={class:"mt-2"},Xe=e("label",{for:"authorityEmail",class:"block text-base font-medium leading-6 text-primary"}," Email de Autoridad ",-1),Ze={class:"mt-2"},Ke=e("span",{class:"text-red-500"},"*",-1),We={class:"relative mt-2"},Ye={class:"flex items-center"},Qe=["src"],et={key:1,class:"h-6 w-6 flex-shrink-0 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-xs"},tt={class:"ml-3 flex-1 min-w-0"},st=e("label",{for:"progress",class:"block text-base font-medium leading-6 text-primary"}," Avance (%) ",-1),at={class:"mt-2"},ot={class:"qflow-root"},rt={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},it={class:"block md:hidden space-y-3"},nt={class:"space-y-3"},lt=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," Etapa Procesal ",-1),dt=["onUpdate:modelValue"],ct={class:"flex items-end gap-2"},ut={class:"flex-1"},mt=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),b(" Fecha ")],-1),pt=["onUpdate:modelValue"],ft=["onClick","disabled"],gt={class:"hidden md:block"},yt={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},ht={class:"min-w-full divide-y divide-gray-300"},xt={class:"text-left text-base font-regular text-primary"},bt={scope:"col",class:"py-3.5 pr-3 w-3/5"},_t={class:"flex items-center gap-3"},vt=e("span",null,[b("Etapa Procesal"),e("span",{class:"text-red-500 ml-1"},"*")],-1),wt=e("span",{class:"ml-1"},"Nuevo",-1),kt=e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"Fecha",-1),Ct=e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"Acción",-1),St={class:"divide-y divide-gray-200"},It={class:"w-3/5 py-4 pr-3 text-sm font-medium text-primary sm:pl-0 break-words"},Et=["onUpdate:modelValue"],Vt={class:"whitespace-nowrap w-1/5 px-3 py-4 text-sm text-primary"},At=["onUpdate:modelValue"],Pt={class:"whitespace-nowrap w-1/5 px-3 py-4 text-sm text-primary flex gap-2"},Tt=["onClick","disabled"],Bt={class:"qflow-root"},Ut={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ft={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},$t={class:"min-w-full divide-y divide-gray-300"},Dt={class:"text-left text-base font-regular text-primary"},qt={scope:"col",class:"py-3.5 pr-3 w-3/5"},Lt={class:"flex items-center gap-3"},jt=e("span",null,"Documento",-1),Ot=e("span",{class:"ml-1"},"Nuevo",-1),Mt=e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"Acción",-1),Nt={class:"divide-y divide-gray-200"},Jt={class:"w-4/5 py-4 pr-3 text-sm font-medium text-primary sm:pl-0 break-words"},zt={key:0},Gt=["href"],Ht={key:1,class:"text-gray-500"},Rt={key:2,class:"text-gray-500"},Xt=["id","onChange"],Zt=["onClick"],Kt=["onClick"],Wt={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-6 border-t border-gray-200"},Yt=["disabled"],Qt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),es=e("span",null,"Guardar Proceso",-1),ts=[Qt,es],ss=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1),as=e("span",null,"Archivar Proceso",-1),os=[ss,as],rs=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),is=e("span",null,"Cancelar",-1),ns=[rs,is],ls=50*1024*1024,ps={__name:"ProcessForm",setup(_){const u=ve(),f=k(""),m=k(""),I=re(),T=Ve(),D=A(()=>T.caseTypes),q=we(),L=A(()=>q.allClientTypes),j=ke(),s=Ce({plaintiff:"",defendant:"",caseTypeId:"",subcase:"",ref:"",authority:"",authorityEmail:"",clientId:"",lawyerId:"",progress:0,stages:[{status:"",date:""}],caseFiles:[{file:null}]}),F=k(!1);let O={};Se(async()=>{if(f.value=u.params.action,m.value=u.params.process_id,m.value){await I.init();const o=I.processById(m.value);o&&(ne(o),O=JSON.parse(JSON.stringify(s)))}try{await Promise.all([T.init(),q.init()])}catch(o){console.error("Error initializing process form auxiliary data:",o)}}),R(s,()=>{ie(s,O)?F.value=!1:F.value=!0},{deep:!0}),R(()=>u.params.action,o=>{o==="add"&&he()});function ie(o,a){return JSON.stringify(o)===JSON.stringify(a)}const M=A(()=>s.plaintiff.trim()&&s.defendant.trim()&&s.subcase.trim()&&s.ref.trim()&&s.authority.trim()&&s.stages.every(o=>o.status.trim()));function ne(o){s.processIdParam=o.id||"",s.plaintiff=o.plaintiff||"",s.defendant=o.defendant||"",E.value=o.case||"",s.subcase=o.subcase||"",s.ref=o.ref||"",s.authority=o.authority||"",s.authorityEmail=o.authority_email||"",V.value=o.client||"",s.lawyerId=o.lawyer.id||"",s.progress=typeof o.progress=="number"?o.progress:0,s.stages=o.stages.map(a=>({status:a.status||"",date:a.date||""})),s.caseFiles=o.case_files.map(a=>({file:a.file,id:a.id||""})),F.value=!1}const N=()=>{const o={Accionante:s.plaintiff,Accionado:s.defendant,"Tipo de Caso":s.caseTypeId,"Sub Caso":s.subcase,Radicado:s.ref,Autoridad:s.authority,Cliente:s.clientId,Abogado:s.lawyerId};for(const[a,t]of Object.entries(o))if(!t||String(t).trim()==="")return v.fire({title:"Campo requerido!",text:`El campo "${a}" es obligatorio.`,icon:"warning"}),!1;for(const[a,t]of s.stages.entries())if(!t.status||t.status.trim()==="")return v.fire({title:"Estado requerido!",text:`El estado de la etapa procesal en la fila ${a+1} es obligatorio o debe ser eliminado si no es necesario.`,icon:"warning"}),!1;for(const[a,t]of s.caseFiles.entries())if(!t.file)return v.fire({title:"¡Archivo requerido!",text:`El archivo en la fila ${a+1} es obligatorio o debe ser eliminado si no es necesario.`,icon:"warning"}),!1;return!0},le=async()=>{var o,a,t;s.caseTypeId=((o=E.value)==null?void 0:o.id)||"",s.clientId=((a=V.value)==null?void 0:a.id)||"",s.lawyerId=((t=j.userAuth)==null?void 0:t.id)||"",f.value==="edit"&&m.value&&(console.log("Submitting with process ID:",m.value),s.processIdParam=m.value),N()&&(await oe(s,"La información del proceso se ha guardado exitosamente!",!!m.value),f.value=="add"?B.push({name:"process_list",params:{user_id:"",display:""}}):B.back())},de=async()=>{var a,t,r;(await v.fire({title:"¿Archivar este proceso?",text:"Esta acción marcará el proceso como archivado. ¿Desea continuar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#BD93F9",cancelButtonColor:"#d33",confirmButtonText:"Sí, archivar proceso",cancelButtonText:"Cancelar"})).isConfirmed&&(s.stages.push({status:"Fallo"}),s.processIdParam=m.value,s.caseTypeId=((a=E.value)==null?void 0:a.id)||"",s.clientId=((t=V.value)==null?void 0:t.id)||"",s.lawyerId=((r=j.userAuth)==null?void 0:r.id)||"",s.isArchiving=!0,N()&&(await oe(s,"El proceso ha sido archivado exitosamente!",!0),B.back()))},h=k(""),E=k(null),J=A(()=>h.value===""?D.value:D.value.filter(o=>o.type.toLowerCase().includes(h.value.toLowerCase()))),V=k(null),z=A(()=>h.value===""?L.value:L.value.filter(o=>["first_name","last_name","identification","email"].some(a=>{var t;return(t=o[a])==null?void 0:t.toLowerCase().includes(h.value.toLowerCase())}))),ce=()=>{const o=new Date().toISOString().slice(0,10);s.stages.push({status:"",date:o})},G=o=>{s.stages.splice(o,1)},ue=["png","jpg","jpeg","pdf","docx"],me=(o,a)=>{const t=o.target.files[0];if(!t)return;if(t.size>ls){Z(`El archivo "${t.name}" excede el límite de 50 MB. Por favor, selecciona un archivo más pequeño.`,"warning");return}const r=t.name.split(".").pop().toLowerCase();if(!ue.includes(r)){Z("¡Ups! Ese tipo de archivo no es compatible. Asegúrate de que el archivo sea PDF, DOCX, JPG, PNG, JPEG.","warning");return}s.caseFiles[a].file=t},pe=()=>{s.caseFiles.push({file:null,id:""})};function fe(o){window.open(o,"_blank")}const ge=o=>{s.caseFiles.splice(o,1)},ye=(o,a)=>{var n,H;const t=((n=o==null?void 0:o.charAt(0))==null?void 0:n.toUpperCase())||"",r=((H=a==null?void 0:a.charAt(0))==null?void 0:H.toUpperCase())||"";return`${t}${r}`||"?"},he=()=>{s.plaintiff="",s.defendant="",s.caseTypeId="",s.subcase="",s.ref="",s.authority="",s.authorityEmail="",s.clientId="",s.lawyerId="";const o=new Date().toISOString().slice(0,10);s.stages=[{status:"",date:o}],s.caseFiles=[{file:null}]},xe=()=>{B.back()};return(o,a)=>(i(),d(C,null,[e("div",Ae,[Ie(o.$slots,"default")]),e("div",Pe,[e("div",Te,[Be,e("div",Ue,[e("div",Fe,[e("div",null,[$e,e("div",De,[g(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>s.plaintiff=t),type:"text",name:"plaintiff",id:"plaintiff",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[y,s.plaintiff]])])]),e("div",null,[qe,e("div",Le,[g(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>s.defendant=t),type:"text",name:"defendant",id:"defendant",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[y,s.defendant]])])]),e("div",null,[c(l(se),{as:"div",modelValue:E.value,"onUpdate:modelValue":[a[4]||(a[4]=t=>E.value=t),a[5]||(a[5]=t=>h.value="")]},{default:x(()=>[c(l(K),{class:"block text-base font-medium leading-6 text-primary"},{default:x(()=>[b(" Tipo Proceso "),je]),_:1}),e("div",Oe,[c(l(W),{class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-primary shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",onChange:a[2]||(a[2]=t=>h.value=t.target.value),onBlur:a[3]||(a[3]=t=>h.value=""),"display-value":t=>t==null?void 0:t.type},null,8,["display-value"]),c(l(Y),{class:"absolute inset-y-0 right-0 flex items-center gap-2 rounded-r-md px-2 focus:outline-none border-l border-gray-300"},{default:x(()=>[b(" Seleccionar "),c(l(X),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),J.value.length>0?(i(),U(l(te),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:x(()=>[(i(!0),d(C,null,P(J.value,t=>(i(),U(l(Q),{key:t.id,value:t,as:"template"},{default:x(({active:r,selected:n})=>[e("li",{class:p(["relative cursor-default select-none py-2 pl-3 pr-9",r?"bg-secondary text-white":"text-primary"])},[e("span",{class:p(["block truncate",n&&"font-semibold"])},w(t.type),3),n?(i(),d("span",{key:0,class:p(["absolute inset-y-0 right-0 flex items-center pr-4",r?"text-white":"text-secondary"])},[c(l(ee),{class:"h-5 w-5","aria-hidden":"true"})],2)):S("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):S("",!0)])]),_:1},8,["modelValue"])]),e("div",null,[Me,e("div",Ne,[g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>s.subcase=t),type:"text",name:"defendant",id:"defendant",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[y,s.subcase]])])])]),e("div",Je,[e("div",null,[ze,e("div",Ge,[g(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>s.ref=t),type:"text",name:"plaintiff",id:"plaintiff",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[y,s.ref]])])]),e("div",null,[He,e("div",Re,[g(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>s.authority=t),type:"text",name:"authority",id:"authority",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[y,s.authority]])])]),e("div",null,[Xe,e("div",Ze,[g(e("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>s.authorityEmail=t),type:"email",name:"authorityEmail",id:"authorityEmail",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"ejemplo@autoridad.gov.co"},null,512),[[y,s.authorityEmail]])])]),e("div",null,[c(l(se),{as:"div",modelValue:V.value,"onUpdate:modelValue":[a[12]||(a[12]=t=>V.value=t),a[13]||(a[13]=t=>h.value="")]},{default:x(()=>[c(l(K),{class:"block text-sm font-medium leading-6 text-primary"},{default:x(()=>[b(" Usuario "),Ke]),_:1}),e("div",We,[c(l(W),{class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-12 text-primary shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",onChange:a[10]||(a[10]=t=>h.value=t.target.value),onBlur:a[11]||(a[11]=t=>h.value=""),"display-value":t=>t!=null&&t.last_name&&(t!=null&&t.first_name)?`${t==null?void 0:t.last_name} ${t==null?void 0:t.first_name}`:""},null,8,["display-value"]),c(l(Y),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:x(()=>[c(l(X),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),z.value.length>0?(i(),U(l(te),{key:0,class:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:x(()=>[(i(!0),d(C,null,P(z.value,t=>(i(),U(l(Q),{key:t.id,value:t,as:"template"},{default:x(({active:r,selected:n})=>[e("li",{class:p(["relative cursor-default select-none py-2 pl-3 pr-9",r?"bg-secondary text-white":"text-primary"])},[e("div",Ye,[t.photo_profile?(i(),d("img",{key:0,src:t.photo_profile,alt:"Foto de perfil",class:"h-6 w-6 flex-shrink-0 rounded-full object-cover"},null,8,Qe)):(i(),d("div",et,w(ye(t.first_name,t.last_name)),1)),e("div",tt,[e("span",{class:p(["truncate block",n&&"font-semibold"])},w(t.last_name)+" "+w(t.first_name),3),e("span",{class:p(["text-xs truncate block",r?"text-blue-200":"text-gray-500"])},w(t.role==="client"?"Cliente":t.role==="basic"?"Básico":"Corporativo"),3)])]),n?(i(),d("span",{key:0,class:p(["absolute inset-y-0 right-0 flex items-center pr-4",r?"text-white":"text-secondary"])},[c(l(ee),{class:"h-5 w-5","aria-hidden":"true"})],2)):S("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):S("",!0)])]),_:1},8,["modelValue"])]),e("div",null,[st,e("div",at,[g(e("input",{"onUpdate:modelValue":a[14]||(a[14]=t=>s.progress=t),type:"number",name:"progress",id:"progress",min:"0",max:"100",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"0 - 100"},null,512),[[y,s.progress,void 0,{number:!0}]])])])]),e("div",null,[e("div",ot,[e("div",rt,[e("div",it,[(i(!0),d(C,null,P(s.stages,(t,r)=>(i(),d("div",{key:r,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},[e("div",nt,[e("div",null,[lt,g(e("input",{"onUpdate:modelValue":n=>t.status=n,type:"text",name:"stage",placeholder:"Nombre de la etapa",class:"block w-full rounded-md border-0 py-2 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary text-sm",required:""},null,8,dt),[[y,t.status]])]),e("div",ct,[e("div",ut,[mt,g(e("input",{"onUpdate:modelValue":n=>t.date=n,type:"date",name:"stage_date",class:"block w-full rounded-md border-0 py-2 text-primary shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-secondary text-sm"},null,8,pt),[[y,t.date]])]),e("button",{onClick:n=>G(r),disabled:r==0,class:p(["p-2 rounded-md",r==0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"])},[c(l($),{class:"h-6 w-6"})],10,ft)])])]))),128))]),e("div",gt,[e("div",yt,[e("table",ht,[e("thead",null,[e("tr",xt,[e("th",bt,[e("div",_t,[vt,e("button",{onClick:ce,type:"button",class:"flex items-center px-2 py-1 rounded-md text-sm text-secondary bg-selected-background hover:bg-blue-100 transition-colors"},[c(l(ae),{class:"h-4 w-4"}),wt])])]),kt,Ct])]),e("tbody",St,[(i(!0),d(C,null,P(s.stages,(t,r)=>(i(),d("tr",{key:r},[e("td",It,[g(e("input",{"onUpdate:modelValue":n=>t.status=n,type:"text",name:"stage",id:"stage",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,8,Et),[[y,t.status]])]),e("td",Vt,[g(e("input",{"onUpdate:modelValue":n=>t.date=n,type:"date",name:"stage_date",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6"},null,8,At),[[y,t.date]])]),e("td",Pt,[e("button",{onClick:n=>G(r),disabled:r==0},[c(l($),{class:p(["mx-3 h-7 w-7",r==0?"text-gray-500 cursor-not-allowed":"text-red-600/80"])},null,8,["class"])],8,Tt)])]))),128))])])])])])])]),e("div",null,[e("div",Bt,[e("div",Ut,[e("div",Ft,[e("table",$t,[e("thead",null,[e("tr",Dt,[e("th",qt,[e("div",Lt,[jt,e("button",{onClick:pe,type:"button",class:"flex items-center px-2 py-1 rounded-md text-sm text-secondary bg-selected-background hover:bg-blue-100 transition-colors"},[c(l(ae),{class:"h-4 w-4"}),Ot])])]),Mt])]),e("tbody",Nt,[(i(!0),d(C,null,P(s.caseFiles,(t,r)=>(i(),d("tr",{key:r},[e("td",Jt,[typeof t.file=="string"?(i(),d("span",zt,[e("a",{href:t.file,target:"_blank",class:"text-blue-500 hover:underline"},w(t.file.split("/").pop()),9,Gt)])):t.file?(i(),d("span",Ht," Archivo cargado: "+w(t.file.name),1)):(i(),d("span",Rt,"Ningún archivo subido")),e("input",{type:"file",id:"file-"+r,onChange:n=>me(n,r),class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,40,Xt)]),e("td",{class:p(["whitespace-nowrap w-1/5 py-4 text-sm text-primary flex gap-2",t.file?"":"px-3"])},[t.file?(i(),d("button",{key:0,onClick:n=>fe(t.file)},[c(l(Ee),{class:"h-7 w-7 text-primary"})],8,Zt)):S("",!0),e("button",{onClick:n=>ge(r)},[c(l($),{class:p(["h-7 w-7 text-red-600/80",t.file?"":"mx-3"])},null,8,["class"])],8,Kt)],2)]))),128))])])])])])]),e("div",Wt,[e("button",{onClick:le,type:"button",class:p(["inline-flex items-center justify-center px-6 py-3 text-sm font-semibold rounded-lg shadow-sm transition-all duration-200",M.value?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-100 text-gray-400 border-2 border-dashed border-gray-300 cursor-not-allowed"]),disabled:!M.value},ts,10,Yt),f.value==="edit"&&m.value?(i(),d("button",{key:0,onClick:de,type:"button",class:"inline-flex items-center justify-center px-6 py-3 text-sm font-semibold rounded-lg shadow-sm bg-amber-500 text-white hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-200"},os)):S("",!0),e("button",{onClick:xe,type:"button",class:"inline-flex items-center justify-center px-6 py-3 text-sm font-semibold rounded-lg shadow-sm bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 sm:ml-auto"},ns)])])])])],64))}};export{ps as default};
