import{a as q,r as i,b as M,o as B,y as _,d as V,e as f,f as w,g as e,w as l,v as c,z as F,k as G,j as I,l as h,m as C,p as d,h as p,i as k,F as O,_ as D,s as r,q as E}from"./index-BROrgVaC.js";import{u as H,_ as K,a as R}from"./captcha-n4RixfcF.js";import{_ as W}from"./signIn-Dom8-Uqn.js";import{l as $}from"./login_with_google-CF3J2ekO.js";const z=e("div",{class:"relative xl:absolute"},[e("div",{class:"flex justify-start p-4"},[e("img",{class:"w-40 hidden xl:block",src:K}),e("img",{class:"w-20 block xl:hidden",src:D})])],-1),J={class:"flex mt-6 justify-center xl:mt-0 xl:h-screen xl:items-center"},Q={class:"space-y-5 px-8 w-full md:px-32 2xl:px-72 xl:w-1/2 2xl:w-2/3 order-2"},X=e("h1",{class:"font-bold text-center text-2xl xl:text-3xl 2xl:text-4xl"}," Te damos la bienvenida ",-1),Y=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900"}," Correo electronico ",-1),Z=e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900"}," Contraseña ",-1),ee=e("label",{for:"confirm_password",class:"block mb-2 text-sm font-medium text-gray-900"}," Confirmar contraseña ",-1),se={class:"grid md:grid-cols-2 md:gap-6 xl:space-y-0"},oe=e("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900"}," Nombre ",-1),re=e("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900"}," Apellido ",-1),ae={class:"flex items-center mb-4"},te=e("label",{for:"privacy-policy",class:"ml-2 text-sm font-medium text-gray-900"},[d(" He leído y acepto las "),e("a",{href:"https://gymconsultoresjuridicos.com/politicas-de-privacidad-y-manejo-de-datos-personales/",target:"_blank",class:"text-secondary hover:underline"}," políticas de privacidad y manejo de datos personales ")],-1),le=["disabled"],ne={key:1,class:"grid md:grid-cols-2 md:gap-6"},ie={class:"flex flex-col"},ce={class:"font-regular"},de=e("div",{class:"flex items-center w-full mt-4"},[e("div",{class:"flex-grow border-t border-gray-300"}),e("span",{class:"mx-4 text-gray-500"},"O continuar con"),e("div",{class:"flex-grow border-t border-gray-300"})],-1),ue={class:"flex justify-center"},me={class:"w-full flex justify-around items-center text-center text-secondary font font-regular text-sm"},fe=e("div",{class:"h-screen hidden overflow-hidden order-1 xl:w-1/2 2xl:w-1/3 xl:block"},[e("img",{src:W,alt:"illustration",class:"w-full h-full object-cover"})],-1),ve={__name:"SignOn",setup(pe){const g=q(),j=H(),b=i(""),n=i(""),P=async o=>{n.value=o},S=()=>{n.value=""},u=i(!1),s=M({email:"",firstName:"",lastName:"",password:"",confirmPassword:""}),m=i(""),x=i(!1),y=i("");B(async()=>{b.value=await j.fetchSiteKey(),await g.isAuthenticated()&&_.push({name:"dashboard",params:{user_id:userId,display:""}})});const U=async()=>{if(N()){if(!u.value){r("Debes aceptar las políticas de privacidad","warning");return}if(!n.value){r("Por favor verifica que no eres un robot","warning");return}try{y.value=s.email,await E.post("/api/sign_on/send_verification_code/",{email:s.email,captcha_token:n.value}),x.value=!0,r("Se ha enviado un código de acceso a tu correo electrónico","info")}catch(o){console.error("Error during verification code process:",o),o.response&&o.response.status===409?r("El correo electrónico ya está registrado","error"):o.response&&o.response.data&&o.response.data.error?r(o.response.data.error,"error"):r("¡Error al enviar el código!","error")}}},A=async()=>{if(N()){if(y.value!==s.email){r("Has cambiado el correo electrónico de verificación, tendrás que generar un nuevo código nuevamente","warning");return}if(!n.value){r("Por favor verifica que no eres un robot","warning");return}if(!m.value){r("El código de verificación es obligatorio","warning");return}try{const o=await E.post("/api/sign_on/",{email:y.value,password:s.password,first_name:s.firstName,last_name:s.lastName,passcode:m.value,captcha_token:n.value});g.login(o.data),r("¡Registro exitoso!","success"),_.push({name:"dashboard",params:{user_id:"",display:""}})}catch(o){if(console.error("Error during sign on process:",o),o.response&&o.response.data&&o.response.data.error){const a=Array.isArray(o.response.data.error)?o.response.data.error.join(" "):o.response.data.error;r(a,"error")}else r("¡Fallo en el registro!","error")}}},N=()=>!s.firstName||!s.firstName.trim()?(r("El nombre es obligatorio","warning"),!1):!s.lastName||!s.lastName.trim()?(r("El apellido es obligatorio","warning"),!1):s.email?s.password?s.confirmPassword?s.password!==s.confirmPassword?(r("¡Las contraseñas no coinciden!","warning"),!1):!0:(r("La confirmación de la contraseña es obligatoria","warning"),!1):(r("La contraseña es obligatoria","warning"),!1):(r("El correo electrónico es obligatorio","warning"),!1),L=o=>{$(o,_,g)};return(o,a)=>{const v=V("router-link"),T=V("GoogleLogin");return f(),w(O,null,[z,e("section",J,[e("form",Q,[X,e("div",null,[Y,l(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>s.email=t),type:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[c,s.email]])]),e("div",null,[Z,l(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>s.password=t),type:"password",id:"password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[c,s.password]])]),e("div",null,[ee,l(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>s.confirmPassword=t),type:"password",id:"confirm_password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[c,s.confirmPassword]])]),e("div",se,[e("div",null,[oe,l(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>s.firstName=t),type:"text",id:"first_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[c,s.firstName]])]),e("div",null,[re,l(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>s.lastName=t),type:"text",id:"last_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[c,s.lastName]])])]),e("div",ae,[l(e("input",{id:"privacy-policy",type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=t=>u.value=t),class:"w-4 h-4 text-secondary bg-gray-100 border-gray-300 rounded focus:ring-blue-500"},null,512),[[F,u.value]]),te]),e("div",null,[b.value?(f(),G(I(R),{key:0,sitekey:b.value,onVerify:P,onExpire:S,hl:"es",class:"mx-auto"},null,8,["sitekey"])):h("",!0)]),x.value?h("",!0):(f(),w("button",{key:0,onClick:C(U,["prevent"]),type:"submit",disabled:!u.value,class:"text-white bg-secondary hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center disabled:opacity-50 disabled:cursor-not-allowed"}," Registrarse ",8,le)),x.value?(f(),w("div",ne,[l(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>m.value=t),type:"text",id:"passcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Código de verificación"},null,512),[[c,m.value]]),e("button",{onClick:C(A,["prevent"]),type:"submit",class:"text-white bg-secondary hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center"}," Verificar ")])):h("",!0),e("div",ie,[e("p",ce,[d(" ¿Tienes una cuenta? "),p(v,{to:{name:"sign_in"},class:"font-regular text-secondary"},{default:k(()=>[d(" Iniciar sesión ")]),_:1})]),de,e("div",ue,[p(T,{class:"mt-6",callback:L,"select-account":"","auto-login":!1})])]),e("div",me,[p(v,{to:{name:"terms_of_use"},class:"cursor-pointer"},{default:k(()=>[d("Condiciones de uso")]),_:1}),p(v,{to:{name:"privacy_policy"},class:"cursor-pointer"},{default:k(()=>[d("Aviso de privacidad")]),_:1})])]),fe])],64)}}};export{ve as default};
