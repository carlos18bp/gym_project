import{e as n,f as g,g as e,u as _e,r as T,aG as Se,o as K,ao as me,c as E,j as y,l as h,G as Y,w as ne,v as ge,n as q,i as _,t as B,h as ee,p as G,s as M,aa as Ne,k as R,aT as se,a7 as Ee,aU as Qe,Q as Te,m as L,a1 as oe,F as V,P as W,N as he,O as fe,C as Ve,D as De,E as je,aV as qe,a0 as ze,a as Oe,aW as ke,aX as Ie,T as H,M as O}from"./index.js";import{u as J,s as Ce,p as Pe}from"./dynamicDocument.js";import{g as te,r as Ae,a as le}from"./color_palette.js";import{_ as Re}from"./SearchBarAndFilterBy.js";import{r as Ue,a as de,_ as pe,D as He,b as Ge}from"./DocumentListClient.js";import{r as re}from"./PlusIcon.js";import{_ as ve}from"./_plugin-vue_export-helper.js";import{r as Je}from"./MagnifyingGlassIcon2.js";import{B as Ke,r as We,a as Ze,_ as Xe}from"./index2.js";import{_ as be,S as ue}from"./SignaturesList.js";import{r as xe}from"./loading_message.js";import{r as Ye}from"./TrashIcon.js";import"./MagnifyingGlassIcon.js";import"./useRecentViews.js";import"./PhotoIcon.js";function et(t,o){return n(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function tt(t,o){return n(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function st(t,o){return n(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}const ot={class:"bg-white rounded-lg p-6 shadow-xl max-w-lg w-full"},rt={class:"flex justify-end"},nt=e("label",{for:"document-name",class:"block text-base font-medium leading-6 text-primary"},[G(" Nombre "),e("span",{class:"text-red-500"},"*")],-1),at={class:"mt-2"},lt={class:"flex gap-2 mt-2.5"},dt=["disabled"],it=e("span",null,"Actualizar nombre",-1),ct=[it],ut=["disabled"],mt={__name:"UseDocumentByClient",props:{documentId:{type:[Number,null],required:!1,default:null}},emits:["close"],setup(t,{emit:o}){const s=t,a=_e(),l=J(),d=o,r=T(""),v=T(""),m=()=>{d("close")};Se(()=>{var u,w;l.selectedDocument?(r.value=((u=l.selectedDocument)==null?void 0:u.title)||"",v.value=((w=l.selectedDocument)==null?void 0:w.title)||""):(r.value="",v.value="")});const i=u=>{u.key==="Escape"&&m()};K(()=>{document.addEventListener("keydown",i)}),me(()=>{document.removeEventListener("keydown",i)});const c=E(()=>r.value.trim().length>0),f=E(()=>{var u;return!!((u=l.selectedDocument)!=null&&u.id)}),F=E(()=>f.value&&r.value.trim()!==v.value.trim()&&r.value.trim().length>0);async function x(){if(f.value&&F.value)try{const u={title:r.value.trim()};await l.updateDocument(l.selectedDocument.id,u),v.value=r.value.trim(),l.selectedDocument.title=r.value.trim();const w=l.selectedDocument.id;M("Document name successfully updated.","success"),d("close",{updatedDocId:w});const D=window.location.pathname;D==="/dynamic_document_dashboard"||D==="/dynamic_document_dashboard/"||setTimeout(()=>{window.location.href="/dynamic_document_dashboard"},1e3)}catch(u){console.error("Error updating document name:",u),M("Error updating document name.","error")}}function $(){const u=encodeURIComponent(r.value.trim());s.documentId&&!l.selectedDocument?a.push(`/dynamic_document_dashboard/document/use/creator/${s.documentId}/${u}`):l.selectedDocument?(l.selectedDocument.title=r.value.trim(),a.push(`/dynamic_document_dashboard/document/use/editor/${l.selectedDocument.id}/${u}`)):M("Error: No se pudo continuar. Documento no seleccionado.","error")}return(u,w)=>(n(),g("div",ot,[e("div",rt,[e("button",{onClick:m},[y(h(Y),{class:"size-6"})])]),e("form",{onSubmit:ee($,["prevent"])},[e("div",null,[nt,e("div",at,[ne(e("input",{"onUpdate:modelValue":w[0]||(w[0]=p=>r.value=p),type:"text",id:"document-name",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300",required:""},null,512),[[ge,r.value]])])]),e("div",lt,[f.value?(n(),g("button",{key:0,type:"button",onClick:x,disabled:!F.value,class:q(["p-2.5 text-sm font-medium rounded-md flex gap-2",F.value?"bg-primary text-white cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-70"])},ct,10,dt)):_("",!0),e("button",{type:"submit",class:q(["p-2.5 text-sm font-medium rounded-md flex gap-2",c.value?"bg-secondary text-white":"bg-gray-200 text-secondary border-2 border-dashed border-secondary cursor-not-allowed bg-opacity-50"]),disabled:!c.value},[e("span",null,B(f.value?"Editar Documento":"Continuar"),1)],10,ut)])],32)]))}},gt={class:"mt-3 pt-2 border-t border-gray-100"},ht={class:"flex items-center gap-2 text-xs text-gray-500"},ft=e("span",null,"Hacer clic para usar este documento",-1),we={__name:"UseDocumentCard",props:{document:{type:Object,required:!0},showTags:{type:Boolean,default:!0},cardType:{type:String,default:"default"},cardContext:{type:String,default:"list"},documentStore:{type:Object,default:null},userStore:{type:Object,default:null},menuOptions:{type:Array,default:null},disableInternalActions:{type:Boolean,default:!1},showMenuOptions:{type:Boolean,default:null}},emits:["click","remove-from-folder","document-created"],setup(t,{emit:o}){const s=t,a=o,l=T(!1),d=T(null),r=te(9),v=E(()=>"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium !bg-purple-100 !text-purple-700 !border !border-purple-200"),m=E(()=>r.dark),i=E(()=>"group !border-purple-400 !bg-purple-50/50 !shadow-purple-100"),c=E(()=>s.menuOptions!==null?s.menuOptions:null),f=E(()=>s.disableInternalActions?!1:s.showMenuOptions===!1||s.showMenuOptions!==!0&&s.cardContext!=="folder"),F=(u,w)=>{s.disableInternalActions?a("click",u,w):x(u.id)};function x(u){u?(d.value=u,l.value=!0):console.error("Document ID is required:",u)}function $(u){if(l.value=!1,d.value=null,u&&u.updatedDocId){a("document-created",u);const w=window.location.pathname;w==="/dynamic_document_dashboard"||w==="/dynamic_document_dashboard/"?setTimeout(()=>{window.forceDocumentHighlight&&window.forceDocumentHighlight(u.updatedDocId)},100):setTimeout(()=>{window.location.href="/dynamic_document_dashboard"},500)}}return(u,w)=>(n(),g(V,null,[y(Ke,{document:t.document,"card-type":t.cardType,"card-context":t.cardContext,"status-icon":h(Qe),"status-text":"Disponible","status-badge-classes":v.value,"menu-options":c.value,"highlighted-doc-id":null,"show-tags":t.showTags,"document-store":t.documentStore,"user-store":t.userStore,"additional-classes":i.value,"disable-internal-actions":t.disableInternalActions,"show-menu-options":t.showMenuOptions,onClick:F,onRemoveFromFolder:w[0]||(w[0]=p=>u.$emit("remove-from-folder",p))},Ne({"additional-actions":R(()=>[Ee(u.$slots,"additional-actions")]),_:2},[f.value?{name:"right-action",fn:R(()=>[y(h(Ue),{class:"w-5 h-5 text-gray-400 group-hover:text-gray-600 transition-colors"})]),key:"0"}:void 0,t.disableInternalActions?void 0:{name:"footer",fn:R(()=>[e("div",gt,[e("div",ht,[e("div",{class:"w-2 h-2 rounded-full",style:se({backgroundColor:m.value})},null,4),ft])])]),key:"1"}]),1032,["document","card-type","card-context","status-icon","status-badge-classes","menu-options","show-tags","document-store","user-store","additional-classes","disable-internal-actions","show-menu-options"]),ne(y(oe,null,{default:R(()=>[d.value!==null?(n(),L(mt,{key:0,"document-id":d.value,onClose:$},null,8,["document-id"])):_("",!0)]),_:1},512),[[Te,l.value]])],64))}},ie=t=>(he("data-v-74d4c387"),t=t(),fe(),t),pt={class:"flex items-start justify-between mb-4"},vt={class:"flex items-center gap-3"},yt={class:"relative"},bt={class:"flex-1 min-w-0"},_t={class:"font-medium text-gray-900 text-sm truncate group-hover:text-primary transition-colors"},xt={class:"text-xs text-gray-500 mt-0.5"},wt={class:"relative folder-menu-container"},$t={key:0,class:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10"},Dt=ie(()=>e("div",{class:"border-t border-gray-100 my-1"},null,-1)),kt={class:"space-y-2"},Ct={key:0,class:"flex items-center gap-2"},Ft=ie(()=>e("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)),St={class:"text-xs text-gray-600"},Et={key:1,class:"flex items-center gap-2"},Tt=ie(()=>e("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),It={class:"text-xs text-gray-600"},At={key:2,class:"flex items-center gap-2"},Ut=ie(()=>e("div",{class:"w-2 h-2 bg-orange-500 rounded-full"},null,-1)),Mt={class:"text-xs text-gray-600"},Bt={key:3,class:"text-center py-3"},Lt=ie(()=>e("p",{class:"text-xs text-gray-500"},"Carpeta vac√≠a",-1)),Nt={class:"mt-4 pt-3 border-t border-gray-100"},Qt={class:"flex items-center justify-between"},Vt={class:"text-xs text-gray-500"},jt={__name:"FolderCard",props:{folder:{type:Object,required:!0}},emits:["click","edit","delete","add-documents"],setup(t,{emit:o}){const s=t,a=o,l=W(),d=T(!1),r=T(!1),v=E(()=>l.currentUser),m=E(()=>te(s.folder.color_id)||{hex:"#6B7280",name:"Gray"}),i=E(()=>s.folder.documents?s.folder.documents.length:0),c=E(()=>{if(!s.folder.documents)return{myDocuments:[],useDocuments:[],signatureDocuments:[]};const b=s.folder.documents;return{myDocuments:b.filter(U=>{var z;return U.assigned_to===((z=v.value)==null?void 0:z.id)&&(U.state==="Progress"||U.state==="Completed")}),useDocuments:b.filter(U=>U.state==="Published"&&!U.assigned_to),signatureDocuments:b.filter(U=>U.state==="PendingSignatures"||U.state==="FullySigned")}}),f=b=>{b.target.closest(".folder-menu-container")||r.value||d.value||a("click",s.folder)},F=()=>{d.value=!d.value},x=(b=!1)=>{d.value=!1,b&&(r.value=!0,setTimeout(()=>{r.value=!1},50))},$=()=>{x(!1),a("edit",s.folder)},u=()=>{x(!1),a("delete",s.folder)},w=()=>{x(!1),a("add-documents",s.folder)},p=b=>{if(!b)return"";const U=new Date(b),I=Math.abs(new Date-U),k=Math.floor(I/(1e3*60*60*24));if(k===0)return"hoy";if(k===1)return"ayer";if(k<7)return`hace ${k} d√≠as`;if(k<30){const C=Math.floor(k/7);return`hace ${C} ${C===1?"semana":"semanas"}`}else if(k<365){const C=Math.floor(k/30);return`hace ${C} ${C===1?"mes":"meses"}`}else return U.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})},D=b=>{d.value&&!b.target.closest(".folder-menu-container")&&x(!0)};return K(()=>{document.addEventListener("click",D)}),me(()=>{document.removeEventListener("click",D)}),(b,U)=>(n(),g("div",{class:"relative bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-5 cursor-pointer group",onClick:f},[e("div",pt,[e("div",vt,[e("div",yt,[y(h(de),{class:"w-10 h-10 text-gray-400",style:se({color:m.value.hex})},null,8,["style"]),e("div",{class:"absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-white shadow-sm",style:se({backgroundColor:m.value.hex})},null,4)]),e("div",bt,[e("h3",_t,B(t.folder.name),1),e("p",xt,B(i.value)+" "+B(i.value===1?"documento":"documentos"),1)])]),e("div",wt,[e("button",{onClick:ee(F,["stop"]),class:q(["opacity-100 transition-opacity p-1.5 rounded-full hover:bg-gray-100",{"bg-gray-100":d.value}])},[y(h(We),{class:"w-4 h-4 text-gray-500"})],2),d.value?(n(),g("div",$t,[e("button",{onClick:ee($,["stop"]),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[y(h(Ae),{class:"w-4 h-4"}),G(" Editar carpeta ")]),e("button",{onClick:ee(w,["stop"]),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[y(h(re),{class:"w-4 h-4"}),G(" Agregar documentos ")]),Dt,e("button",{onClick:ee(u,["stop"]),class:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2"},[y(h(Ye),{class:"w-4 h-4"}),G(" Eliminar carpeta ")])])):_("",!0)])]),e("div",kt,[c.value.myDocuments.length>0?(n(),g("div",Ct,[Ft,e("span",St,B(c.value.myDocuments.length)+" mis documentos ",1)])):_("",!0),c.value.useDocuments.length>0?(n(),g("div",Et,[Tt,e("span",It,B(c.value.useDocuments.length)+" formatos disponibles ",1)])):_("",!0),c.value.signatureDocuments.length>0?(n(),g("div",At,[Ut,e("span",Mt,B(c.value.signatureDocuments.length)+" documentos con firmas ",1)])):_("",!0),i.value===0?(n(),g("div",Bt,[y(h(xe),{class:"w-8 h-8 text-gray-300 mx-auto mb-1"}),Lt])):_("",!0)]),e("div",Nt,[e("div",Qt,[e("span",Vt," Creada "+B(p(t.folder.created_at)),1),y(h(Ue),{class:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})])]),d.value?(n(),g("div",{key:0,onClick:x,class:"fixed inset-0 z-5"})):_("",!0)]))}},qt=ve(jt,[["__scopeId","data-v-74d4c387"]]),$e=Ve("documentFolder",{state:()=>({folders:[],currentFolder:null,isLoading:!1,error:null,lastUpdatedFolderId:null}),getters:{sortedFolders:t=>[...t.folders].sort((o,s)=>new Date(s.created_at)-new Date(o.created_at)),getFolderById:t=>o=>t.folders.find(s=>s.id===o),getFoldersByColor:t=>o=>t.folders.filter(s=>s.color_id===o),getFolderWithColor:t=>o=>{const s=t.folders.find(a=>a.id===o);return s?{...s,color:te(s.color_id)}:null},getFoldersContainingDocument:t=>o=>t.folders.filter(s=>s.document_ids&&s.document_ids.includes(o)),totalDocumentsInFolders:t=>t.folders.reduce((o,s)=>o+(s.document_ids?s.document_ids.length:0),0),hasFolders:t=>t.folders.length>0,availableColors:()=>le()},actions:{async init(t=!1){if(!(this.folders.length>0&&!t)){this.isLoading=!0,this.error=null;try{await this.fetchFolders()}catch(o){console.error("Error initializing document folder store:",o),this.error="Error al inicializar las carpetas"}finally{this.isLoading=!1}}},async fetchFolders(){try{const t=await De("dynamic-documents/folders/");if(t.status===200)return this.folders=t.data,t.data;throw new Error(`Error fetching folders: ${t.status}`)}catch(t){throw console.error("Error fetching folders:",t),this.error="Error al obtener las carpetas",t}},async fetchFolder(t){this.isLoading=!0,this.error=null;try{const o=await De(`dynamic-documents/folders/${t}/`);if(o.status===200){const s=o.data,a=this.folders.findIndex(l=>l.id===s.id);return a!==-1?this.folders[a]=s:this.folders.push(s),this.currentFolder=s,s}else throw new Error(`Error fetching folder: ${o.status}`)}catch(o){throw console.error("Error fetching folder:",o),this.error="Error al obtener la carpeta",o}finally{this.isLoading=!1}},async createFolder(t){this.isLoading=!0,this.error=null;try{if(!t.name||t.name.trim()==="")throw new Error("El nombre de la carpeta es requerido");const o=t.color_id??0;if(o<0||o>=le().length)throw new Error("Color de carpeta no v√°lido");const s={name:t.name.trim(),color_id:o,...t.document_ids&&{document_ids:t.document_ids}},a=await je("dynamic-documents/folders/create/",s);if(a.status===200||a.status===201){const l=a.data;return this.folders.push(l),this.lastUpdatedFolderId=l.id,await M("Carpeta creada exitosamente","success"),l}else throw new Error(`Error creating folder: ${a.status}`)}catch(o){throw console.error("Error creating folder:",o),this.error=o.message||"Error al crear la carpeta",await M(this.error,"error"),o}finally{this.isLoading=!1}},async updateFolder(t,o){this.isLoading=!0,this.error=null;try{if(o.name&&o.name.trim()==="")throw new Error("El nombre de la carpeta no puede estar vac√≠o");if(o.color_id!==void 0){const l=o.color_id;if(l<0||l>=le().length)throw new Error("Color de carpeta no v√°lido")}const s={};o.name&&(s.name=o.name.trim()),o.color_id!==void 0&&(s.color_id=o.color_id),o.document_ids!==void 0&&(s.document_ids=o.document_ids);const a=await qe(`dynamic-documents/folders/${t}/update/`,s);if(a.status===200){const l=a.data,d=this.folders.findIndex(r=>r.id===t);return d!==-1&&(this.folders[d]=l),this.currentFolder&&this.currentFolder.id===t&&(this.currentFolder=l),this.lastUpdatedFolderId=t,await M("Carpeta actualizada exitosamente","success"),l}else throw new Error(`Error updating folder: ${a.status}`)}catch(s){throw console.error("Error updating folder:",s),this.error=s.message||"Error al actualizar la carpeta",await M(this.error,"error"),s}finally{this.isLoading=!1}},async deleteFolder(t){this.isLoading=!0,this.error=null;try{const o=await ze(`dynamic-documents/folders/${t}/delete/`);if(o.status===204||o.status===200)return this.folders=this.folders.filter(s=>s.id!==t),this.currentFolder&&this.currentFolder.id===t&&(this.currentFolder=null),await M("Carpeta eliminada exitosamente","success"),!0;throw new Error(`Error deleting folder: ${o.status}`)}catch(o){throw console.error("Error deleting folder:",o),this.error=o.message||"Error al eliminar la carpeta",await M(this.error,"error"),o}finally{this.isLoading=!1}},async addDocumentsToFolder(t,o){const s=this.getFolderById(t);if(!s)throw new Error("Carpeta no encontrada");const a=s.document_ids||[],l=[...new Set([...a,...o])];return await this.updateFolder(t,{document_ids:l})},async removeDocumentsFromFolder(t,o){const s=this.getFolderById(t);if(!s)throw new Error("Carpeta no encontrada");const l=(s.document_ids||[]).filter(d=>!o.includes(d));return await this.updateFolder(t,{document_ids:l})},async moveDocumentsBetweenFolders(t,o,s){try{o&&await this.removeDocumentsFromFolder(o,t),s&&await this.addDocumentsToFolder(s,t),await M("Documentos movidos exitosamente","success")}catch(a){throw console.error("Error moving documents between folders:",a),await M("Error al mover documentos","error"),a}},setCurrentFolder(t){this.currentFolder=t},clearCurrentFolder(){this.currentFolder=null},reset(){this.folders=[],this.currentFolder=null,this.isLoading=!1,this.error=null,this.lastUpdatedFolderId=null},getFolderColor(t){const o=this.getFolderById(t);return o?te(o.color_id):te(0)},validateFolderData(t){const o=[];if((!t.name||t.name.trim()==="")&&o.push("El nombre de la carpeta es requerido"),t.name&&t.name.length>100&&o.push("El nombre de la carpeta no puede exceder 100 caracteres"),t.color_id!==void 0){const s=t.color_id;(s<0||s>=le().length)&&o.push("Color de carpeta no v√°lido")}return t.document_ids&&!Array.isArray(t.document_ids)&&o.push("Los IDs de documentos deben ser un array"),{isValid:o.length===0,errors:o}}}}),zt={key:0,class:"pb-8 border-b border-gray-200 flex gap-6 flex-wrap"},Ot=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Minutas y Documentos"),e("span",{class:"text-gray-400 font-regular text-sm"},"Mi unidad")],-1),Pt=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Firma Electr√≥nica"),e("span",{class:"text-gray-400 font-regular text-sm"},"Documentos")],-1),Rt=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Nueva Minuta")],-1),Ht={key:1,class:"pb-8 border-b border-gray-200 flex gap-6 flex-wrap"},Gt=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Mis Documentos")],-1),Jt=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Firma Electr√≥nica")],-1),Kt=e("div",{class:"grid"},[e("span",{class:"font-medium text-base"},"Nuevo Documento")],-1),Wt={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-auto"},Zt={class:"flex justify-between items-center mb-4"},Xt=e("h2",{class:"text-lg font-medium text-primary"},"Firma Electr√≥nica",-1),Yt={__name:"DocumentsNavigation",props:{role:String},emits:["updateCurrentSection","openNewDocument"],setup(t,{emit:o}){W();const s=Oe();K(async()=>{});const a=o,l=T("default"),d=T(!1),r=t,v=i=>{l.value=i,a("updateCurrentSection",i)},m=async i=>{try{s.userAuth&&(s.userAuth.has_signature=!0,s.saveToLocalStorageAuth()),M("Firma electr√≥nica guardada correctamente","success"),d.value=!1}catch(c){console.error("Error updating signature information:",c),M("Hubo un problema al guardar la firma","error")}};return(i,c)=>(n(),g(V,null,[(r==null?void 0:r.role)==="lawyer"?(n(),g("div",zt,[e("button",{onClick:c[0]||(c[0]=f=>v("default")),class:q(["flex gap-2 items-center py-2 px-4 rounded-xl border-2 border-yellow-300 text-start bg-white",{"bg-yellow-300/30":l.value=="default"}])},[y(h(de),{class:"size-6 text-yellow-500 font-semibold"}),Ot],2),e("button",{onClick:c[1]||(c[1]=f=>d.value=!0),class:"flex gap-2 items-center py-2 px-4 rounded-xl border-2 border-purple-300 bg-white text-start hover:bg-purple-200"},[y(h(ke),{class:"size-6 text-purple-500 font-semibold"}),Pt]),e("button",{onClick:c[2]||(c[2]=f=>i.$emit("openNewDocument")),class:"flex gap-2 items-center py-2 px-4 rounded-md bg-white text-start hover:bg-gray-100"},[y(h(re),{class:"size-6 text-secondary font-semibold"}),Rt])])):_("",!0),(r==null?void 0:r.role)==="client"?(n(),g("div",Ht,[e("button",{onClick:c[3]||(c[3]=f=>v("default")),class:q(["flex gap-2 items-center py-2 px-4 rounded-md border-2 border-yellow-300 bg-white text-start",{"bg-yellow-300/30":l.value=="default"}])},[y(h(de),{class:"size-6 text-yellow-500 font-semibold"}),Gt],2),e("button",{onClick:c[4]||(c[4]=f=>d.value=!0),class:"flex gap-2 items-center py-2 px-4 rounded-md border-2 border-purple-300 bg-white text-start hover:bg-purple-200"},[y(h(ke),{class:"size-6 text-purple-500 font-semibold"}),Jt]),e("button",{onClick:c[5]||(c[5]=f=>v("useDocument")),class:q(["flex gap-2 items-center py-2 px-4 rounded-md bg-white text-start hover:bg-gray-100",{"bg-selected-background":l.value=="useDocument"}])},[y(h(re),{class:"size-6 text-secondary font-semibold"}),Kt],2)])):_("",!0),d.value?(n(),L(oe,{key:2},{default:R(()=>[e("div",Wt,[e("div",Zt,[Xt,e("button",{onClick:c[6]||(c[6]=f=>d.value=!1),class:"text-gray-400 hover:text-gray-500"},[y(h(Y),{class:"h-6 w-6"})])]),y(Ie,{initialShowOptions:!0,"user-id":h(s).userAuth.id,onSignatureSaved:m,onCancel:c[7]||(c[7]=f=>d.value=!1)},null,8,["user-id"])])]),_:1})):_("",!0)],64))}},ye=t=>(he("data-v-53d24bf5"),t=t(),fe(),t),es={class:"tag-filter-container"},ts={class:"relative"},ss=ye(()=>e("span",null,"Filtrar por etiquetas",-1)),os={key:0,class:"ml-2 bg-primary text-white text-xs rounded-full px-2 py-0.5"},rs={key:0,class:"absolute left-0 mt-2 w-80 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},ns={class:"p-3 border-b border-gray-200"},as={class:"relative"},ls={key:0,class:"px-4 py-2 border-b border-gray-200"},ds={class:"max-h-48 overflow-y-auto"},is={key:0,class:"px-4 py-6 text-center"},cs=ye(()=>e("p",{class:"text-gray-500 text-sm"},"No hay etiquetas disponibles",-1)),us=[cs],ms={key:1,class:"px-4 py-6 text-center"},gs={class:"text-gray-500 text-sm"},hs={key:2,class:"px-4 py-6 text-center"},fs=ye(()=>e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),e("span",{class:"ml-2 text-sm text-gray-500"},"Cargando etiquetas...")],-1)),ps=[fs],vs={key:3,class:"py-1"},ys=["onClick"],bs={class:"flex items-center h-5"},_s=["id","checked","onChange"],xs={class:"ml-3 flex items-center"},ws={class:"text-sm font-medium text-gray-900"},$s={key:0,class:"mt-3"},Ds={class:"flex items-center gap-2 flex-wrap"},ks=ye(()=>e("span",{class:"text-xs font-medium text-gray-500"},"Filtrando por:",-1)),Cs=["onClick"],Fs={class:"mr-1"},Ss={__name:"TagFilter",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:o}){const s=t,a=o,l=J(),d=T(!1),r=T([]),v=T(!1),m=T(""),i=E(()=>l.sortedTags),c=E(()=>{if(!m.value.trim())return i.value;const p=m.value.toLowerCase().trim();return i.value.filter(D=>D.name.toLowerCase().includes(p))}),f=p=>{const D=te(p.color_id);return{hex:D&&D.hex?D.hex:"#9CA3AF",dark:D&&D.dark?D.dark:"#374151"}},F=()=>{d.value=!d.value,d.value&&(m.value="")},x=p=>r.value.some(D=>D.id===p.id),$=p=>{const D=r.value.findIndex(b=>b.id===p.id);D>=0?r.value.splice(D,1):r.value.push(p),a("update:modelValue",r.value)},u=()=>{r.value=[],a("update:modelValue",[])},w=p=>{p.target.closest(".tag-filter-container")||(d.value=!1,m.value="")};return K(async()=>{try{v.value=!0,await l.initTags()}catch(p){console.error("Error loading tags:",p)}finally{v.value=!1}document.addEventListener("click",w)}),H(()=>s.modelValue,p=>{r.value=p||[]},{immediate:!0}),me(()=>{document.removeEventListener("click",w)}),(p,D)=>(n(),g("div",es,[e("div",ts,[e("button",{onClick:F,class:q(["inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors",{"ring-2 ring-primary":d.value}])},[y(h(st),{class:"h-4 w-4 mr-2"}),ss,r.value.length>0?(n(),g("span",os,B(r.value.length),1)):_("",!0),y(h(tt),{class:q(["ml-2 h-4 w-4 transition-transform duration-200",{"rotate-180":d.value}])},null,8,["class"])],2),d.value?(n(),g("div",rs,[e("div",ns,[e("div",as,[y(h(Je),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),ne(e("input",{"onUpdate:modelValue":D[0]||(D[0]=b=>m.value=b),type:"text",placeholder:"Buscar etiquetas...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[ge,m.value]])])]),r.value.length>0?(n(),g("div",ls,[e("button",{onClick:u,class:"text-sm text-red-600 hover:text-red-800 font-medium transition-colors"}," Limpiar filtros ")])):_("",!0),e("div",ds,[!v.value&&c.value.length===0&&m.value.trim()===""?(n(),g("div",is,us)):_("",!0),!v.value&&c.value.length===0&&m.value.trim()!==""?(n(),g("div",ms,[e("p",gs,'No se encontraron etiquetas que coincidan con "'+B(m.value)+'"',1)])):_("",!0),v.value?(n(),g("div",hs,ps)):_("",!0),!v.value&&c.value.length>0?(n(),g("div",vs,[(n(!0),g(V,null,O(c.value,b=>(n(),g("div",{key:b.id,class:"flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer transition-colors",onClick:U=>$(b)},[e("div",bs,[e("input",{id:`tag-${b.id}`,type:"checkbox",checked:x(b),onChange:U=>$(b),class:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"},null,40,_s)]),e("div",xs,[e("div",{class:"w-4 h-4 rounded-full mr-2 border border-gray-300",style:se({backgroundColor:f(b).hex})},null,4),e("span",ws,B(b.name),1)])],8,ys))),128))])):_("",!0)])])):_("",!0)]),r.value.length>0?(n(),g("div",$s,[e("div",Ds,[ks,(n(!0),g(V,null,O(r.value,b=>(n(),g("div",{key:b.id,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border cursor-pointer transition-all duration-200 hover:shadow-sm",style:se({backgroundColor:f(b).hex,color:f(b).dark,borderColor:f(b).dark}),onClick:U=>$(b)},[e("span",Fs,B(b.name),1),y(h(Y),{class:"h-3 w-3"})],12,Cs))),128))])])):_("",!0)]))}},Fe=ve(Ss,[["__scopeId","data-v-53d24bf5"]]),Es={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ts={class:"bg-white rounded-xl shadow-xl max-w-md w-full"},Is={class:"flex justify-between items-center p-6 border-b"},As={class:"text-lg font-semibold text-gray-900"},Us={class:"mb-4"},Ms=e("label",{for:"folderName",class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de la carpeta ",-1),Bs={class:"mb-6"},Ls=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Color de la carpeta ",-1),Ns={class:"grid grid-cols-8 gap-2"},Qs=["onClick","title"],Vs={class:"flex gap-3"},js=["disabled"],qs={__name:"CreateEditFolderModal",props:{isVisible:{type:Boolean,required:!0},editingFolder:{type:Object,default:null}},emits:["close","success"],setup(t,{emit:o}){const s=t,a=o,l=$e(),d=T(!1),r=T({name:"",color_id:0}),v=E(()=>le()),m=()=>{r.value={name:"",color_id:0}};H(()=>s.editingFolder,f=>{f?r.value={name:f.name,color_id:f.color_id}:m()},{immediate:!0}),H(()=>s.isVisible,f=>{f||m()});const i=()=>{a("close")},c=async()=>{if(r.value.name.trim()){d.value=!0;try{s.editingFolder?(await l.updateFolder(s.editingFolder.id,r.value),M("Carpeta actualizada correctamente","success")):(await l.createFolder(r.value),M("Carpeta creada correctamente","success")),a("success")}catch(f){const F=s.editingFolder?"actualizar":"crear";M(`Error al ${F} la carpeta`,"error"),console.error(`Error ${F} folder:`,f)}finally{d.value=!1}}};return(f,F)=>t.isVisible?(n(),L(oe,{key:0},{default:R(()=>[e("div",Es,[e("div",Ts,[e("div",Is,[e("h3",As,B(t.editingFolder?"Editar Carpeta":"Nueva Carpeta"),1),e("button",{onClick:i,class:"text-gray-400 hover:text-gray-500"},[y(h(Y),{class:"w-6 h-6"})])]),e("form",{onSubmit:ee(c,["prevent"]),class:"p-6"},[e("div",Us,[Ms,ne(e("input",{id:"folderName","onUpdate:modelValue":F[0]||(F[0]=x=>r.value.name=x),type:"text",required:"",maxlength:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ej: Contratos Laborales"},null,512),[[ge,r.value.name]])]),e("div",Bs,[Ls,e("div",Ns,[(n(!0),g(V,null,O(v.value,x=>(n(),g("button",{key:x.id,type:"button",onClick:$=>r.value.color_id=x.id,class:q(["w-8 h-8 rounded-full border-2 transition-all",r.value.color_id===x.id?"border-gray-800 scale-110":"border-gray-300 hover:border-gray-400"]),style:se({backgroundColor:x.hex}),title:x.name},null,14,Qs))),128))])]),e("div",Vs,[e("button",{type:"button",onClick:i,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar "),e("button",{type:"submit",disabled:!r.value.name.trim()||d.value,class:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},B(d.value?"Guardando...":t.editingFolder?"Actualizar":"Crear"),9,js)])],32)])])]),_:1})):_("",!0)}},zs={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Os={class:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden"},Ps={class:"flex justify-between items-center p-6 border-b"},Rs={class:"flex items-center gap-3"},Hs={class:"text-lg font-semibold text-gray-900"},Gs={class:"text-sm text-gray-600"},Js={class:"flex items-center gap-2"},Ks={class:"p-6 overflow-y-auto max-h-[70vh]"},Ws={class:"space-y-6"},Zs={key:0},Xs=e("h4",{class:"text-base font-semibold text-gray-900 mb-3"},"Mis Documentos",-1),Ys={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},eo={key:1},to=e("h4",{class:"text-base font-semibold text-gray-900 mb-3"},"Formatos Disponibles",-1),so={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},oo={key:2},ro=e("h4",{class:"text-base font-semibold text-gray-900 mb-3"},"Documentos para Firmar",-1),no={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ao={key:3,class:"text-center py-12"},lo={class:"text-gray-400 mb-4"},io=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Esta carpeta est√° vac√≠a",-1),co=e("p",{class:"text-gray-600 mb-4"},"Agrega documentos para organizar tu trabajo",-1),uo={__name:"FolderDetailsModal",props:{folder:{type:Object,default:null}},emits:["close","add-documents","remove-document","view-document","use-document","refresh"],setup(t,{emit:o}){const s=t,a=o,l=W(),d=J(),r=E(()=>l.currentUser),v=E(()=>{var $;return($=s.folder)!=null&&$.color_id?te(s.folder.color_id)||{hex:"#6B7280"}:{hex:"#6B7280"}}),m=E(()=>{if(!s.folder)return{myDocuments:[],useDocuments:[],signatureDocuments:[]};const $=s.folder.documents||[];return{myDocuments:$.filter(u=>{var w;return u.assigned_to===((w=r.value)==null?void 0:w.id)&&(u.state==="Progress"||u.state==="Completed")}),useDocuments:$.filter(u=>u.state==="Published"&&!u.assigned_to),signatureDocuments:$.filter(u=>u.state==="PendingSignatures"||u.state==="FullySigned")}});H(()=>s.folder,($,u)=>{var w,p;if($&&u&&$.id===u.id){const D=((w=u.documents)==null?void 0:w.length)||0,b=((p=$.documents)==null?void 0:p.length)||0;b!==D&&console.log(`üìÅ FolderDetailsModal: Folder "${$.name}" updated! Documents: ${D} ‚Üí ${b}`)}},{deep:!0});const i=()=>{a("close")},c=()=>{a("add-documents",s.folder)},f=$=>{a("view-document",$)},F=$=>{const u=s.folder.documents.find(w=>w.id===$);u&&a("use-document",u)},x=$=>{a("remove-document",$.id)};return($,u)=>t.folder?(n(),L(oe,{key:0},{default:R(()=>[e("div",zs,[e("div",Os,[e("div",Ps,[e("div",Rs,[e("div",{class:"w-8 h-8 rounded-full",style:se({backgroundColor:v.value.hex})},null,4),e("div",null,[e("h3",Hs,B(t.folder.name),1),e("p",Gs,B(t.folder.documents.length)+" documentos",1)])]),e("div",Js,[e("button",{onClick:c,class:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"},[y(h(re),{class:"w-4 h-4"}),G(" Agregar documentos ")]),e("button",{onClick:i,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},[y(h(Y),{class:"w-5 h-5"})])])]),e("div",Ks,[e("div",Ws,[m.value.myDocuments.length>0?(n(),g("div",Zs,[Xs,e("div",Ys,[(n(!0),g(V,null,O(m.value.myDocuments,w=>(n(),L(h(pe),{key:w.id,document:w,"card-type":"client","card-context":"folder","highlighted-doc-id":null,"show-tags":!0,"show-client-name":!1,"additional-classes":"relative","document-store":h(d),"user-store":h(l),onClick:f,onRefresh:u[0]||(u[0]=p=>$.$emit("refresh")),onRemoveFromFolder:x},null,8,["document","document-store","user-store"]))),128))])])):_("",!0),m.value.useDocuments.length>0?(n(),g("div",eo,[to,e("div",so,[(n(!0),g(V,null,O(m.value.useDocuments,w=>(n(),L(h(we),{key:w.id,document:w,"card-context":"folder","show-menu-options":!0,"document-store":h(d),"user-store":h(l),onClick:F,onRemoveFromFolder:x},null,8,["document","document-store","user-store"]))),128))])])):_("",!0),m.value.signatureDocuments.length>0?(n(),g("div",oo,[ro,e("div",no,[(n(!0),g(V,null,O(m.value.signatureDocuments,w=>(n(),L(h(be),{key:w.id,document:w,"card-context":"folder","highlighted-doc-id":null,"document-store":h(d),"user-store":h(l),onRefresh:u[1]||(u[1]=p=>$.$emit("refresh")),onRemoveFromFolder:x},null,8,["document","document-store","user-store"]))),128))])])):_("",!0),t.folder.documents.length===0?(n(),g("div",ao,[e("div",lo,[y(h(xe),{class:"w-12 h-12 mx-auto"})]),io,co,e("button",{onClick:c,class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[y(h(re),{class:"w-4 h-4"}),G(" Agregar documentos ")])])):_("",!0)])])])])]),_:1})):_("",!0)}},mo={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},go={class:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden"},ho={class:"flex justify-between items-center p-6 border-b"},fo=e("h3",{class:"text-lg font-semibold text-gray-900"},"Agregar Documentos",-1),po={class:"text-sm text-gray-600"},vo={class:"border-b"},yo={class:"flex space-x-8 px-6","aria-label":"Tabs"},bo=["onClick"],_o={class:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs"},xo={class:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]"},wo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$o={key:4,class:"absolute top-2 left-2 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center"},Do={key:0,class:"text-center py-12"},ko=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"No hay documentos disponibles",-1),Co=e("p",{class:"text-gray-600"},"No tienes documentos de esta categor√≠a que no est√©n ya en la carpeta",-1),Fo={class:"flex justify-between items-center p-6 border-t bg-gray-50"},So={class:"text-sm text-gray-600"},Eo={class:"flex gap-3"},To=["disabled"],Io={__name:"AddDocumentsModal",props:{isVisible:{type:Boolean,required:!0},folder:{type:Object,default:null}},emits:["close","add-documents"],setup(t,{emit:o}){const s=t,a=o,l=J(),d=W(),r=T([]),v=T("my-documents"),m=T(!1),i=[{name:"my-documents",label:"Mis Documentos"},{name:"use-documents",label:"Formatos Disponibles"},{name:"pending-signatures",label:"Firmas Pendientes"},{name:"signed-documents",label:"Documentos Firmados"}],c=E(()=>d.currentUser);H(()=>s.isVisible,u=>{u&&(r.value=[],v.value="my-documents")});const f=u=>{var D;if(!s.folder)return[];const w=s.folder.documents.map(b=>b.id);let p=[];switch(u){case"my-documents":p=l.progressAndCompletedDocumentsByClient((D=c.value)==null?void 0:D.id);break;case"use-documents":p=l.publishedDocumentsUnassigned;break;case"pending-signatures":p=l.documents.filter(b=>{var U,z;return b.state==="PendingSignatures"&&(b.assigned_to===((U=c.value)==null?void 0:U.id)||((z=b.signatures)==null?void 0:z.some(I=>{var k;return I.signer_email===((k=c.value)==null?void 0:k.email)})))});break;case"signed-documents":p=l.documents.filter(b=>{var U,z;return b.state==="FullySigned"&&(b.assigned_to===((U=c.value)==null?void 0:U.id)||((z=b.signatures)==null?void 0:z.some(I=>{var k;return I.signer_email===((k=c.value)==null?void 0:k.email)})))});break;default:p=[]}return p.filter(b=>!w.includes(b.id))},F=u=>{const w=r.value.indexOf(u);w>-1?r.value.splice(w,1):r.value.push(u)},x=()=>{a("close")},$=async()=>{if(r.value.length!==0){m.value=!0;try{await a("add-documents",r.value)}finally{m.value=!1}}};return(u,w)=>t.isVisible&&t.folder?(n(),L(oe,{key:0},{default:R(()=>[e("div",mo,[e("div",go,[e("div",ho,[e("div",null,[fo,e("p",po,'Selecciona documentos para agregar a "'+B(t.folder.name)+'"',1)]),e("button",{onClick:x,class:"text-gray-400 hover:text-gray-500"},[y(h(Y),{class:"w-6 h-6"})])]),e("div",vo,[e("nav",yo,[(n(),g(V,null,O(i,p=>e("button",{key:p.name,onClick:D=>v.value=p.name,class:q([v.value===p.name?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},[G(B(p.label)+" ",1),e("span",_o,B(f(p.name).length),1)],10,bo)),64))])]),e("div",xo,[e("div",wo,[(n(!0),g(V,null,O(f(v.value),p=>(n(),g("div",{key:p.id,class:"relative"},[v.value==="my-documents"?(n(),L(h(pe),{key:0,document:p,"highlighted-doc-id":null,"show-tags":!0,"show-client-name":!1,"menu-options":[],"disable-internal-actions":!0,"additional-classes":r.value.includes(p.id)?"ring-2 ring-primary bg-primary-50":"",onClick:D=>F(p.id)},null,8,["document","additional-classes","onClick"])):_("",!0),v.value==="use-documents"?(n(),L(h(we),{key:1,document:p,"show-tags":!0,"menu-options":[],"show-menu-options":!1,"disable-internal-actions":!0,"additional-classes":r.value.includes(p.id)?"ring-2 ring-primary bg-primary-50":"",onClick:D=>F(p.id)},null,8,["document","additional-classes","onClick"])):_("",!0),v.value==="pending-signatures"?(n(),L(h(be),{key:2,document:p,"highlighted-doc-id":null,"show-tags":!0,"menu-options":[],"disable-internal-actions":!0,"additional-classes":r.value.includes(p.id)?"ring-2 ring-primary bg-primary-50":"",onClick:D=>F(p.id)},null,8,["document","additional-classes","onClick"])):_("",!0),v.value==="signed-documents"?(n(),L(h(be),{key:3,document:p,"highlighted-doc-id":null,"show-tags":!0,"menu-options":[],"disable-internal-actions":!0,"additional-classes":r.value.includes(p.id)?"ring-2 ring-primary bg-primary-50":"",onClick:D=>F(p.id)},null,8,["document","additional-classes","onClick"])):_("",!0),r.value.includes(p.id)?(n(),g("div",$o,[y(h(et),{class:"w-4 h-4"})])):_("",!0)]))),128))]),f(v.value).length===0?(n(),g("div",Do,[y(h(xe),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),ko,Co])):_("",!0)]),e("div",Fo,[e("div",So,B(r.value.length)+" documento(s) seleccionado(s) ",1),e("div",Eo,[e("button",{onClick:x,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar "),e("button",{onClick:$,disabled:r.value.length===0||m.value,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},B(m.value?"Agregando...":`Agregar ${r.value.length} documento(s)`),9,To)])])])])]),_:1})):_("",!0)}},ce=t=>(he("data-v-71ba7453"),t=t(),fe(),t),Ao={class:"folders-grid"},Uo={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Mo={key:1,class:"text-center py-12"},Bo=ce(()=>e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No tienes carpetas a√∫n",-1)),Lo=ce(()=>e("p",{class:"text-gray-600 mb-6"},"Crea tu primera carpeta para organizar tus documentos",-1)),No={key:2,class:"text-center py-12"},Qo=ce(()=>e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No se encontraron carpetas",-1)),Vo=ce(()=>e("p",{class:"text-gray-600"},"No hay carpetas que coincidan con tu b√∫squeda",-1)),jo={key:3,class:"flex justify-center items-center py-12"},qo=ce(()=>e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)),zo=[qo],Oo={__name:"FoldersGrid",props:{sortedFolders:{type:Array,required:!0},searchQuery:{type:String,default:""},isLoading:{type:Boolean,default:!1}},emits:["folder-click","edit-folder","delete-folder","add-documents","create-folder"],setup(t,{emit:o}){const s=t,a=o,l=E(()=>{if(!s.searchQuery.trim())return s.sortedFolders;const c=s.searchQuery.toLowerCase();return s.sortedFolders.filter(f=>f.name.toLowerCase().includes(c))}),d=c=>{a("folder-click",c)},r=c=>{a("edit-folder",c)},v=c=>{a("delete-folder",c)},m=c=>{a("add-documents",c)},i=()=>{a("create-folder")};return(c,f)=>(n(),g("div",Ao,[!t.isLoading&&l.value.length>0?(n(),g("div",Uo,[(n(!0),g(V,null,O(l.value,F=>(n(),L(h(qt),{key:F.id,folder:F,onClick:d,onEdit:r,onDelete:v,onAddDocuments:m},null,8,["folder"]))),128))])):!t.isLoading&&t.sortedFolders.length===0?(n(),g("div",Mo,[y(h(de),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Bo,Lo,e("button",{onClick:i,class:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"},[y(h(re),{class:"w-5 h-5"}),G(" Crear Primera Carpeta ")])])):!t.isLoading&&t.sortedFolders.length>0&&l.value.length===0?(n(),g("div",No,[y(h(de),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Qo,Vo])):_("",!0),t.isLoading?(n(),g("div",jo,zo)):_("",!0)]))}},Po=ve(Oo,[["__scopeId","data-v-71ba7453"]]),Ro=t=>(he("data-v-0f7dcabd"),t=t(),fe(),t),Ho={class:"folder-management"},Go={class:"flex justify-between items-center mb-6"},Jo=Ro(()=>e("div",null,[e("h2",{class:"text-xl font-semibold text-gray-900"},"Mis Carpetas"),e("p",{class:"text-sm text-gray-600 mt-1"},"Organiza tus documentos, firmas y formatos en carpetas personalizadas")],-1)),Ko={__name:"FolderManagement",props:{searchQuery:{type:String,default:""},selectedTags:{type:Array,default:()=>[]}},emits:["refresh","navigate-to-main"],setup(t,{emit:o}){const s=t,a=o,l=$e(),d=J(),r=W(),v=T(!1),m=T(null),i=T(null),c=T(!1),f=T(null),F=E(()=>l.isLoading),x=E(()=>l.sortedFolders);E(()=>r.currentUser),K(async()=>{await l.init(),await d.init()}),H(()=>s.searchQuery,()=>{}),H(()=>l.folders,S=>{var j,Z;if(i.value&&S&&S.length>0){const P=S.find(A=>A.id===i.value.id);if(P){const A=((j=i.value.documents)==null?void 0:j.length)||0,X=((Z=P.documents)==null?void 0:Z.length)||0;JSON.stringify(i.value)!==JSON.stringify(P)&&(i.value={...P},console.log(`üîÑ FolderManagement: Synced selectedFolder "${P.name}" with store. Documents: ${A} ‚Üí ${X}`))}}},{deep:!0});const $=()=>{m.value=null,v.value=!0},u=S=>{m.value=S,v.value=!0},w=()=>{v.value=!1,m.value=null},p=()=>{w()},D=S=>{i.value=S},b=()=>{i.value=null},U=async S=>{if(confirm(`¬øEst√°s seguro de que quieres eliminar la carpeta "${S.name}"?`))try{await l.deleteFolder(S.id),M(`Carpeta "${S.name}" eliminada correctamente`,"success")}catch(j){M("Error al eliminar la carpeta","error"),console.error("Error deleting folder:",j)}},z=S=>{f.value=S,c.value=!0},I=async(S=!1)=>{if(c.value=!1,f.value=null,S&&i.value)try{await k()}catch(j){console.warn("Error refreshing folder after adding documents:",j)}},k=async()=>{if(i.value)try{await l.fetchFolderById(i.value.id,!0);const S=l.getFolderById(i.value.id);S&&(i.value={...S},console.log("‚úÖ Selected folder refreshed successfully"))}catch(S){throw console.error("‚ùå Error refreshing selected folder:",S),S}},C=async S=>{var j,Z,P;if(!(!f.value||S.length===0))try{const A=f.value.documents.map(N=>N.id).filter(N=>N!=null&&!isNaN(parseInt(N))).map(N=>parseInt(N)),X=S.filter(N=>N!=null&&!isNaN(parseInt(N))).map(N=>parseInt(N)),Q=[...new Set([...A,...X])];if(console.log("Current document IDs:",A),console.log("Selected document IDs:",X),console.log("Updated document IDs:",Q),Q.some(N=>!Number.isInteger(N)||N<=0))throw new Error("IDs de documentos inv√°lidos detectados");await l.updateFolder(f.value.id,{document_ids:Q}),await I(!0),M(`${X.length} documento(s) agregado(s) a la carpeta`,"success"),a("navigate-to-main")}catch(A){console.error("Error adding documents to folder:",A),console.error("Error details:",((j=A.response)==null?void 0:j.data)||A.message),(Z=A.response)!=null&&Z.status?M(`Error al agregar documentos: ${((P=A.response.data)==null?void 0:P.detail)||A.message}`,"error"):M("Error al agregar documentos a la carpeta","error")}},ae=async S=>{var j,Z,P;if(i.value)try{const A=parseInt(S);if(!Number.isInteger(A)||A<=0)throw new Error("ID de documento inv√°lido");const X=i.value.documents.map(Q=>Q.id).filter(Q=>Q!=null&&!isNaN(parseInt(Q))).map(Q=>parseInt(Q)).filter(Q=>Q!==A);console.log("Removing document ID:",A),console.log("Updated document IDs after removal:",X),await l.updateFolder(i.value.id,{document_ids:X}),M("Documento removido de la carpeta","success"),i.value=null,a("navigate-to-main");try{await l.fetchFolderById(i.value.id,!0);const Q=l.getFolderById(i.value.id);Q&&(i.value=Q),console.log("Folder data refreshed successfully after removal")}catch(Q){console.warn("Error refreshing folder data:",Q);try{i.value={...i.value,documents:i.value.documents.filter(N=>N.id!==A)},console.log("Applied optimistic removal for document ID:",A)}catch(N){console.warn("Optimistic update failed:",N)}}}catch(A){console.error("Error removing document from folder:",A),console.error("Error details:",((j=A.response)==null?void 0:j.data)||A.message),(Z=A.response)!=null&&Z.status?M(`Error al remover documento: ${((P=A.response.data)==null?void 0:P.detail)||A.message}`,"error"):M("Error al remover el documento de la carpeta","error")}},Me=S=>{console.log("View document:",S)},Be=S=>{console.log("Use document:",S)},Le=(S,j)=>{console.log("Document action:",S,j)};return(S,j)=>(n(),g("div",Ho,[e("div",Go,[Jo,e("button",{onClick:$,class:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"},[y(h(re),{class:"w-5 h-5"}),G(" Nueva Carpeta ")])]),y(h(Po),{"sorted-folders":x.value,"search-query":t.searchQuery,"is-loading":F.value,onFolderClick:D,onEditFolder:u,onDeleteFolder:U,onAddDocuments:z,onCreateFolder:$},null,8,["sorted-folders","search-query","is-loading"]),y(h(qs),{"is-visible":v.value,"editing-folder":m.value,onClose:w,onSuccess:p},null,8,["is-visible","editing-folder"]),y(h(uo),{folder:i.value,onClose:b,onAddDocuments:z,onRemoveDocument:ae,onViewDocument:Me,onUseDocument:Be,onDocumentAction:Le},null,8,["folder"]),y(h(Io),{"is-visible":c.value,folder:f.value,onClose:I,onAddDocuments:C},null,8,["is-visible","folder"])]))}},Wo=ve(Ko,[["__scopeId","data-v-0f7dcabd"]]),Zo={class:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Xo={__name:"UseDocument",props:{searchQuery:String,selectedTags:{type:Array,default:()=>[]}},setup(t){const o=J(),s=W(),a=t,l=E(()=>{const r=o.publishedDocumentsUnassigned,v=a.selectedTags?a.selectedTags.map(i=>i.id):[];return o.filteredDocumentsBySearchAndTags(a.searchQuery,s,v).filter(i=>r.some(c=>c.id===i.id))});s.userSignature;function d(r){r&&r.updatedDocId&&(o.lastUpdatedDocumentId=r.updatedDocId,localStorage.setItem("lastUpdatedDocumentId",r.updatedDocId))}return(r,v)=>(n(),g("div",Zo,[(n(!0),g(V,null,O(l.value,m=>(n(),L(h(we),{key:m.id,document:m,"show-menu-options":!1,onDocumentCreated:d},null,8,["document"]))),128))]))}},Yo={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},er={__name:"DocumentFinishedByClientList",props:{searchQuery:String,selectedTags:{type:Array,default:()=>[]}},emits:["refresh"],setup(t,{emit:o}){const s=J(),a=W();K(()=>{s.init(),a.init()});const l=t,d=E(()=>{const r=s.completedDocumentsByClient,v=l.selectedTags?l.selectedTags.map(i=>i.id):[];return s.filteredDocumentsBySearchAndTags(l.searchQuery,a,v).filter(i=>r.some(c=>c.id===i.id))});return a.userSignature,(r,v)=>(n(),g("div",Yo,[(n(!0),g(V,null,O(d.value,m=>(n(),L(h(pe),{key:m.id,document:m,"card-type":"lawyer","card-context":"finished","highlighted-doc-id":null,"status-icon":h(Ze),"status-text":"Completado","status-badge-classes":"bg-green-100 text-green-700 border border-green-200","document-store":h(s),"user-store":h(a),"edit-route":`/dynamic_document_dashboard/document/use/editor/${m.id}/${encodeURIComponent(m.title.trim())}`,onRefresh:v[0]||(v[0]=i=>r.$emit("refresh"))},null,8,["document","status-icon","document-store","user-store","edit-route"]))),128))]))}},tr={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4"},sr={__name:"DocumentInProgressByClientList",props:{searchQuery:String,selectedTags:{type:Array,default:()=>[]}},emits:["refresh"],setup(t,{emit:o}){const s=J(),a=W();K(()=>{s.init(),a.init()});const l=t,d=E(()=>{const r=s.progressDocumentsByClient,v=l.selectedTags?l.selectedTags.map(i=>i.id):[];return s.filteredDocumentsBySearchAndTags(l.searchQuery,a,v).filter(i=>r.some(c=>c.id===i.id))});return a.userSignature,(r,v)=>(n(),g("div",tr,[(n(!0),g(V,null,O(d.value,m=>(n(),L(h(pe),{key:m.id,document:m,"card-type":"lawyer","card-context":"progress","highlighted-doc-id":null,"status-icon":h(Ae),"status-text":"En Progreso","status-badge-classes":"bg-blue-100 text-blue-700 border border-blue-200","document-store":h(s),"user-store":h(a),"edit-route":`/dynamic_document_dashboard/document/use/editor/${m.id}/${encodeURIComponent(m.title.trim())}`,onRefresh:v[0]||(v[0]=i=>r.$emit("refresh"))},null,8,["document","status-icon","document-store","user-store","edit-route"]))),128))]))}},or={class:"bg-white rounded-lg p-6 shadow-xl max-w-lg w-full"},rr={class:"flex justify-end"},nr=e("label",{for:"document-name",class:"block text-base font-medium leading-6 text-primary"},[G(" Nombre "),e("span",{class:"text-red-500"},"*")],-1),ar={class:"mt-2"},lr={class:"flex gap-2 mt-2.5"},dr=["disabled"],ir=e("span",null,"Actualizar nombre",-1),cr=[ir],ur=["disabled"],mr={__name:"CreateDocumentByLawyer",emits:["close"],setup(t,{emit:o}){const s=_e(),a=J(),l=o,d=T(""),r=T("");Se(()=>{var x;(x=a.selectedDocument)!=null&&x.title?(d.value=a.selectedDocument.title,r.value=a.selectedDocument.title):(d.value="",r.value="")});const v=x=>{x.key==="Escape"&&l("close")};K(()=>{document.addEventListener("keydown",v)}),me(()=>{document.removeEventListener("keydown",v)});const m=E(()=>d.value.trim().length>0),i=E(()=>{var x;return!!((x=a.selectedDocument)!=null&&x.id)}),c=E(()=>i.value&&d.value.trim()!==r.value.trim()&&d.value.trim().length>0);async function f(){if(i.value&&c.value)try{const x={title:d.value.trim()};await a.updateDocument(a.selectedDocument.id,x),r.value=d.value.trim(),a.selectedDocument.title=d.value.trim(),a.lastUpdatedDocumentId=a.selectedDocument.id,localStorage.setItem("lastUpdatedDocumentId",a.selectedDocument.id);const $=a.selectedDocument.id;l("close",{updatedDocId:$});const u=window.location.pathname;u==="/dynamic_document_dashboard"||u==="/dynamic_document_dashboard/"?setTimeout(()=>{window.forceDocumentHighlight&&window.forceDocumentHighlight($)},100):setTimeout(()=>{window.location.href="/dynamic_document_dashboard"},1e3)}catch(x){console.error("Error updating document name:",x)}}const F=async()=>{if(!m.value)return;const x=encodeURIComponent(d.value.trim());i.value?(a.selectedDocument.title=d.value,a.selectedDocument.id&&(a.lastUpdatedDocumentId=a.selectedDocument.id,localStorage.setItem("lastUpdatedDocumentId",a.selectedDocument.id.toString())),s.push(`/dynamic_document_dashboard/lawyer/editor/edit/${a.selectedDocument.id}`)):(a.selectedDocument={title:d.value.trim()},s.push(`/dynamic_document_dashboard/lawyer/editor/create/${x}`))};return(x,$)=>(n(),g("div",or,[e("div",rr,[e("button",{onClick:$[0]||($[0]=u=>l("close"))},[y(h(Y),{class:"size-6"})])]),e("form",{onSubmit:ee(F,["prevent"])},[e("div",null,[nr,e("div",ar,[ne(e("input",{"onUpdate:modelValue":$[1]||($[1]=u=>d.value=u),type:"text",name:"document-name",id:"document-name",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",required:""},null,512),[[ge,d.value]])])]),e("div",lr,[i.value?(n(),g("button",{key:0,type:"button",onClick:f,disabled:!c.value,class:q(["p-2.5 text-sm font-medium rounded-md flex gap-2",c.value?"bg-primary text-white cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-70"])},cr,10,dr)):_("",!0),e("button",{type:"submit",class:q(["p-2.5 text-sm font-medium rounded-md flex gap-2",m.value?"bg-secondary text-white":"bg-gray-200 text-secondary border-2 border-dashed border-secondary cursor-not-allowed bg-opacity-50"]),disabled:!m.value},[e("span",null,B(i.value?"Editar Documento":"Continuar"),1)],10,ur)])],32)]))}},gr={class:"p-4 sm:p-6 lg:p-10 lg:px-8"},hr={key:0,class:"mt-6"},fr={class:"mb-6 border-b border-gray-200"},pr={class:"-mb-px flex flex-wrap gap-x-4 gap-y-2 md:gap-x-8","aria-label":"Tabs"},vr=["onClick"],yr={class:"mb-6"},br={key:0},_r={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3 sm:gap-4"},xr={key:2,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3 sm:gap-4"},wr={key:3},$r={key:4},Dr={key:5,class:"mt-6 text-center text-gray-400 font-regular"},kr=e("p",null,"No hay documentos disponibles para mostrar.",-1),Cr=[kr],Fr={key:1,class:"mt-6"},Sr={key:0,class:"mb-6 border-b border-gray-200"},Er={class:"-mb-px flex flex-wrap gap-x-4 gap-y-2 md:gap-x-8","aria-label":"Tabs"},Tr=["onClick"],Ir={key:1,class:"mb-6"},Ar={class:"p-4 sm:p-6"},Ur={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full mx-auto"},Mr={class:"flex justify-between items-center p-4 border-b"},Br=e("h2",{class:"text-lg font-medium text-primary"},"Firma Electr√≥nica",-1),Lr={class:"p-4 sm:p-6"},Xr={__name:"Dashboard",setup(t){const o=W(),s=J(),a=$e(),l=_e(),d=T(""),r=T("default"),v=T(!1),m=T("my-documents"),i=T("legal-documents"),c=T(!1),f=T([]),F=E(()=>o.currentUser),x=E(()=>F.value?F.value.role:(console.log("Current user is null, redirecting to login..."),l.push("/login"),null)),$=E(()=>{let I=[];x.value==="lawyer"?I=s.draftAndPublishedDocumentsUnassigned:x.value==="client"&&(I=s.progressAndCompletedDocumentsByClient(F.value.id));const k=f.value.map(C=>C.id);return s.filteredDocumentsBySearchAndTags(d.value,o,k).filter(C=>I.some(ae=>ae.id===C.id))});K(async()=>{await o.init(),await s.init(),await a.init(),s.selectedDocument=null,r.value="default";const I=localStorage.getItem("lastUpdatedDocumentId");I&&s.documents.some(C=>C.id.toString()===I)&&(s.lastUpdatedDocumentId=parseInt(I))});const u=I=>{r.value=I,s.selectedDocument=null},w=()=>{v.value=!1,r.value="default",s.selectedDocument=null},p=async()=>{await s.init(!0)},D=async()=>{m.value="folders";try{await new Promise(I=>setTimeout(I,100)),await a.fetchFolders(!0),console.log("üìÇ Dashboard: Refreshed folders after navigate-to-main")}catch(I){console.warn("Error refreshing folders on navigate-to-main:",I)}};H(()=>s.lastUpdatedDocumentId,(I,k)=>{if(I&&I!==k&&r.value==="default"){const C=Date.now();(!H.lastExecutionTime||C-H.lastExecutionTime>100)&&(H.lastExecutionTime=C,r.value="default")}},{immediate:!1});const b=[{name:"my-documents",label:"Mis Documentos"},{name:"folders",label:"Carpetas"},{name:"pending-signatures",label:"Firmas Pendientes"},{name:"signed-documents",label:"Documentos Firmados"}],U=[{name:"legal-documents",label:"Minutas"},{name:"pending-signatures",label:"Documentos para Firmar"},{name:"signed-documents",label:"Documentos Firmados"},{name:"finished-documents",label:"Documentos Finalizados (Cliente)"},{name:"in-progress-documents",label:"Documentos en Progreso (Cliente)"}],z=async I=>{await o.getUserInfo(),o.currentUser&&(o.currentUser.has_signature=!0),showNotification("Firma electr√≥nica guardada correctamente","success"),setTimeout(()=>{c.value=!1},500)};return(I,k)=>(n(),g(V,null,[y(Re,{"onUpdate:searchQuery":k[0]||(k[0]=C=>d.value=C)},{default:R(()=>[Ee(I.$slots,"default")]),_:3}),e("div",gr,[y(Yt,{onOpenNewDocument:k[1]||(k[1]=C=>v.value=!0),onUpdateCurrentSection:u,role:x.value},null,8,["role"]),x.value==="lawyer"?(n(),g("div",hr,[e("div",fr,[e("nav",pr,[(n(),g(V,null,O(U,C=>e("button",{key:C.name,onClick:ae=>i.value=C.name,class:q([i.value===C.name?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},B(C.label),11,vr)),64))])]),e("div",yr,[y(Fe,{modelValue:f.value,"onUpdate:modelValue":k[2]||(k[2]=C=>f.value=C)},null,8,["modelValue"])]),i.value==="legal-documents"?(n(),g("div",br,[y(He,{searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])])):_("",!0),i.value==="pending-signatures"?(n(),g("div",_r,[y(ue,{state:"PendingSignatures",searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])])):_("",!0),i.value==="signed-documents"?(n(),g("div",xr,[y(ue,{state:"FullySigned",searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])])):_("",!0),i.value==="finished-documents"?(n(),g("div",wr,[y(er,{searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])])):_("",!0),i.value==="in-progress-documents"?(n(),g("div",$r,[y(sr,{searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])])):_("",!0),$.value.length===0?(n(),g("div",Dr,Cr)):_("",!0)])):_("",!0),x.value==="client"?(n(),g("div",Fr,[r.value!=="useDocument"?(n(),g("div",Sr,[e("nav",Er,[(n(),g(V,null,O(b,C=>e("button",{key:C.name,onClick:ae=>m.value=C.name,class:q([m.value===C.name?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},B(C.label),11,Tr)),64))])])):_("",!0),m.value!=="folders"?(n(),g("div",Ir,[y(Fe,{modelValue:f.value,"onUpdate:modelValue":k[3]||(k[3]=C=>f.value=C)},null,8,["modelValue"])])):_("",!0),r.value==="useDocument"?(n(),L(Xo,{key:2,searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])):(n(),g("div",{key:3,class:q(["grid gap-3 sm:gap-4",{"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3":m.value!="my-documents"&&m.value!="folders"}])},[m.value==="pending-signatures"?(n(),L(ue,{key:0,state:"PendingSignatures",searchQuery:d.value,selectedTags:f.value,onRefresh:p},null,8,["searchQuery","selectedTags"])):_("",!0),m.value==="my-documents"?(n(),L(Ge,{key:1,searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])):_("",!0),m.value==="folders"?(n(),L(Wo,{key:2,searchQuery:d.value,selectedTags:f.value,onRefresh:p,onNavigateToMain:D},null,8,["searchQuery","selectedTags"])):_("",!0),m.value==="signed-documents"?(n(),L(ue,{key:3,state:"FullySigned",searchQuery:d.value,selectedTags:f.value},null,8,["searchQuery","selectedTags"])):_("",!0)],2))])):_("",!0)]),ne(y(oe,null,{default:R(()=>[y(mr,{onClose:w})]),_:1},512),[[Te,v.value]]),c.value?(n(),L(oe,{key:0},{default:R(()=>[e("div",Ar,[e("div",Ur,[e("div",Mr,[Br,e("button",{onClick:k[4]||(k[4]=C=>c.value=!1),class:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100"},[y(h(Y),{class:"h-6 w-6"})])]),e("div",Lr,[y(Ie,{"user-id":F.value.id,"initial-show-options":!F.value.has_signature,onSignatureSaved:z,onCancel:k[5]||(k[5]=C=>c.value=!1)},null,8,["user-id","initial-show-options"])])])])]),_:1})):_("",!0),y(Xe,{isVisible:h(Ce),documentData:h(Pe),onClose:k[6]||(k[6]=C=>Ce.value=!1)},null,8,["isVisible","documentData"])],64))}};export{Xr as default};
