import{u as D,r as w,o as k,e as c,f as m,g as e,t as u,l as x,F as V,G as C,s as N,m as g,w as p,v as y,i as T,aG as U,N as E}from"./index.js";import{u as S}from"./dynamicDocument.js";const B={class:"pb-10 px-4 sm:px-6 lg:px-8 lg:pt-10"},F={class:"w-full p-5 rounded-lg border-2 border-stroke bg-terciary"},G={class:"text-primary text-xl font-semibold"},M={class:"mt-4 space-y-4"},P={class:"text-primary text-lg font-semibold col-span-12"},$={class:"col-span-4"},q=["for"],A=e("span",{class:"text-red-500"},"*",-1),L=["onUpdate:modelValue","id"],O={key:0,class:"text-red-500 text-sm mt-1"},R={class:"col-span-4"},j=e("label",{for:"tooltip",class:"block text-sm font-medium leading-6 text-primary"}," Tooltip ",-1),z=["onUpdate:modelValue"],H={class:"col-span-4"},I=e("label",{for:"field_type",class:"block text-sm font-medium leading-6 text-primary"},[g(" Tipo de input "),e("span",{class:"text-red-500"},"*")],-1),J=["onUpdate:modelValue"],K=e("option",{value:"input"},"Texto simple",-1),Q=e("option",{value:"text_area"},"Texto largo",-1),W=[K,Q],X={class:"mt-6 flex space-x-4"},te={__name:"DocumentVariablesConfig",setup(Y){const _=D(),o=S(),r=w([]);k(()=>{o.selectedDocument||console.error("No selected document found")});const h=()=>{var t;r.value=[];let n=!0;return(t=o.selectedDocument)==null||t.variables.forEach((s,i)=>{(!s.name_es||s.name_es.trim()==="")&&(r.value[i]="Este campo es obligatorio.",n=!1)}),n||E.fire({title:"Campos incompletos",text:"Por favor, completa todos los campos obligatorios.",icon:"warning"}),n},f=n=>{h()&&b(n)},b=async n=>{try{const t={title:o.selectedDocument.title,content:o.selectedDocument.content,state:n,variables:o.selectedDocument.variables.map(s=>({name_en:s.name_en,name_es:s.name_es,tooltip:s.tooltip||"",field_type:s.field_type,value:s.value}))};o.selectedDocument.id?await o.updateDocument(o.selectedDocument.id,t):await o.createDocument(t),o.selectedDocument=null,await o.init(),await N(n==="Draft"?"Documento guardado como borrador":"Documento publicado exitosamente","success"),_.push("/dynamic_document_dashboard")}catch(t){console.error("Error saving document:",t)}},v=()=>{_.push("/dynamic_document_dashboard")};return(n,t)=>{var s,i;return c(),m("div",B,[e("div",F,[e("h1",G,u((s=x(o).selectedDocument)==null?void 0:s.title),1),e("div",M,[(c(!0),m(V,null,C(((i=x(o).selectedDocument)==null?void 0:i.variables)||[],(a,l)=>(c(),m("div",{key:l,class:"grid grid-cols-12 gap-4 items-center"},[e("h2",P,u(a.name_en),1),e("div",$,[e("label",{for:"name_es_"+l,class:"block text-sm font-medium leading-6 text-primary"},[g(" Nombre en pantalla "),A],8,q),p(e("input",{type:"text","onUpdate:modelValue":d=>a.name_es=d,id:"name_es_"+l,class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300",required:""},null,8,L),[[y,a.name_es]]),r.value[l]?(c(),m("p",O,u(r.value[l]),1)):T("",!0)]),e("div",R,[j,p(e("input",{type:"text","onUpdate:modelValue":d=>a.tooltip=d,id:"tooltip",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm ring-1 ring-inset ring-gray-300",placeholder:"Opcional"},null,8,z),[[y,a.tooltip]])]),e("div",H,[I,p(e("select",{"onUpdate:modelValue":d=>a.field_type=d,id:"field_type",class:"block w-full rounded-md border-0 py-1.5 text-primary shadow-sm"},W,8,J),[[U,a.field_type]])])]))),128))]),e("div",X,[e("button",{onClick:t[0]||(t[0]=a=>f("Draft")),class:"p-2.5 text-sm font-medium rounded-md bg-secondary text-white"}," Guardar como borrador "),e("button",{onClick:t[1]||(t[1]=a=>f("Published")),class:"p-2.5 text-sm font-medium rounded-md bg-gray-200 text-secondary border-2"}," Publicar "),e("button",{onClick:t[2]||(t[2]=a=>v()),type:"button",class:"p-2.5 text-sm font-medium rounded-md flex gap-2 bg-red-600/80 text-white cursor-pointer"}," Cancelar ")])])])}}};export{te as default};
