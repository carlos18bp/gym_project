import{r as _,c as N,aX as T,e as y,f as v,u as F,o as U,g as e,ac as D,j as s,h as r,p as f,t as M,w as C,v as V,F as S,J as I,U as j,i as z,a5 as R,x as O,aY as A,aZ as P,a_ as H,a4 as G,B as Z,s as $}from"./index.js";import{u as J,_ as Q}from"./FacturationForm.js";import"./index2.js";import{r as X}from"./CalendarIcon.js";import{r as Y}from"./MagnifyingGlassIcon.js";import"./loading_message.js";import"./CloudArrowUpIcon.js";import"./DocumentIcon.js";import"./PhotoIcon.js";const K="/static/frontend/img/organigram_chart.png";function W(p,a=[]){const n=_(""),l=N(()=>{const i=T(p)?p.value:p;if(!n.value.trim())return i;const d=n.value.toLowerCase();return i.filter(w=>a.some(b=>{const h=w[b];return typeof h=="string"&&h.toLowerCase().includes(d)}))});return{searchTerm:n,filteredProcess:l}}const ee=["innerHTML"],te={__name:"HighlightText",props:{text:{type:String,required:!0},query:{type:String,default:""},highlightClass:{type:String,default:"underline"}},setup(p){const a=p;function n(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const l=N(()=>{if(!a.query.trim())return a.text;const i=n(a.query.trim()),d=new RegExp(`(${i})`,"gi");return a.text.replace(d,`<span class="${a.highlightClass} rounded-lg">$1</span>`)});return(i,d)=>(y(),v("span",{innerHTML:l.value},null,8,ee))}},se={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8 lg:hidden"},oe=O('<div class="px-4 sm:px-6 lg:px-8 pt-10 pb-6"><div class="grid grid-cols-3 w-full text-center font-semibold overflow-hidden rounded-lg"><span class="bg-secondary text-white py-3"> Seguridad </span><span class="bg-terciary text-primary py-3"> Confianza </span><span class="bg-secondary text-white py-3"> Tranquilidad </span></div></div>',1),re={class:"relative"},ae={class:"h-64 w-full overflow-hidden"},ne=["src"],le={class:"absolute left-8 -bottom-16 sm:left-12"},ie={class:"relative"},ce=["src"],de={class:"px-4 sm:px-6 lg:px-8 pt-20 pb-6"},ue={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between"},pe=e("h1",{class:"text-3xl font-bold text-gray-900"},"G&M",-1),me=e("p",{class:"text-lg text-gray-600 mt-1"},"Firma de Abogados G&M",-1),ge={class:"flex items-center gap-4 mt-2 text-sm text-gray-500"},fe={class:"flex items-center gap-1"},he={class:"flex items-center gap-1"},xe={class:"flex items-center gap-1"},_e={class:"mt-4 sm:mt-0 sm:self-start"},ye={class:"px-4 sm:px-6 lg:px-8 pb-10"},ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},we={class:"space-y-6"},be={class:"bg-gray-100 p-6 rounded-xl shadow-md"},Ce=e("h2",{class:"text-lg font-semibold text-primary mb-4"},"Radicar Informe",-1),$e=e("p",{class:"text-sm text-gray-700 mb-4 leading-relaxed"}," Por favor, radique su Informe de Actividades y su Cuenta de Cobro o Factura en este espacio. Recuerde presentar únicamente los documentos debidamente aprobados y firmados por el Supervisor, incluyendo los anexos correspondientes según los términos establecidos. ",-1),ke={class:"lg:col-span-2 bg-blue-100 p-6 rounded-xl shadow-md flex flex-col"},Le=e("div",{class:"mb-4"},[e("h2",{class:"text-xl font-semibold text-primary mb-2"}," Procedimientos G&M "),e("p",{class:"text-sm text-gray-700"}," Aquí encontrarás los procesos y sub-procesos administrativos, operativos, mercadeo y comerciales de G&M ")],-1),Me={class:"w-full mb-4"},Se=e("label",{for:"search",class:"sr-only"},"Buscar",-1),je={class:"relative"},ze={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Re={class:"flex-grow space-y-2 text-sm rounded-xl font-regular bg-white px-4 py-3 overflow-auto max-h-[500px]"},Ge=["onClick"],Ne={class:"relative bg-white rounded-xl shadow-xl max-w-[95vw] w-full max-h-[95vh] overflow-hidden flex flex-col"},Te={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 flex-shrink-0"},qe=e("h2",{class:"text-xl font-semibold text-gray-900"},"Organigrama G&M",-1),Ee=e("div",{class:"p-6 overflow-auto flex-grow flex items-start justify-center bg-gray-50 min-h-0"},[e("img",{src:K,alt:"Organigrama y organización de G&M",class:"max-w-full h-auto rounded-lg shadow-md",style:{"min-width":"fit-content"}})],-1),Be={class:"px-6 py-4 border-t border-gray-200 flex justify-end flex-shrink-0"},Qe={__name:"IntranetGyM",setup(p){const a=_(!1),n=_(!1);F();const l=J(),i=_([]),{searchTerm:d,filteredProcess:w}=W(i,["name"]);U(async()=>{await l.init(),i.value=l.legalDocuments});const b=c=>{if(!c)return"documento";let t=c.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t=t.replace(/ñ/gi,"n").replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),t||"documento"},h=async c=>{try{if(!c.file_url){await $("No se encontró el archivo para descargar","error");return}const t=c.file_url.split("/");let o=t[t.length-1]||"";try{o=decodeURIComponent(o)}catch{}const x=o.match(/\.(docx?|pdf|xlsx?|txt)$/i),u=x?x[0]:".docx",q=c.name||o.replace(/\.(docx?|pdf|xlsx?|txt)$/i,""),E=`${b(q)}${u}`;let m="application/octet-stream";u.toLowerCase()===".docx"?m="application/vnd.openxmlformats-officedocument.wordprocessingml.document":u.toLowerCase()===".pdf"?m="application/pdf":u.toLowerCase()===".doc"?m="application/msword":u.toLowerCase()===".xlsx"?m="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":u.toLowerCase()===".xls"&&(m="application/vnd.ms-excel");const k=await fetch(c.file_url);if(!k.ok)throw new Error("Error al descargar el archivo");const B=await k.blob(),g=document.createElement("a"),L=window.URL.createObjectURL(B);g.href=L,g.download=E,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(L),await $(`Documento "${c.name}" descargado exitosamente`,"success")}catch(t){console.error("Error downloading document:",t),await $("Error al descargar el documento","error")}};return(c,t)=>(y(),v(S,null,[e("div",se,[D(c.$slots,"default")]),oe,e("div",re,[e("div",ae,[e("img",{src:s(l).profile.cover_image_url||"https://images.unsplash.com/photo-1497366216548-37526070297c?w=1200&h=400&fit=crop",alt:"Cover",class:"h-full w-full object-cover"},null,8,ne)]),e("div",le,[e("div",ie,[e("img",{src:s(l).profile.profile_image_url||"https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=200&h=200&fit=crop",alt:"G&M Logo",class:"h-32 w-32 rounded-full border-4 border-white shadow-lg object-cover"},null,8,ce)])])]),e("div",de,[e("div",ue,[e("div",null,[pe,me,e("div",ge,[e("span",fe,[r(s(A),{class:"h-4 w-4"}),f(" "+M(s(l).lawyers_count)+" "+M(s(l).lawyers_count===1?"miembro":"miembros"),1)]),e("span",he,[r(s(P),{class:"h-4 w-4"}),f(" 0 invitaciones pendientes ")]),e("span",xe,[r(s(X),{class:"h-4 w-4"}),f(" Creado 28 de septiembre de 2025 ")])])]),e("div",_e,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>n.value=!0),class:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-medium shadow-md hover:shadow-lg"},[r(s(H),{class:"h-5 w-5"}),f(" Ver Organigrama ")])])])]),e("div",ye,[e("div",ve,[e("div",we,[e("div",be,[Ce,$e,e("button",{type:"button",onClick:t[1]||(t[1]=o=>a.value=!0),class:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-secondary text-white rounded-lg hover:bg-opacity-90 transition-all font-medium"},[r(s(G),{class:"h-5 w-5"}),f(" Enviar Informe ")])])]),e("div",ke,[Le,e("div",Me,[Se,e("div",je,[e("div",ze,[r(s(Y),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),C(e("input",{id:"search",name:"search","onUpdate:modelValue":t[2]||(t[2]=o=>T(d)?d.value=o:null),class:"block w-full rounded-xl border-0 bg-white py-2 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"Buscar",type:"search"},null,512),[[V,s(d)]])])]),e("ul",Re,[(y(!0),v(S,null,I(s(w),(o,x)=>(y(),v("li",{key:x,class:"cursor-pointer hover:bg-blue-100 rounded-lg p-2 transition-colors"},[e("button",{type:"button",onClick:u=>h(o),class:"flex items-center space-x-2 text-primary font-regular w-full text-left"},[r(s(G),{class:"size-5 flex-shrink-0"}),r(te,{text:o.name,query:s(d),highlightClass:"bg-blue-200"},null,8,["text","query"])],8,Ge)]))),128))])])])]),C(r(R,null,{default:z(()=>[r(Q,{onClose:t[3]||(t[3]=o=>a.value=!1)})]),_:1},512),[[j,a.value]]),C(r(R,null,{default:z(()=>[e("div",Ne,[e("div",Te,[qe,e("button",{onClick:t[4]||(t[4]=o=>n.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg",title:"Cerrar"},[r(s(Z),{class:"h-6 w-6"})])]),Ee,e("div",Be,[e("button",{onClick:t[5]||(t[5]=o=>n.value=!1),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"}," Cerrar ")])])]),_:1},512),[[j,n.value]])],64))}};export{Qe as default};
