import{B as $}from"./index3.js";import{c as g,e as a,k as D,b5 as O,i as u,a9 as m,f as i,n as j,g as l,t as d,l as f}from"./index.js";const I={key:0,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T=l("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),F=l("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1),N=[T,F],M={key:1,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},R=l("path",{d:"M20 6L9 17l-5-5"},null,-1),q=[R],A={key:2,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U=l("path",{d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"},null,-1),z=[U],H={key:1,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200"},L={key:0,class:"text-sm text-gray-600 leading-relaxed"},E={__name:"DocumentCard",props:{document:{type:Object,required:!0},cardType:{type:String,default:"default"},cardContext:{type:String,default:"list"},highlightedDocId:{type:[String,Number],default:null},showTags:{type:Boolean,default:!0},showClientName:{type:Boolean,default:!1},showSignatureProgress:{type:Boolean,default:!1},customStatusBadge:{type:Boolean,default:!1},additionalClasses:{type:[String,Array,Object],default:""},statusIcon:{type:[String,Object,Function],default:null},statusText:{type:String,default:null},statusBadgeClasses:{type:[String,Object,Array],default:null},documentStore:{type:Object,default:null},userStore:{type:Object,default:null},promptDocuments:{type:Boolean,default:!1},editModalComponent:{type:String,default:"UseDocumentByClient"},editRoute:{type:String,default:null},menuOptions:{type:Array,default:null},disableInternalActions:{type:Boolean,default:!1}},emits:["click","refresh","modal-open","navigation","remove-from-folder"],setup(t,{emit:y}){const o=t,h=y,b=g(()=>{if(o.menuOptions!==null)return o.menuOptions}),S=e=>{h("click",o.document,e)},C=g(()=>o.cardType!=="lawyer"?!1:o.document.requires_signature),k=g(()=>{if(o.document.fully_signed)return"bg-green-100 text-green-700 border border-green-200";const e=c(o.document);return e!=null&&e.signed?"bg-blue-100 text-blue-700 border border-blue-200":e&&!e.signed?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-700 border border-gray-200"}),c=e=>{var s;if(!e.signatures||!((s=o.userStore)!=null&&s.currentUser))return null;const n=String(o.userStore.currentUser.id);return e.signatures.find(r=>String(r.signer_id)===n)},w=e=>{if(!e.requires_signature)return"";if(e.fully_signed)return"Documento formalizado";const n=c(e);if(e.signatures&&e.signatures.length>0){const s=e.signatures.length,r=e.signatures.filter(v=>v.signed).length;if(n&&n.signed){if(r===1&&s>1)return`Has firmado. Faltan ${s-r} firmas más`;if(r<s)return`Has firmado. Faltan ${s-r} firmas más`}return`Firmas: ${r}/${s}`}return n?"Requiere tu firma":"Requiere firmas"},x=e=>{if(!o.userStore)return"Desconocido";const n=o.userStore.userById(e);return n?`${n.first_name} ${n.last_name}`:"Desconocido"},B=e=>e.signatures?e.signatures.length:0,p=e=>e.signatures?e.signatures.filter(n=>n.signed).length:0;return(e,n)=>(a(),D($,{document:t.document,"card-type":t.cardType,"card-context":t.cardContext,"status-icon":t.statusIcon,"status-text":t.statusText,"status-badge-classes":t.statusBadgeClasses,"highlighted-doc-id":t.highlightedDocId,"show-tags":t.showTags,"additional-classes":t.additionalClasses,"menu-options":b.value,"disable-internal-actions":t.disableInternalActions,"document-store":t.documentStore,"user-store":t.userStore,"prompt-documents":t.promptDocuments,"edit-modal-component":t.editModalComponent,"edit-route":t.editRoute,onClick:S,onRefresh:n[0]||(n[0]=s=>e.$emit("refresh")),onModalOpen:n[1]||(n[1]=s=>e.$emit("modal-open",s)),onNavigation:n[2]||(n[2]=s=>e.$emit("navigation",s)),onRemoveFromFolder:n[3]||(n[3]=s=>e.$emit("remove-from-folder",s))},O({"additional-badges":u(()=>{var s;return[C.value?(a(),i("div",{key:0,class:j(["inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",k.value])},[t.document.fully_signed?(a(),i("svg",I,N)):(s=c(t.document))!=null&&s.signed?(a(),i("svg",M,q)):(a(),i("svg",A,z)),l("span",null,d(t.document.fully_signed?"Formalizado":w(t.document)),1)],2)):f("",!0),t.showSignatureProgress&&t.document.signatures?(a(),i("div",H,[l("span",null,d(p(t.document))+"/"+d(B(t.document)),1)])):f("",!0)]}),"additional-content":u(()=>[t.showClientName&&t.document.assigned_to?(a(),i("p",L," Cliente: "+d(x(t.document.assigned_to)),1)):f("",!0),m(e.$slots,"additional-content")]),"additional-actions":u(()=>[m(e.$slots,"additional-actions")]),_:2},[t.customStatusBadge?{name:"status-badge",fn:u(()=>[m(e.$slots,"status-badge")]),key:"0"}:void 0]),1032,["document","card-type","card-context","status-icon","status-text","status-badge-classes","highlighted-doc-id","show-tags","additional-classes","menu-options","disable-internal-actions","document-store","user-store","prompt-documents","edit-modal-component","edit-route"]))}};export{E as _};
