import{e as r,f as a,g as i,c as h,m as B,ab as $,k as d,a8 as m,n as j,t as u,i as f}from"./index.js";import{B as D}from"./index2.js";function P(t,c){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function E(t,c){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const O={key:0,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A=i("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),I=i("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1),F=[A,I],M={key:1,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},N=i("path",{d:"M20 6L9 17l-5-5"},null,-1),T=[N],R={key:2,class:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},q=i("path",{d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"},null,-1),U=[q],V={key:1,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200"},z={key:0,class:"text-sm text-gray-600 leading-relaxed"},Z={__name:"DocumentCard",props:{document:{type:Object,required:!0},cardType:{type:String,default:"default"},cardContext:{type:String,default:"list"},highlightedDocId:{type:[String,Number],default:null},showTags:{type:Boolean,default:!0},showClientName:{type:Boolean,default:!1},showSignatureProgress:{type:Boolean,default:!1},customStatusBadge:{type:Boolean,default:!1},additionalClasses:{type:[String,Array,Object],default:""},statusIcon:{type:[String,Object,Function],default:null},statusText:{type:String,default:null},statusBadgeClasses:{type:[String,Object,Array],default:null},documentStore:{type:Object,default:null},userStore:{type:Object,default:null},promptDocuments:{type:Boolean,default:!1},editModalComponent:{type:String,default:"UseDocumentByClient"},editRoute:{type:String,default:null},menuOptions:{type:Array,default:null},disableInternalActions:{type:Boolean,default:!1}},emits:["click","refresh","modal-open","navigation","remove-from-folder"],setup(t,{emit:c}){const o=t,y=c,b=h(()=>{if(o.menuOptions!==null)return o.menuOptions}),k=e=>{y("click",o.document,e)},w=h(()=>{if(o.document.fully_signed)return"bg-green-100 text-green-700 border border-green-200";const e=g(o.document);return e!=null&&e.signed?"bg-blue-100 text-blue-700 border border-blue-200":e&&!e.signed?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-700 border border-gray-200"}),g=e=>{var s;if(!e.signatures||!((s=o.userStore)!=null&&s.currentUser))return null;const n=String(o.userStore.currentUser.id);return e.signatures.find(l=>String(l.signer_id)===n)},S=e=>{if(!e.requires_signature)return"";if(e.fully_signed)return"Documento formalizado";const n=g(e);if(e.signatures&&e.signatures.length>0){const s=e.signatures.length,l=e.signatures.filter(p=>p.signed).length;if(n&&n.signed){if(l===1&&s>1)return`Has firmado. Faltan ${s-l} firmas más`;if(l<s)return`Has firmado. Faltan ${s-l} firmas más`}return`Firmas: ${l}/${s}`}return n?"Requiere tu firma":"Requiere firmas"},C=e=>{if(!o.userStore)return"Desconocido";const n=o.userStore.userById(e);return n?`${n.first_name} ${n.last_name}`:"Desconocido"},x=e=>e.signatures?e.signatures.length:0,v=e=>e.signatures?e.signatures.filter(n=>n.signed).length:0;return(e,n)=>(r(),B(D,{document:t.document,"card-type":t.cardType,"card-context":t.cardContext,"status-icon":t.statusIcon,"status-text":t.statusText,"status-badge-classes":t.statusBadgeClasses,"highlighted-doc-id":t.highlightedDocId,"show-tags":t.showTags,"additional-classes":t.additionalClasses,"menu-options":b.value,"disable-internal-actions":t.disableInternalActions,"document-store":t.documentStore,"user-store":t.userStore,"prompt-documents":t.promptDocuments,"edit-modal-component":t.editModalComponent,"edit-route":t.editRoute,onClick:k,onRefresh:n[0]||(n[0]=s=>e.$emit("refresh")),onModalOpen:n[1]||(n[1]=s=>e.$emit("modal-open",s)),onNavigation:n[2]||(n[2]=s=>e.$emit("navigation",s)),onRemoveFromFolder:n[3]||(n[3]=s=>e.$emit("remove-from-folder",s))},$({"additional-badges":d(()=>{var s;return[t.document.requires_signature?(r(),a("div",{key:0,class:j(["inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",w.value])},[t.document.fully_signed?(r(),a("svg",O,F)):(s=g(t.document))!=null&&s.signed?(r(),a("svg",M,T)):(r(),a("svg",R,U)),i("span",null,u(t.document.fully_signed?"Formalizado":S(t.document)),1)],2)):f("",!0),t.showSignatureProgress&&t.document.signatures?(r(),a("div",V,[i("span",null,u(v(t.document))+"/"+u(x(t.document)),1)])):f("",!0)]}),"additional-content":d(()=>[t.showClientName&&t.document.assigned_to?(r(),a("p",z," Cliente: "+u(C(t.document.assigned_to)),1)):f("",!0),m(e.$slots,"additional-content")]),"additional-actions":d(()=>[m(e.$slots,"additional-actions")]),_:2},[t.customStatusBadge?{name:"status-badge",fn:d(()=>[m(e.$slots,"status-badge")]),key:"0"}:void 0]),1032,["document","card-type","card-context","status-icon","status-text","status-badge-classes","highlighted-doc-id","show-tags","additional-classes","menu-options","disable-internal-actions","document-store","user-store","prompt-documents","edit-modal-component","edit-route"]))}};export{Z as _,E as a,P as r};
