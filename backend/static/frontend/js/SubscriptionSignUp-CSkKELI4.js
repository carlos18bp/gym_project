import{u as M,G as R,a as B,r as l,b as T,o as I,d as N,e as m,f as _,g as e,w as n,v as c,z as D,k as F,j as H,l as h,m as V,p as g,h as k,i as C,x as K,s as t,q}from"./index-BROrgVaC.js";import{u as O,_ as $,a as z}from"./captcha-n4RixfcF.js";const W={class:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},Y={class:"max-w-md w-full"},J=e("div",{class:"text-center mb-8"},[e("img",{class:"mx-auto h-16 w-auto",src:$,alt:"G&M Abogados"}),e("h2",{class:"mt-6 text-3xl font-bold text-primary"}," Crea tu cuenta "),e("p",{class:"mt-2 text-sm text-gray-600"}," Regístrate para completar tu suscripción ")],-1),Q={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-8"},X={class:"space-y-6"},Z=e("label",{for:"email",class:"block text-sm font-medium text-gray-900 mb-2"}," Correo electrónico ",-1),ee={class:"grid grid-cols-2 gap-4"},re=e("label",{for:"first_name",class:"block text-sm font-medium text-gray-900 mb-2"}," Nombre ",-1),oe=e("label",{for:"last_name",class:"block text-sm font-medium text-gray-900 mb-2"}," Apellido ",-1),se=e("label",{for:"password",class:"block text-sm font-medium text-gray-900 mb-2"}," Contraseña ",-1),te=e("label",{for:"confirm_password",class:"block text-sm font-medium text-gray-900 mb-2"}," Confirmar contraseña ",-1),ae={class:"flex items-start"},ne=e("label",{for:"privacy-policy",class:"ml-2 text-sm text-gray-700"},[g(" He leído y acepto las "),e("a",{href:"https://gymconsultoresjuridicos.com/politicas-de-privacidad-y-manejo-de-datos-personales/",target:"_blank",class:"text-secondary hover:underline font-medium"}," políticas de privacidad y manejo de datos personales ")],-1),ie={key:0},le=["disabled"],ce={key:1,class:"space-y-4"},de=e("label",{for:"passcode",class:"block text-sm font-medium text-gray-900 mb-2"}," Código de verificación ",-1),ue={class:"text-center"},pe={class:"text-sm text-gray-600"},me={class:"mt-6"},ge=K('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">O continuar con</span></div></div>',1),fe={class:"mt-6 flex justify-center"},ye={class:"mt-6 text-center"},be=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),_e={__name:"SubscriptionSignUp",setup(ve){const f=M(),y=R(),b=B(),P=O(),v=l(""),i=l(""),S=async r=>{i.value=r},j=()=>{i.value=""},d=l(!1),o=T({email:"",firstName:"",lastName:"",password:"",confirmPassword:""}),u=l(""),x=l(!1),w=l("");I(async()=>{if(v.value=await P.fetchSiteKey(),await b.isAuthenticated()){const r=y.query.plan||"basico";f.push({name:"checkout",params:{plan:r}})}});const U=async()=>{if(E(),!d.value){t("Debes aceptar las políticas de privacidad","warning");return}if(!i.value){t("Por favor verifica que no eres un robot","warning");return}try{w.value=o.email,await q.post("/api/sign_on/send_verification_code/",{email:o.email,captcha_token:i.value}),x.value=!0,t("Se ha enviado un código de acceso a tu correo electrónico","info")}catch(r){console.error("Error during verification code process:",r),r.response&&r.response.status===409?t("El correo electrónico ya está registrado","error"):r.response&&r.response.data&&r.response.data.error?t(r.response.data.error,"error"):t("Error al enviar el código","error")}},A=async()=>{if(E(),w.value!==o.email){t("Has cambiado el correo electrónico de verificación, tendrás que generar un nuevo código nuevamente","warning");return}if(!i.value){t("Por favor verifica que no eres un robot","warning");return}if(!u.value){t("El código de verificación es obligatorio","warning");return}try{const r=await q.post("/api/sign_on/",{email:w.value,password:o.password,first_name:o.firstName,last_name:o.lastName,passcode:u.value,captcha_token:i.value});b.login(r.data),t("¡Registro exitoso!","success");const s=y.query.plan||"basico";f.push({name:"checkout",params:{plan:s}})}catch(r){if(console.error("Error during sign on process:",r),r.response&&r.response.data&&r.response.data.error){const s=Array.isArray(r.response.data.error)?r.response.data.error.join(" "):r.response.data.error;t(s,"error")}else t("Error en el registro","error")}},E=()=>{if(!o.email)throw t("El correo electrónico es obligatorio","warning"),new Error("Email required");if(!o.firstName)throw t("El nombre es obligatorio","warning"),new Error("First name required");if(!o.lastName)throw t("El apellido es obligatorio","warning"),new Error("Last name required");if(!o.password)throw t("La contraseña es obligatoria","warning"),new Error("Password required");if(!o.confirmPassword)throw t("La confirmación de la contraseña es obligatoria","warning"),new Error("Confirm password required");if(o.password!==o.confirmPassword)throw t("Las contraseñas no coinciden","warning"),new Error("Passwords don't match")},G=async r=>{try{const s=await q.post("/api/google_login/",{credential:r.credential});b.login(s.data),t("¡Registro exitoso con Google!","success");const p=y.query.plan||"basico";f.push({name:"checkout",params:{plan:p}})}catch{t("Error al registrarse con Google","error")}};return(r,s)=>{const p=N("router-link"),L=N("GoogleLogin");return m(),_("div",W,[e("div",Y,[J,e("div",Q,[e("form",X,[e("div",null,[Z,n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.email=a),type:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",required:""},null,512),[[c,o.email]])]),e("div",ee,[e("div",null,[re,n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>o.firstName=a),type:"text",id:"first_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",required:""},null,512),[[c,o.firstName]])]),e("div",null,[oe,n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>o.lastName=a),type:"text",id:"last_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",required:""},null,512),[[c,o.lastName]])])]),e("div",null,[se,n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>o.password=a),type:"password",id:"password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",required:""},null,512),[[c,o.password]])]),e("div",null,[te,n(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>o.confirmPassword=a),type:"password",id:"confirm_password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",required:""},null,512),[[c,o.confirmPassword]])]),e("div",ae,[n(e("input",{id:"privacy-policy",type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=a=>d.value=a),class:"w-4 h-4 text-secondary bg-gray-100 border-gray-300 rounded focus:ring-secondary mt-1"},null,512),[[D,d.value]]),ne]),e("div",null,[v.value?(m(),F(H(z),{key:0,sitekey:v.value,onVerify:S,onExpire:j,hl:"es",class:"mx-auto"},null,8,["sitekey"])):h("",!0)]),x.value?h("",!0):(m(),_("div",ie,[e("button",{onClick:V(U,["prevent"]),type:"submit",disabled:!d.value,class:"w-full text-white bg-secondary hover:bg-blue-700 font-semibold rounded-lg text-sm px-5 py-3 text-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Registrarse ",8,le)])),x.value?(m(),_("div",ce,[e("div",null,[de,n(e("input",{"onUpdate:modelValue":s[6]||(s[6]=a=>u.value=a),type:"text",id:"passcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-secondary focus:border-secondary block w-full p-2.5",placeholder:"Ingresa el código enviado a tu correo"},null,512),[[c,u.value]])]),e("button",{onClick:V(A,["prevent"]),type:"submit",class:"w-full text-white bg-secondary hover:bg-blue-700 font-semibold rounded-lg text-sm px-5 py-3 text-center transition-colors"}," Verificar y crear cuenta ")])):h("",!0),e("div",ue,[e("p",pe,[g(" ¿Ya tienes cuenta? "),k(p,{to:{name:"subscription_sign_in",query:{plan:r.$route.query.plan}},class:"font-medium text-secondary hover:text-blue-700"},{default:C(()=>[g(" Inicia sesión aquí ")]),_:1},8,["to"])])])]),e("div",me,[ge,e("div",fe,[k(L,{callback:G,"select-account":"","auto-login":!1})])])]),e("div",ye,[k(p,{to:{name:"subscriptions"},class:"text-sm text-gray-600 hover:text-primary flex items-center justify-center gap-2"},{default:C(()=>[be,g(" Volver a planes ")]),_:1})])])])}}};export{_e as default};
