import{a as V,b as U,r as m,o as S,q as f,d as g,e as b,f as x,g as e,w as l,v as n,h as w,i as T,m as _,j as y,k as q,F as L,_ as j,p as v}from"./index.js";import{_ as A,s as r}from"./notification_message.js";import{l as G}from"./login_with_google.js";import"./sweetalert2.esm.all.js";const I=e("div",{class:"absolute"},[e("div",{class:"flex justify-center p-4"},[e("img",{src:j})])],-1),O={class:"pt-16 flex h-screen items-center md:pt-0"},B={class:"space-y-5 px-8 w-full md:px-32 2xl:px-72 xl:w-1/2 2xl:w-2/3 order-2"},E=e("h1",{class:"font-bold text-center text-2xl xl:text-3xl 2xl:text-4xl"}," Te damos la bienvenida ",-1),F=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900"}," Correo electronico ",-1),M=e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900"}," Contraseña ",-1),R=e("label",{for:"confirm_password",class:"block mb-2 text-sm font-medium text-gray-900"}," Confirmar contraseña ",-1),W={class:"grid md:grid-cols-2 md:gap-6"},D=e("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900"}," Nombre ",-1),Y=e("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900"}," Apellido ",-1),z={key:0,class:"flex gap-4"},H={class:"flex flex-col"},J={class:"font-regular"},K={class:"font-regular text-blue-800"},Q=e("div",{class:"flex items-center w-full max-w-lg mt-4"},[e("div",{class:"flex-grow border-t border-gray-300"}),e("span",{class:"mx-4 text-gray-500"},"O continuar con"),e("div",{class:"flex-grow border-t border-gray-300"})],-1),X={class:"flex justify-center"},Z=e("div",{class:"h-screen hidden overflow-hidden order-1 xl:w-1/2 2xl:w-1/3 xl:block"},[e("img",{src:A,alt:"illustration",class:"w-full h-full object-cover"})],-1),re={__name:"SignOn",setup($){const d=V(),s=U({email:"",firstName:"",lastName:"",password:"",confirmPassword:""}),i=m(""),c=m(""),u=m("");S(()=>{d.isAuthenticated&&f.push({name:"process_list",params:{user_id:userId,display:""}})});const h=async()=>{p(),r("An access code has been sent to your email","info");try{u.value=s.email;const a=await v.post("/api/sign_on/send_verification_code/",{email:s.email});c.value=a.data.passcode}catch(a){console.error("Error during verification code process:",a),a.response&&a.response.status===409?r("The email is already registered","error"):r("Send code failed!","error")}},k=async()=>{if(p(),u.value!==s.email){r("You have changed the verification email, you will have to generate a new code again","warning");return}if(c.value==i.value){const a=await v.post("/api/sign_on/",{email:u.value,password:s.password,first_name:s.firstName,last_name:s.lastName,passcode:i.value});d.login(a.data),r("Sign On successful!","success"),f.push({name:"process_list",params:{user_id:userId,display:""}})}else r("Code is not valid","warning")},p=()=>{if(!s.email){r("Email is required","warning");return}if(!s.password){r("Passwords is required","warning");return}if(!s.confirmPassword){r("Confirm Passwords is required","warning");return}if(s.password!==s.confirmPassword){r("Passwords do not match!","warning");return}if(s.password!==s.confirmPassword){r("Passwords do not match!","warning");return}},N=a=>{G(a,f,d)};return(a,o)=>{const C=g("RouterLink"),P=g("GoogleLogin");return b(),x(L,null,[I,e("section",O,[e("form",B,[E,e("div",null,[F,l(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.email=t),type:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[n,s.email]])]),e("div",null,[M,l(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.password=t),type:"password",id:"password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[n,s.password]])]),e("div",null,[R,l(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.confirmPassword=t),type:"password",id:"confirm_password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[n,s.confirmPassword]])]),e("div",W,[e("div",null,[D,l(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>s.firstName=t),type:"text",id:"first_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[n,s.firstName]])]),e("div",null,[Y,l(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>s.lastName=t),type:"text",id:"last_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[n,s.lastName]])])]),e("button",{onClick:w(h,["prevent"]),type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center"}," Registrarse "),c.value?(b(),x("div",z,[l(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>i.value=t),type:"text",id:"passcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Copy your code sent"},null,512),[[n,i.value]]),e("button",{onClick:w(k,["prevent"]),type:"submit",class:"text-white bg-blue-500 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center"}," Código de verificación ")])):T("",!0),e("div",H,[e("p",J,[_(" ¿Tienes una cuenta? "),e("a",K,[y(C,{to:{name:"sign_in"}},{default:q(()=>[_(" Iniciar sesión ")]),_:1})])]),Q,e("div",X,[y(P,{class:"mt-6",callback:N,prompt:""})])])]),Z])],64)}}};export{re as default};
