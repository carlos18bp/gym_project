import{e as l,f as c,g as e,z as N,u as F,B as V,A as M,c as _,G as I,r as v,C as O,E as Z,t as i,j as d,l as h,w as q,v as G,F as f,D as C,i as P,q as H,H as J,n as K}from"./index.js";import{_ as Q,a as W,b as X}from"./TextStages.js";import{r as Y}from"./MagnifyingGlassIcon.js";import{r as ee}from"./EyeIcon.js";import{r as se}from"./ChevronRightIcon.js";function te(B,g){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}const oe={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},ae={class:"py-10 px-4 sm:px-6 lg:px-8"},ie={key:0,class:"p-5 rounded-lg border-2 border-stroke bg-terciary"},ne={class:"col-span-2"},re={class:"flex items-center justify-between gap-3"},le={class:"flex items-center gap-3"},ce=e("img",{src:X,class:"h-6 w-6"},null,-1),de={class:"grid"},ue={class:"text-base text-primary font-medium"},_e={class:"text-sm text-gray-500 font-regular"},he={class:"grid xl:grid-cols-2"},pe={class:"font-medium mt-4 space-y-1"},me={class:"flex gap-2"},ve=e("h3",{class:"text-base text-primary"},"Usuario:",-1),fe={class:"text-gray-500"},ge={class:"flex gap-2"},xe=e("h3",{class:"text-base text-primary"},"Autoridad:",-1),ye={class:"text-gray-500"},be={class:"flex gap-2"},we=e("h3",{class:"text-base text-primary"},"Dte./Accionante:",-1),ke={class:"text-gray-500"},Ce={class:"flex gap-2"},Pe=e("h3",{class:"text-base text-primary"},"Dte./Accionado:",-1),Be={class:"text-gray-500"},$e={class:"flex gap-2"},je=e("h3",{class:"text-base text-primary"},"Radicado:",-1),De={class:"text-gray-500"},Ae={class:"flex gap-2"},Le=e("h3",{class:"text-base text-primary"},"Etapa Procesal:",-1),Se={class:"text-gray-500"},Ee={class:"hidden md:block relative mt-16"},Ue={class:"relative"},Re=H('<div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div><div class="border-2 border-gray-500"></div><div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div>',3),Te={class:"mt-14"},ze={class:"flex flex-col gap-3 justify-between font-medium md:flex-row"},Ne=e("h3",{class:"text-base text-primary"},"Expendiente:",-1),Fe={class:"max-w-lg lg:max-w-xs"},Ve=e("label",{for:"search",class:"sr-only"},"Buscar",-1),Me={class:"relative"},Ie={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Oe={class:"flow-root overflow-y-auto max-h-[400px] whitespace-nowrap"},Ze={class:"-my-2 sm:-mx-6 lg:-mx-8"},qe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Ge={class:"min-w-full divide-y divide-gray-300"},He=e("thead",null,[e("tr",{class:"text-left text-base font-regular text-primary"},[e("th",{scope:"col",class:"py-3.5 pr-3 w-2/5"},"Documento"),e("th",{scope:"col",class:"px-3 py-3.5 w-2/5"},"Fecha"),e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"AcciÃ³n")])],-1),Je={class:"divide-y divide-gray-200"},Ke={class:"w-2/5 py-4 pr-3 text-sm font-medium text-stone-700 sm:pl-0 break-words"},Qe={class:"whitespace-nowrap w-2/5 px-3 py-4 text-sm text-stone-700"},We={class:"whitespace-nowrap w-1/5 px-3 py-4 text-sm text-primary flex space-x-2"},Xe=["onClick"],Ye=["onClick"],es={class:"w-full flex justify-between mt-4"},ss={class:"flex items-center justify-between"},ts={class:"sm:flex sm:flex-1 sm:items-center sm:justify-between"},os={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},as=["disabled"],is=e("span",{class:"sr-only"},"Anterior",-1),ns=["onClick"],rs=["disabled"],ls=e("span",{class:"sr-only"},"Siguiente",-1),cs={key:0},ds=e("span",{class:"lg:block"},"Editar",-1),us=[ds],fs={__name:"ProcessDetail",setup(B){const g=N(),$=F(),x=V(),y=M(),j=_(()=>y.currentUser),b=g.params.process_id,o=_(()=>x.processById(b));I(async()=>{await x.init(),await y.init()});const u=v(""),n=v(1),p=v(10);O(u,()=>{n.value=1});function D(){$.push({name:"process_form",params:{action:"edit",process_id:b}})}const w=_(()=>u.value?o.value.case_files.filter(s=>k(s.file).toLowerCase().includes(u.value.toLowerCase())):o.value.case_files),A=_(()=>{const s=(n.value-1)*p.value,a=s+p.value;return w.value.slice(s,a)}),m=_(()=>Math.ceil(w.value.length/p.value));function L(){n.value>1&&n.value--}function S(){n.value<m.value&&n.value++}function E(s){n.value=s}function k(s){return s.split("/").pop()}function U(s){window.open(s,"_blank")}const R=async s=>{try{const a=await fetch(s);if(!a.ok)throw new Error(`Failed to fetch the file: ${a.statusText}`);const t=await a.blob(),r=document.createElement("a");r.href=window.URL.createObjectURL(t);const z=s.split("/").pop();r.download=z,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href)}catch(a){console.error("An error occurred while downloading the file:",a)}},T=s=>{const a=new Date(s),t={timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return a.toLocaleString("en-CA",t)};return(s,a)=>(l(),c(f,null,[e("div",oe,[Z(s.$slots,"default")]),e("div",ae,[o.value?(l(),c("div",ie,[e("div",ne,[e("div",re,[e("div",le,[ce,e("div",de,[e("h1",ue,i(o.value.case.type),1),e("h2",_e,i(o.value.subcase),1)])])])]),e("div",he,[e("div",pe,[e("div",me,[ve,e("p",fe,i(o.value.client.last_name)+" "+i(o.value.client.first_name),1)]),e("div",ge,[xe,e("p",ye,i(o.value.authority),1)]),e("div",be,[we,e("p",ke,i(o.value.plaintiff),1)]),e("div",Ce,[Pe,e("p",Be,i(o.value.defendant),1)]),e("div",$e,[je,e("p",De,i(o.value.ref),1)]),e("div",Ae,[Le,e("p",Se,i(o.value.stages[o.value.stages.length-1].status),1)])]),e("div",Ee,[e("div",Ue,[Re,d(Q,{length:o.value.stages.length,displayParam:"history"},null,8,["length"])]),e("div",null,[d(W,{stages:o.value.stages},null,8,["stages"])])])]),e("div",Te,[e("div",ze,[Ne,e("div",Fe,[Ve,e("div",Me,[e("div",Ie,[d(h(Y),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),q(e("input",{id:"search",name:"search","onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),class:"block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"Buscar",type:"search"},null,512),[[G,u.value]])])])]),e("div",Oe,[e("div",Ze,[e("div",qe,[e("table",Ge,[He,e("tbody",Je,[(l(!0),c(f,null,C(A.value,t=>(l(),c("tr",{key:t.id},[e("td",Ke,i(k(t.file)),1),e("td",Qe,i(T(t.created_at)),1),e("td",We,[e("button",{onClick:r=>R(t.file)},[d(h(J),{class:"h-5 w-5","aria-hidden":"true"})],8,Xe),e("button",{onClick:r=>U(t.file)},[d(h(ee),{class:"h-5 w-5","aria-hidden":"true"})],8,Ye)])]))),128))])])])])])]),e("div",es,[e("div",ss,[e("div",ts,[e("div",null,[e("nav",os,[e("button",{onClick:L,disabled:n.value===1,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[is,d(h(te),{class:"h-5 w-5","aria-hidden":"true"})],8,as),(l(!0),c(f,null,C(m.value,t=>(l(),c("span",{key:t,onClick:r=>E(t),class:K(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus:outline-offset-0",{"bg-secondary text-white":n.value===t},{"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer":n.value!==t}])},i(t),11,ns))),128)),e("button",{onClick:S,disabled:n.value===m.value,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[ls,d(h(se),{class:"h-5 w-5","aria-hidden":"true"})],8,rs)])])])]),j.value.role!=="client"?(l(),c("div",cs,[e("button",{onClick:D,type:"button",class:"p-2.5 text-sm text-white font-medium bg-secondary rounded-md flex gap-2"},us)])):P("",!0)])])):P("",!0)])],64))}};export{fs as default};
