import{e as l,f as c,g as e,x as F,u as V,y as M,c as _,z as O,r as v,A as I,C as Z,t as i,j as d,l as h,w as q,v as G,F as f,B as P,i as B,s as H,D as J,n as K}from"./index.js";import{_ as Q,a as W,b as X}from"./TextStages.js";import{u as Y}from"./process.js";import{r as ee}from"./MagnifyingGlassIcon.js";import{r as se}from"./EyeIcon.js";import{r as te}from"./ChevronRightIcon.js";function oe($,g){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}const ae={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"},ie={class:"py-10 px-4 sm:px-6 lg:px-8"},ne={key:0,class:"p-5 rounded-lg border-2 border-stroke bg-terciary"},re={class:"col-span-2"},le={class:"flex items-center justify-between gap-3"},ce={class:"flex items-center gap-3"},de=e("img",{src:X,class:"h-6 w-6"},null,-1),ue={class:"grid"},_e={class:"text-base text-primary font-medium"},he={class:"text-sm text-gray-500 font-regular"},pe={class:"grid xl:grid-cols-2"},me={class:"font-medium mt-4 space-y-1"},ve={class:"flex gap-2"},fe=e("h3",{class:"text-base text-primary"},"Usuario:",-1),ge={class:"text-gray-500"},xe={class:"flex gap-2"},ye=e("h3",{class:"text-base text-primary"},"Autoridad:",-1),we={class:"text-gray-500"},be={class:"flex gap-2"},ke=e("h3",{class:"text-base text-primary"},"Dte./Accionante:",-1),Ce={class:"text-gray-500"},Pe={class:"flex gap-2"},Be=e("h3",{class:"text-base text-primary"},"Dte./Accionado:",-1),$e={class:"text-gray-500"},je={class:"flex gap-2"},De=e("h3",{class:"text-base text-primary"},"Radicado:",-1),Ae={class:"text-gray-500"},Le={class:"flex gap-2"},Se=e("h3",{class:"text-base text-primary"},"Etapa Procesal:",-1),Ue={class:"text-gray-500"},Ee={class:"hidden md:block relative mt-16"},Re={class:"relative"},Te=H('<div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div><div class="border-2 border-gray-500"></div><div class="flex justify-between"><div class="border-2 border-gray-500 h-4 w-0"></div><div class="border-2 border-gray-500 h-4 w-0"></div></div>',3),ze={class:"mt-14"},Ne={class:"flex flex-col gap-3 justify-between font-medium md:flex-row"},Fe=e("h3",{class:"text-base text-primary"},"Expendiente:",-1),Ve={class:"max-w-lg lg:max-w-xs"},Me=e("label",{for:"search",class:"sr-only"},"Buscar",-1),Oe={class:"relative"},Ie={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Ze={class:"flow-root overflow-y-auto max-h-[400px] whitespace-nowrap"},qe={class:"-my-2 sm:-mx-6 lg:-mx-8"},Ge={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},He={class:"min-w-full divide-y divide-gray-300"},Je=e("thead",null,[e("tr",{class:"text-left text-base font-regular text-primary"},[e("th",{scope:"col",class:"py-3.5 pr-3 w-2/5"},"Documento"),e("th",{scope:"col",class:"px-3 py-3.5 w-2/5"},"Fecha"),e("th",{scope:"col",class:"px-3 py-3.5 w-1/5"},"AcciÃ³n")])],-1),Ke={class:"divide-y divide-gray-200"},Qe={class:"w-2/5 py-4 pr-3 text-sm font-medium text-stone-700 sm:pl-0 break-words"},We={class:"whitespace-nowrap w-2/5 px-3 py-4 text-sm text-stone-700"},Xe={class:"whitespace-nowrap w-1/5 px-3 py-4 text-sm text-primary flex space-x-2"},Ye=["onClick"],es=["onClick"],ss={class:"w-full flex justify-between mt-4"},ts={class:"flex items-center justify-between"},os={class:"sm:flex sm:flex-1 sm:items-center sm:justify-between"},as={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},is=["disabled"],ns=e("span",{class:"sr-only"},"Anterior",-1),rs=["onClick"],ls=["disabled"],cs=e("span",{class:"sr-only"},"Siguiente",-1),ds={key:0},us=e("span",{class:"lg:block"},"Editar",-1),_s=[us],xs={__name:"ProcessDetail",setup($){const g=F(),j=V(),x=Y(),y=M(),w=_(()=>y.currentUser),b=g.params.process_id,o=_(()=>x.processById(b));O(async()=>{await x.init(),await y.init()});const u=v(""),n=v(1),p=v(10);I(u,()=>{n.value=1});function D(){return w.value.id==o.value.lawyer.id}function A(){j.push({name:"process_form",params:{action:"edit",process_id:b}})}const k=_(()=>u.value?o.value.case_files.filter(s=>C(s.file).toLowerCase().includes(u.value.toLowerCase())):o.value.case_files),L=_(()=>{const s=(n.value-1)*p.value,a=s+p.value;return k.value.slice(s,a)}),m=_(()=>Math.ceil(k.value.length/p.value));function S(){n.value>1&&n.value--}function U(){n.value<m.value&&n.value++}function E(s){n.value=s}function C(s){return s.split("/").pop()}function R(s){window.open(s,"_blank")}const T=async s=>{try{const a=await fetch(s);if(!a.ok)throw new Error(`Failed to fetch the file: ${a.statusText}`);const t=await a.blob(),r=document.createElement("a");r.href=window.URL.createObjectURL(t);const N=s.split("/").pop();r.download=N,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href)}catch(a){console.error("An error occurred while downloading the file:",a)}},z=s=>{const a=new Date(s),t={timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return a.toLocaleString("en-CA",t)};return(s,a)=>(l(),c(f,null,[e("div",ae,[Z(s.$slots,"default")]),e("div",ie,[o.value?(l(),c("div",ne,[e("div",re,[e("div",le,[e("div",ce,[de,e("div",ue,[e("h1",_e,i(o.value.case.type),1),e("h2",he,i(o.value.subcase),1)])])])]),e("div",pe,[e("div",me,[e("div",ve,[fe,e("p",ge,i(o.value.client.last_name)+" "+i(o.value.client.first_name),1)]),e("div",xe,[ye,e("p",we,i(o.value.authority),1)]),e("div",be,[ke,e("p",Ce,i(o.value.plaintiff),1)]),e("div",Pe,[Be,e("p",$e,i(o.value.defendant),1)]),e("div",je,[De,e("p",Ae,i(o.value.ref),1)]),e("div",Le,[Se,e("p",Ue,i(o.value.stages[o.value.stages.length-1].status),1)])]),e("div",Ee,[e("div",Re,[Te,d(Q,{length:o.value.stages.length,displayParam:"history"},null,8,["length"])]),e("div",null,[d(W,{stages:o.value.stages},null,8,["stages"])])])]),e("div",ze,[e("div",Ne,[Fe,e("div",Ve,[Me,e("div",Oe,[e("div",Ie,[d(h(ee),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),q(e("input",{id:"search",name:"search","onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),class:"block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6",placeholder:"Buscar",type:"search"},null,512),[[G,u.value]])])])]),e("div",Ze,[e("div",qe,[e("div",Ge,[e("table",He,[Je,e("tbody",Ke,[(l(!0),c(f,null,P(L.value,t=>(l(),c("tr",{key:t.id},[e("td",Qe,i(C(t.file)),1),e("td",We,i(z(t.created_at)),1),e("td",Xe,[e("button",{onClick:r=>T(t.file)},[d(h(J),{class:"h-5 w-5","aria-hidden":"true"})],8,Ye),e("button",{onClick:r=>R(t.file)},[d(h(se),{class:"h-5 w-5","aria-hidden":"true"})],8,es)])]))),128))])])])])])]),e("div",ss,[e("div",ts,[e("div",os,[e("div",null,[e("nav",as,[e("button",{onClick:S,disabled:n.value===1,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[ns,d(h(oe),{class:"h-5 w-5","aria-hidden":"true"})],8,is),(l(!0),c(f,null,P(m.value,t=>(l(),c("span",{key:t,onClick:r=>E(t),class:K(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus:outline-offset-0",{"bg-secondary text-white":n.value===t},{"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 cursor-pointer":n.value!==t}])},i(t),11,rs))),128)),e("button",{onClick:U,disabled:n.value===m.value,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"},[cs,d(h(te),{class:"h-5 w-5","aria-hidden":"true"})],8,ls)])])])]),w.value.role!=="client"&&D()?(l(),c("div",ds,[e("button",{onClick:A,type:"button",class:"p-2.5 text-sm text-white font-medium bg-secondary rounded-md flex gap-2"},_s)])):B("",!0)])])):B("",!0)])],64))}};export{xs as default};
